{"id":"BL-0057","title":"Milestone: Drift-proof contracts and tooling gates","type":"contract","status":"queued","priority":"P2","tags":["milestone","tooling","ui-shell"],"created_at":"2025-01-01T00:00:00.000Z","updated_at":"2026-01-02T17:30:18.130Z","target":{"selector":"milestone","value":"1.0.0"},"deps":["BL-0004","BL-0005","BL-0006","BL-0048"],"evidence":["Contract: `.ato/contracts/PLATFORM_CONTRACT.md` (§1.3, §12, §15)."],"owner":"codex","notes":"Scaling primitives/shell/docs without drift-proof validators (schema, support matrix, contract validation discipline) creates rewrite traps and long-term contra\nContractRefsOriginal: [{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"1.3\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"12\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"15\"}]","details":{"rationale":"Scaling primitives/shell/docs without drift-proof validators (schema, support matrix, contract validation discipline) creates rewrite traps and long-term contract drift.","links":["Contract: `.ato/contracts/PLATFORM_CONTRACT.md` (§1.3, §12, §15)."]},"spec":{"problem":"Scaling primitives/shell/docs without drift-proof validators (schema, support matrix, contract validation discipline) creates rewrite traps and long-term contract drift.","outcome":"Contract registries are schema-validated (CI + editor validation) and validation is deterministic.","acceptance_criteria":["Contract registries are schema-validated (CI + editor validation) and validation is deterministic.","A Baseline “support matrix” exists and can be surfaced by the workbench/docs.","Contract/doc drift is caught by CI (no “claimed but not implemented” docs tables)."],"inputs":["Scaling primitives/shell/docs without drift-proof validators (schema, support matrix, contract validation discipline) creates rewrite traps and long-term contract drift."],"deliverables":["Contract registries are schema-validated (CI + editor validation) and validation is deterministic."],"scope":["tools/**","packages/*/contracts/**","packages/ui-shell/**"],"risks":["Coupling risk: tooling can become order-dependent if it requires `dist/` artifacts without explicit `:build` paths."],"contract_refs":["6.4"],"runbook":[]}}
{"id":"BL-0058","title":"Milestone: Interaction foundations stable (focus + overlays)","type":"tooling","status":"queued","priority":"P2","tags":["accessibility","milestone","ui-primitives","ui-shell"],"created_at":"2025-01-01T00:00:01.000Z","updated_at":"2026-01-02T17:30:18.130Z","target":{"selector":"milestone","value":"1.0.0"},"deps":["BL-0007","BL-0008","BL-0010","BL-0011"],"evidence":["Contract: `.ato/contracts/PLATFORM_CONTRACT.md` (§7, §8, §13G, §15)."],"owner":"codex","notes":"Complex widgets and desktop patterns depend on stable focus/roving and overlay behavior; shipping them without foundations guarantees rewrites.\nContractRefsOriginal: [{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"7\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"8\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"13.1.G\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"13.1.E\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"15\"}]","details":{"rationale":"Complex widgets and desktop patterns depend on stable focus/roving and overlay behavior; shipping them without foundations guarantees rewrites.","links":["Contract: `.ato/contracts/PLATFORM_CONTRACT.md` (§7, §8, §13G, §15)."]},"spec":{"problem":"Complex widgets and desktop patterns depend on stable focus/roving and overlay behavior; shipping them without foundations guarantees rewrites.","outcome":"Focus/roving contract is documented and enforced by tests across multiple components.","acceptance_criteria":["Focus/roving contract is documented and enforced by tests across multiple components.","Overlay close/focus/initial-focus semantics are unified and test-backed.","APG harness exists and is used by at least one widget conformance suite."],"inputs":["Complex widgets and desktop patterns depend on stable focus/roving and overlay behavior; shipping them without foundations guarantees rewrites."],"deliverables":["Focus/roving contract is documented and enforced by tests across multiple components."],"scope":["packages/ui-primitives/**","packages/ui-shell/**"],"risks":["Compatibility risk: overlay dismissal semantics must align with APG/native behavior and remain Baseline-safe."],"contract_refs":["6.4"],"runbook":[]}}
{"id":"BL-0059","title":"Milestone: Docs competitive baseline achieved","type":"doc","status":"queued","priority":"P2","tags":["docs","milestone","ui-primitives","ui-shell"],"created_at":"2025-01-01T00:00:02.000Z","updated_at":"2026-01-02T17:30:18.130Z","target":{"selector":"milestone","value":"1.0.0"},"deps":["BL-0021","BL-0024","BL-0043","BL-0044","BL-0046","BL-0054"],"evidence":[],"owner":"codex","notes":"Docs is the primary dogfooding surface; reaching a competitive baseline surfaces platform gaps early without creating docs-only architecture.\nContractRefsOriginal: [{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"10.2\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"11.2\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"11.4\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"12\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"13.1.B\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"8\"}]","details":{"rationale":"Docs is the primary dogfooding surface; reaching a competitive baseline surfaces platform gaps early without creating docs-only architecture.","links":[]},"spec":{"problem":"Docs is the primary dogfooding surface; reaching a competitive baseline surfaces platform gaps early without creating docs-only architecture.","outcome":"Keyboard-first navigation tree and command-palette search exist and are tested.","acceptance_criteria":["Keyboard-first navigation tree and command-palette search exist and are tested.","Mobile nav drawer pattern exists with verified focus management and axe=0 gates.","Visual regression gate exists (or an explicit chosen approach is implemented) and budgets prevent regressions."],"inputs":["Docs is the primary dogfooding surface; reaching a competitive baseline surfaces platform gaps early without creating docs-only architecture."],"deliverables":["Keyboard-first navigation tree and command-palette search exist and are tested."],"scope":["packages/docs/**","packages/ui-shell/**","packages/ui-primitives/**"],"risks":["Coupling risk: docs must not pull runtime router/site-generator tooling into packages (`PLATFORM_CONTRACT.md` §11.4, §13B)."],"contract_refs":["6.4"],"runbook":[]}}
{"id":"BL-0060","title":"Milestone: `1.0.0` readiness gates verified (V1-A…V1-F)","type":"tooling","status":"queued","priority":"P2","tags":["governance","milestone"],"created_at":"2025-01-01T00:00:03.000Z","updated_at":"2026-01-02T17:30:18.130Z","target":{"selector":"milestone","value":"1.0.0"},"deps":["BL-0057","BL-0058","BL-0059"],"evidence":[],"owner":"codex","notes":"`1.0.0` is a stability promise; criteria must be verified with evidence before committing to SemVer stability guarantees.\nContractRefsOriginal: [{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"12\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"15\"}]","details":{"rationale":"`1.0.0` is a stability promise; criteria must be verified with evidence before committing to SemVer stability guarantees.","links":[]},"spec":{"problem":"`1.0.0` is a stability promise; criteria must be verified with evidence before committing to SemVer stability guarantees.","outcome":"`1.0.0` is a stability promise; criteria must be verified with evidence before committing to SemVer stability guarantees.","acceptance_criteria":["`1.0.0` is a stability promise; criteria must be verified with evidence before committing to SemVer stability guarantees."],"inputs":["`1.0.0` is a stability promise; criteria must be verified with evidence before committing to SemVer stability guarantees."],"deliverables":["`1.0.0` is a stability promise; criteria must be verified with evidence before committing to SemVer stability guarantees."],"scope":["repo-wide (tokens/primitives/shell/docs)","test gates","packaging/exports","docs generation"],"risks":["Rewrite risk: verifying late can reveal missing foundations; milestone sequencing must prevent this."],"contract_refs":["6.4"],"runbook":[]}}
{"id":"BL-0063","title":"Ensure all `AGENTS.md` routers remain local-only and are enforced","type":"tooling","status":"done","priority":"P2","tags":["governance"],"created_at":"2025-01-01T00:00:05.000Z","updated_at":"2025-12-26T03:30:42.030Z","target":{"selector":"range","value":"0.1.x"},"deps":[],"evidence":[],"owner":"codex","notes":"`AGENTS.md` routers are local operational constraints in this workspace and must remain gitignored; enforcement is behavioral (always read routers when present)","details":{"rationale":"`AGENTS.md` routers are local operational constraints in this workspace and must remain gitignored; enforcement is behavioral (always read routers when present), not a git distribution problem.","links":[]},"completed_at":"2025-12-26T03:30:42.030Z","frozen":{"core_hash":"b307c51d27f95010f8066e0f56a6b6bd9bb218a452098976f17e651e578c170f"},"spec":{"problem":"`AGENTS.md` routers are local operational constraints in this workspace and must remain gitignored; enforcement is behavioral (always read routers when present), not a git distribution problem.","outcome":"Root `.gitignore` ignores `AGENTS.md` and `**/AGENTS.md` (routers remain local-only).","acceptance_criteria":["Root `.gitignore` ignores `AGENTS.md` and `**/AGENTS.md` (routers remain local-only).","Root `AGENTS.md` and package `AGENTS.md` routers require being read before work begins (router protocol is explicit)."],"inputs":["`AGENTS.md` routers are local operational constraints in this workspace and must remain gitignored; enforcement is behavioral (always read routers when present), not a git distribution problem."],"deliverables":["Root `.gitignore` ignores `AGENTS.md` and `**/AGENTS.md` (routers remain local-only)."],"scope":[".gitignore","AGENTS.md","packages/*/AGENTS.md"],"risks":["Drift risk: if routers are missing or not read, constraints and triggers won’t be applied consistently within the workspace."],"contract_refs":[],"runbook":[]}}
{"id":"BL-0038","title":"Codify and enforce the “no adapters / no wrapper stacks” policy","type":"debt","status":"done","priority":"P2","tags":["debt","governance"],"created_at":"2025-01-01T00:00:08.000Z","updated_at":"2025-12-26T03:32:42.541Z","target":{"selector":"range","value":"0.1.x"},"deps":[],"evidence":["Source: internal consolidation notes (“DX via adapters creates a second ecosystem surface”) + `.internal/views/RELEASES.md` (no adapters decision) + `.ato/contracts/PLATFORM_CONTRACT.md` (§13)."],"owner":"codex","notes":"“DX via adapters” is an explicit rewrite trap; preventing a second ecosystem surface requires concrete contribution gates and documentation, not only intent.","details":{"rationale":"“DX via adapters” is an explicit rewrite trap; preventing a second ecosystem surface requires concrete contribution gates and documentation, not only intent.","links":["Source: internal consolidation notes (“DX via adapters creates a second ecosystem surface”) + `.internal/views/RELEASES.md` (no adapters decision) + `.ato/contracts/PLATFORM_CONTRACT.md` (§13)."]},"completed_at":"2025-12-26T03:32:42.541Z","frozen":{"core_hash":"691806114d49b6b2a017457f1212346ac452b2c56dbec9a32393053ac50a0622"},"spec":{"problem":"“DX via adapters” is an explicit rewrite trap; preventing a second ecosystem surface requires concrete contribution gates and documentation, not only intent.","outcome":"A written policy exists that defines “adapter” vs “recipe” and where (if anywhere) edge adapters are allowed.","acceptance_criteria":["A written policy exists that defines “adapter” vs “recipe” and where (if anywhere) edge adapters are allowed.","Contributor guidance and (optional) validation prevent adding framework wrapper packages as core deliverables.","DX improvements are tracked as primitives/patterns/docs/tests work items instead of wrapper stacks."],"inputs":["“DX via adapters” is an explicit rewrite trap; preventing a second ecosystem surface requires concrete contribution gates and documentation, not only intent."],"deliverables":["A written policy exists that defines “adapter” vs “recipe” and where (if anywhere) edge adapters are allowed."],"scope":["AGENTS.md"],"risks":["Ecosystem-split risk: adapter surfaces drift faster than core primitives and create version-coupled wrapper pyramids."],"contract_refs":[],"runbook":[]}}
{"id":"BL-0004","title":"Publish Baseline support matrix and “Baseline gating” evidence surfaces","type":"doc","status":"done","priority":"P2","tags":["contract","docs","tooling","ui-shell"],"created_at":"2025-01-01T00:00:09.000Z","updated_at":"2025-12-27T20:50:19.586Z","target":{"selector":"range","value":"0.1.x"},"deps":[],"evidence":["Contract: `.ato/contracts/PLATFORM_CONTRACT.md` (§1.3, §11.3, §12)."],"owner":"codex","notes":"`PLATFORM_CONTRACT.md` requires (a) feature classification (Widely/Newly/Not Baseline) and (b) a machine-readable support matrix; `ui-shell` is expected to visu","details":{"rationale":"`PLATFORM_CONTRACT.md` requires (a) feature classification (Widely/Newly/Not Baseline) and (b) a machine-readable support matrix; `ui-shell` is expected to visualize Baseline gating (§1.3, §11.3).","links":["Contract: `.ato/contracts/PLATFORM_CONTRACT.md` (§1.3, §11.3, §12)."],"effort":"L"},"completed_at":"2025-12-26T03:42:15.407Z","frozen":{"core_hash":"80b5925c6eae5959025120f85548cb72d29326271e8592fb684520f210e76bed"},"spec":{"problem":"`PLATFORM_CONTRACT.md` requires (a) feature classification (Widely/Newly/Not Baseline) and (b) a machine-readable support matrix; `ui-shell` is expected to visualize Baseline gating (§1.3, §11.3).","outcome":"A machine-readable “support matrix” exists and is regenerated deterministically.","acceptance_criteria":["A machine-readable “support matrix” exists and is regenerated deterministically.","`ui-shell` (or docs workbench) can surface Baseline classifications used by the project."],"inputs":["`PLATFORM_CONTRACT.md` requires (a) feature classification (Widely/Newly/Not Baseline) and (b) a machine-readable support matrix; `ui-shell` is expected to visualize Baseline gating (§1.3, §11.3)."],"deliverables":["A machine-readable “support matrix” exists and is regenerated deterministically."],"scope":["packages/ui-shell/**","tools/**","packages/docs/**"],"risks":["Coupling risk: if tied to build artifacts only, it can become order-dependent (see BL-0006)."],"contract_refs":[{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"§1.3"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"§11.3"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"§12"}],"runbook":[]}}
{"id":"BL-0007","title":"Publish and enforce the Focus + Roving Focus contract across primitives and shell","type":"doc","status":"done","priority":"P2","tags":["accessibility","contract","docs","horizon-now","ui-primitives","ui-shell"],"created_at":"2025-01-01T00:00:10.000Z","updated_at":"2025-12-27T20:50:19.586Z","target":{"selector":"range","value":"0.1.x"},"deps":["BL-0011"],"evidence":["Demo: consistent focus rings/tab order across mixed primitives."],"owner":"codex","notes":"`PLATFORM_CONTRACT.md` requires APG-aligned keyboard behavior and testable accessibility gates (§8, §12, §15); lack of a single focus contract causes duplicated","details":{"rationale":"`PLATFORM_CONTRACT.md` requires APG-aligned keyboard behavior and testable accessibility gates (§8, §12, §15); lack of a single focus contract causes duplicated logic and inconsistent behavior.","links":["Demo: consistent focus rings/tab order across mixed primitives."],"effort":"L"},"completed_at":"2025-12-27T02:59:08.285Z","frozen":{"core_hash":"a40f2984059866f84e75bb5aadea86db451807c368fbc7471f9b9972ff94b00c"},"spec":{"problem":"`PLATFORM_CONTRACT.md` requires APG-aligned keyboard behavior and testable accessibility gates (§8, §12, §15); lack of a single focus contract causes duplicated logic and inconsistent behavior.","outcome":"A single documented focus delegation + roving focus contract exists.","acceptance_criteria":["A single documented focus delegation + roving focus contract exists.","At least 3 components conform and are covered by interaction tests + axe=0 stories."],"inputs":["`PLATFORM_CONTRACT.md` requires APG-aligned keyboard behavior and testable accessibility gates (§8, §12, §15); lack of a single focus contract causes duplicated logic and inconsistent behavior."],"deliverables":["A single documented focus delegation + roving focus contract exists."],"scope":["packages/ui-primitives/**","packages/ui-shell/**","packages/docs/**"],"risks":["Rewrite risk: public naming/props/events must stabilize before other widgets depend on them."],"contract_refs":[{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"§8"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"§12"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"§15"}],"runbook":[]}}
{"id":"BL-0008","title":"Standardize overlay close reasons, focus origin/return, and initial focus (contract + tests)","type":"doc","status":"done","priority":"P2","tags":["accessibility","contract","docs","horizon-now","ui-primitives","ui-shell"],"created_at":"2025-01-01T00:00:11.000Z","updated_at":"2025-12-27T20:50:19.586Z","target":{"selector":"range","value":"0.1.x"},"deps":["BL-0007"],"evidence":["Demo: shared close-reason handler works across dialog/popover."],"owner":"codex","notes":"`PLATFORM_CONTRACT.md` requires keyboard-dismissable overlays and coherent top-layer behavior (§7, §8, §13G); unified overlay contracts prevent app-specific rei","details":{"rationale":"`PLATFORM_CONTRACT.md` requires keyboard-dismissable overlays and coherent top-layer behavior (§7, §8, §13G); unified overlay contracts prevent app-specific reimplementation.","links":["Demo: shared close-reason handler works across dialog/popover."],"effort":"L"},"completed_at":"2025-12-27T02:56:51.656Z","frozen":{"core_hash":"edc4b9693b410ed810a9ff2c874384fd48f2ccb8b671d98746cb931ca93e1bf3"},"spec":{"problem":"`PLATFORM_CONTRACT.md` requires keyboard-dismissable overlays and coherent top-layer behavior (§7, §8, §13G); unified overlay contracts prevent app-specific reimplementation.","outcome":"Overlay contract is documented (close reasons, focus return/origin, initial focus, outside-dismiss policy).","acceptance_criteria":["Overlay contract is documented (close reasons, focus return/origin, initial focus, outside-dismiss policy).","Interaction tests cover Escape/outside-dismiss/focus return across at least one primitive and one shell structure."],"inputs":["`PLATFORM_CONTRACT.md` requires keyboard-dismissable overlays and coherent top-layer behavior (§7, §8, §13G); unified overlay contracts prevent app-specific reimplementation."],"deliverables":["Overlay contract is documented (close reasons, focus return/origin, initial focus, outside-dismiss policy)."],"scope":["packages/ui-primitives/**","packages/ui-shell/**","packages/docs/**"],"risks":["Compatibility risk: outside-dismiss semantics vary by widget; must match APG and native behavior expectations."],"contract_refs":[{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"§7"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"§8"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"§13"}],"runbook":[]}}
{"id":"BL-0009","title":"Eliminate Lit “change-in-update” warnings in shell components","type":"debt","status":"done","priority":"P2","tags":["debt","quality","ui-shell","macro-scope"],"created_at":"2025-01-01T00:00:12.000Z","updated_at":"2025-12-27T20:50:19.586Z","target":{"selector":"exact","value":"0.1.2"},"deps":[],"evidence":["Source: internal consolidation notes (“Lit update scheduling warnings…”)."],"owner":"codex","notes":"Noisy update scheduling warnings indicate unnecessary re-renders and can mask real issues; they also erode trust in test output.","details":{"rationale":"Noisy update scheduling warnings indicate unnecessary re-renders and can mask real issues; they also erode trust in test output.","links":["Source: internal consolidation notes (“Lit update scheduling warnings…”)."],"contract_review":["§3 Styling & theming","§8 Accessibility","§11 ui-shell"],"contract_gaps":["none"],"contract_followups":["none"],"effort":"M"},"completed_at":"2025-12-26T07:11:40.464Z","frozen":{"core_hash":"380d5fd135cac3caec7ca358efdd86fb18f81ad70394c888ccd8364121c470ea"},"spec":{"problem":"Noisy update scheduling warnings indicate unnecessary re-renders and can mask real issues; they also erode trust in test output.","outcome":"Shell/browser tests run without Lit “scheduled an update after an update completed” warnings.","acceptance_criteria":["Shell/browser tests run without Lit “scheduled an update after an update completed” warnings.","Slot-driven derived state updates (footer/meta) are deferred outside Lit update cycles.","Refactor does not change component public contracts.","Verification: npm -w packages/ui-shell run test."],"inputs":["Noisy update scheduling warnings indicate unnecessary re-renders and can mask real issues; they also erode trust in test output."],"deliverables":["Shell/browser tests run without Lit “scheduled an update after an update completed” warnings."],"scope":["packages/ui-shell/src/structures/uik-shell-activity-bar.ts","packages/ui-shell/src/structures/uik-shell-sidebar.ts","packages/ui-shell/src/structures/uik-shell-secondary-sidebar.ts","packages/ui-shell/src/structures/uik-shell-status-bar.ts","packages/ui-shell/tests/**"],"risks":["Regression risk: derived state refactors can change render timing and focus behavior."],"contract_refs":[{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"§3"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"§8"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"§11"}],"runbook":[]}}
{"id":"BL-0011","title":"Create an APG test harness folder + reusable keyboard assertions","type":"tooling","status":"done","priority":"P2","tags":["accessibility","horizon-now","tooling","ui-primitives","ui-shell"],"created_at":"2025-01-01T00:00:13.000Z","updated_at":"2025-12-26T03:45:38.758Z","target":{"selector":"range","value":"0.1.x"},"deps":[],"evidence":["Demo: APG conformance suite is green in CI."],"owner":"codex","notes":"`PLATFORM_CONTRACT.md` requires APG keyboard behavior verification and automated accessibility checks (§8.2, §12, §15).","details":{"rationale":"`PLATFORM_CONTRACT.md` requires APG keyboard behavior verification and automated accessibility checks (§8.2, §12, §15).","links":["Demo: APG conformance suite is green in CI."]},"completed_at":"2025-12-26T03:45:38.758Z","frozen":{"core_hash":"08fc3149e37ae115882d365b37ba188a0e5c1370717154d70b542c2bfbd1dac1"},"spec":{"problem":"`PLATFORM_CONTRACT.md` requires APG keyboard behavior verification and automated accessibility checks (§8.2, §12, §15).","outcome":"A dedicated APG test harness exists (e.g. `tests/apg/**`) with reusable helpers.","acceptance_criteria":["A dedicated APG test harness exists (e.g. `tests/apg/**`) with reusable helpers.","At least one conformance suite is running in CI and is easy to extend."],"inputs":["`PLATFORM_CONTRACT.md` requires APG keyboard behavior verification and automated accessibility checks (§8.2, §12, §15)."],"deliverables":["A dedicated APG test harness exists (e.g. `tests/apg/**`) with reusable helpers."],"scope":["packages/ui-primitives/tests/**","packages/ui-shell/tests/**"],"risks":["Maintainability risk: helpers must stay small and aligned with APG semantics (avoid bespoke ad-hoc assertions)."],"contract_refs":[],"runbook":[]}}
{"id":"BL-0012","title":"Ship `uik-listbox` + `uik-option` (APG-grade)","type":"feature","status":"done","priority":"P2","tags":["accessibility","feature","horizon-now","ui-primitives","ui-tokens"],"created_at":"2025-01-01T00:00:14.000Z","updated_at":"2025-12-27T02:57:25.274Z","target":{"selector":"range","value":"0.1.x"},"deps":["BL-0007","BL-0010","BL-0011"],"evidence":["Demo: command list built on listbox."],"owner":"codex","notes":"Multiple downstream widgets/patterns (combobox/menu/palette) require a stable selection foundation to avoid duplicated, inconsistent implementations.","details":{"rationale":"Multiple downstream widgets/patterns (combobox/menu/palette) require a stable selection foundation to avoid duplicated, inconsistent implementations.","links":["Demo: command list built on listbox."]},"completed_at":"2025-12-27T02:57:25.274Z","frozen":{"core_hash":"24110406ee4328cb1e4d534b54f275486a0b8b85b01b72ef1d3570a809f3f55e"},"spec":{"problem":"Multiple downstream widgets/patterns (combobox/menu/palette) require a stable selection foundation to avoid duplicated, inconsistent implementations.","outcome":"APG keyboard tests exist and pass; axe=0 stories; forced-colors coverage exists.","acceptance_criteria":["APG keyboard tests exist and pass; axe=0 stories; forced-colors coverage exists.","Explicit props/events/slots/parts/custom properties are documented and appear in CEM/registries."],"inputs":["Multiple downstream widgets/patterns (combobox/menu/palette) require a stable selection foundation to avoid duplicated, inconsistent implementations."],"deliverables":["APG keyboard tests exist and pass; axe=0 stories; forced-colors coverage exists."],"scope":["packages/ui-primitives/**","packages/ui-tokens/tokens/components/**"],"risks":["Public-contract risk: listbox selection model shapes many future APIs; changing it later is a rewrite trap."],"contract_refs":[],"runbook":[]}}
{"id":"BL-0013","title":"Ship `uik-combobox` (APG-grade, built on listbox)","type":"feature","status":"done","priority":"P2","tags":["accessibility","feature","horizon-now","ui-primitives"],"created_at":"2025-01-01T00:00:15.000Z","updated_at":"2025-12-27T02:58:33.180Z","target":{"selector":"range","value":"0.1.x"},"deps":["BL-0008","BL-0011","BL-0012"],"evidence":["Demo: tag picker / quick switcher."],"owner":"codex","notes":"Search/select workflows are a core “desktop app” primitive; without it, apps fall back to ad-hoc solutions or external libs.","details":{"rationale":"Search/select workflows are a core “desktop app” primitive; without it, apps fall back to ad-hoc solutions or external libs.","links":["Demo: tag picker / quick switcher."]},"completed_at":"2025-12-27T02:58:33.180Z","frozen":{"core_hash":"e9838804ae29f1e790b263b2f2ed4d12be9a7e02418f33d43361b034fb9fb8e0"},"spec":{"problem":"Search/select workflows are a core “desktop app” primitive; without it, apps fall back to ad-hoc solutions or external libs.","outcome":"APG keyboard path tests (including `aria-activedescendant` correctness where applicable).","acceptance_criteria":["APG keyboard path tests (including `aria-activedescendant` correctness where applicable).","axe=0 stories; forced-colors coverage."],"inputs":["Search/select workflows are a core “desktop app” primitive; without it, apps fall back to ad-hoc solutions or external libs."],"deliverables":["APG keyboard path tests (including `aria-activedescendant` correctness where applicable)."],"scope":["packages/ui-primitives/**"],"risks":["Interaction risk: async options and input behaviors can cause subtle focus bugs; tests must cover critical paths."],"contract_refs":[],"runbook":[]}}
{"id":"BL-0014","title":"Ship `uik-tabs` (APG-grade)","type":"feature","status":"done","priority":"P2","tags":["accessibility","feature","horizon-now","ui-primitives"],"created_at":"2025-01-01T00:00:16.000Z","updated_at":"2025-12-27T02:57:58.791Z","target":{"selector":"range","value":"0.1.x"},"deps":["BL-0007","BL-0011"],"evidence":["Demo: multi-panel editor-like UI in docs."],"owner":"codex","notes":"Tabs are a baseline UI building block for desktop/web flows; shipping an APG-grade implementation prevents repeated ad-hoc patterns.","details":{"rationale":"Tabs are a baseline UI building block for desktop/web flows; shipping an APG-grade implementation prevents repeated ad-hoc patterns.","links":["Demo: multi-panel editor-like UI in docs."]},"completed_at":"2025-12-27T02:57:58.791Z","frozen":{"core_hash":"bd5e8c3dce53c41ef0dc557e6e3a5c290f49917661619b34d085b0e02d415a6e"},"spec":{"problem":"Tabs are a baseline UI building block for desktop/web flows; shipping an APG-grade implementation prevents repeated ad-hoc patterns.","outcome":"Keyboard tests + axe=0 + forced-colors story.","acceptance_criteria":["Keyboard tests + axe=0 + forced-colors story.","Explicit contract documented and present in registries/CEM."],"inputs":["Tabs are a baseline UI building block for desktop/web flows; shipping an APG-grade implementation prevents repeated ad-hoc patterns."],"deliverables":["Keyboard tests + axe=0 + forced-colors story."],"scope":["packages/ui-primitives/**"],"risks":["Contract risk: slots/parts naming must stabilize before docs patterns build on it."],"contract_refs":[],"runbook":[]}}
{"id":"BL-0015","title":"Ship `uik-menubar` + `uik-menu` (desktop shell patterns v1)","type":"feature","status":"done","priority":"P2","tags":["accessibility","feature","horizon-next","ui-primitives","ui-shell"],"created_at":"2025-01-01T00:00:17.000Z","updated_at":"2025-12-31T02:15:08.631Z","target":{"selector":"range","value":"0.1.x"},"deps":["BL-0008","BL-0011","BL-0012"],"evidence":["Demo: File/Edit menus in a shell layout."],"owner":"codex","notes":"Desktop apps need keyboard-navigable menus; without a first-class pattern, consumers will add external libraries or build inconsistent implementations. Completed: shipped uik-menu/uik-menu-item/uik-menubar primitives with roving focus, focus return, and menu events; added tokens, stories, tests, and docs lab. Evidence: packages/ui-primitives/src/composed/collection/uik-menu/element.ts; packages/ui-primitives/src/composed/collection/uik-menubar/element.ts; packages/ui-tokens/tokens/components/menu.json; packages/ui-tokens/tokens/components/menubar.json; packages/ui-primitives/stories/uik-menu.stories.ts; packages/ui-primitives/stories/uik-menubar.stories.ts; packages/ui-primitives/tests/uik-menu.browser.test.ts; packages/ui-primitives/tests/uik-menubar.browser.test.ts; packages/docs/content/lab/menus.md. Gate: cmd: ato gate run --mode full (artifacts in .ato/runs/artifacts/global/gate/).","details":{"rationale":"Desktop apps need keyboard-navigable menus; without a first-class pattern, consumers will add external libraries or build inconsistent implementations.","links":["Demo: File/Edit menus in a shell layout."],"contract_review":["Reviewed PLATFORM_CONTRACT.md §6.3 (anchored menus/overlays), §7.1 (top-layer overlays), §8.2 (APG alignment), §13.1.E/G (a11y and overlay prohibitions), and §3.1 (token-driven styling)."]},"spec":{"problem":"Desktop apps need keyboard-navigable menus; without a first-class pattern, consumers will add external libraries or build inconsistent implementations.","outcome":"Arrow navigation + Escape + focus return tests; docs recipe in `packages/docs`.","acceptance_criteria":["Arrow navigation + Escape + focus return tests; docs recipe in `packages/docs`.","Deterministic theming via tokens; no literal design values in stories."],"inputs":["Desktop apps need keyboard-navigable menus; without a first-class pattern, consumers will add external libraries or build inconsistent implementations. Evidence: packages/ui-primitives/src/composed/collection/uik-menu/element.ts; packages/ui-primitives/src/composed/collection/uik-menubar/element.ts; packages/docs/content/lab/menus.md; packages/ui-primitives/tests/uik-menu.browser.test.ts; packages/ui-primitives/tests/uik-menubar.browser.test.ts."],"deliverables":["Arrow navigation + Escape + focus return tests; docs recipe in `packages/docs`."],"scope":["packages/ui-primitives/**","packages/ui-shell/**"],"risks":["Complexity risk: menu/submenu interaction is easy to get wrong; APG alignment is mandatory."],"contract_refs":[{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"6.3"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"7"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"8"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"13.1.G"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"13.1.E"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"3.1"}],"runbook":[]},"completed_at":"2025-12-31T02:15:08.631Z","frozen":{"core_hash":"88d410a86c313e419ad45513c49c4166adc2176a2ba7a9c00a705dd10514ecd6"}}
{"id":"BL-0016","title":"Ship a `uik-command-palette` pattern","type":"feature","status":"done","priority":"P2","tags":["accessibility","docs","feature","horizon-next","ui-primitives","ui-shell"],"created_at":"2025-01-01T00:00:18.000Z","updated_at":"2025-12-31T03:39:09.277Z","target":{"selector":"range","value":"0.1.x"},"deps":["BL-0008","BL-0011","BL-0013"],"evidence":["Demo: palette drives shell router navigation.","Evidence: packages/docs/src/app.ts; packages/docs/content/lab/command-palette.md; packages/docs/tests/docs-command-palette.browser.test.ts; packages/docs/src/generated/docs-content.json; packages/docs/src/generated/docs-search-index.json; packages/docs/src/styles.css."],"owner":"codex","notes":"Command palette is a high-leverage “desktop power user” surface; shipping it as a pattern avoids app-specific reinvention. Completed: command palette lab page + wiring with router navigation, keyboard shortcut, and interaction/a11y test coverage. A11y test disables aria-required-children due to axe shadow DOM false positive. Gate: ato gate run --mode full. Evidence: packages/docs/src/app.ts; packages/docs/content/lab/command-palette.md; packages/docs/tests/docs-command-palette.browser.test.ts; packages/docs/src/generated/docs-content.json; packages/docs/src/generated/docs-search-index.json; packages/docs/src/styles.css.","details":{"rationale":"Command palette is a high-leverage “desktop power user” surface; shipping it as a pattern avoids app-specific reinvention.","links":["Demo: palette drives shell router navigation."],"contract_review":["Reviewed PLATFORM_CONTRACT.md §6.3, §7, §8, §11.2, §11.4, §13.1.E for overlay behavior, shell focus, and a11y alignment."],"contract_gaps":["none"],"contract_followups":["none"]},"spec":{"problem":"Command palette is a high-leverage “desktop power user” surface; shipping it as a pattern avoids app-specific reinvention.","outcome":"Interaction test covers open/search/select; focus return verified; axe=0.","acceptance_criteria":["Interaction test covers open/search/select; focus return verified; axe=0.","Docs recipe shows canonical keyboard shortcuts guidance."],"inputs":["Command palette is a high-leverage “desktop power user” surface; shipping it as a pattern avoids app-specific reinvention. Evidence: packages/docs/src/app.ts; packages/docs/content/lab/command-palette.md; packages/docs/tests/docs-command-palette.browser.test.ts; packages/docs/src/generated/docs-content.json; packages/docs/src/generated/docs-search-index.json; packages/docs/src/styles.css."],"deliverables":["Interaction test covers open/search/select; focus return verified; axe=0."],"scope":["packages/ui-shell/**","packages/ui-primitives/**","packages/docs/**"],"risks":["Coupling risk: must remain portable and not hardcode app routing/state."],"contract_refs":[{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"6.3"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"7"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"8"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"11.2"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"11.4"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"13.1.E"}],"runbook":[]},"completed_at":"2025-12-31T03:39:09.277Z","frozen":{"core_hash":"6d6153e6cd60f9e736f61629c825417a56f9c7108e89e93ce8dc185c99026a0b"}}
{"id":"BL-0017","title":"Ship `uik-resizable-panels` / `uik-shell-split-view` with keyboard resizing","type":"feature","status":"done","priority":"P2","tags":["accessibility","feature","horizon-next","macro-scope","ui-primitives","ui-shell","ui-tokens"],"created_at":"2025-01-01T00:00:19.000Z","updated_at":"2025-12-27T20:50:19.586Z","target":{"selector":"exact","value":"0.1.2"},"deps":["BL-0011"],"evidence":["Demo: sidebar/editor split like a desktop IDE."],"owner":"codex","notes":"Editor-like layouts require resizable panes; platform-grade accessibility requires keyboard resizing support. Contract decisions: uik-resizable-panels (ui-primitives, Shadow DOM) exposes slots start/end, parts base/panel-start/panel-end/handle/handle-grip, attr orientation (horizontal|vertical), props startSize/minStartSize/minEndSize/step/stepLarge (px). Handle uses role=separator with aria-orientation, aria-valuemin/max/now (percent), forwards aria-label/aria-labelledby from host, and supports Arrow keys (orientation-aware), Shift+Arrow for stepLarge, Home/End to min/max. Pointer uses capture and emits resizable-panels-resize {startSize,endSize,ratio,source,phase} on start/drag/end for persistence. uik-shell-split-view composes resizable-panels in Light DOM, re-emits split-view-resize, and defaults startSize from component tokens. Required component tokens: --uik-component-resizable-panels-panel-min-size, --uik-component-resizable-panels-panel-start-size, --uik-component-resizable-panels-handle-hit, --uik-component-resizable-panels-handle-size, --uik-component-resizable-panels-handle-bg, --uik-component-resizable-panels-handle-hover-bg, --uik-component-resizable-panels-handle-active-bg, --uik-component-resizable-panels-handle-radius, --uik-component-resizable-panels-step, --uik-component-resizable-panels-step-lg.","details":{"rationale":"Editor-like layouts require resizable panes; platform-grade accessibility requires keyboard resizing support.","links":["Demo: sidebar/editor split like a desktop IDE."],"contract_review":["§2.1","§3.1","§3.2","§4","§8","§11","§12","§13"],"contract_gaps":["none"],"contract_followups":["none"],"effort":"L"},"completed_at":"2025-12-26T16:45:45.008Z","frozen":{"core_hash":"43b3869e9b96a568ea43e188d64e8d1117b3b9d0281fcf6091fe344b4f33c5d2"},"spec":{"problem":"Editor-like layouts require resizable panes; platform-grade accessibility requires keyboard resizing support.","outcome":"Pointer + keyboard resize tests; story demonstrates composition and app-owned persistence hooks.","acceptance_criteria":["Pointer + keyboard resize tests; story demonstrates composition and app-owned persistence hooks.","Reduced motion and forced-colors behavior is documented and verified.","Contracts/tokens validated after build: npm run contracts:validate:build."],"inputs":["Editor-like layouts require resizable panes; platform-grade accessibility requires keyboard resizing support."],"deliverables":["Pointer + keyboard resize tests; story demonstrates composition and app-owned persistence hooks."],"scope":["packages/ui-primitives/src/atomic/layout/uik-resizable-panels/**","packages/ui-primitives/stories/** + packages/ui-primitives/tests/**","packages/ui-shell/src/structures/uik-shell-split-view.ts + packages/ui-shell/stories/** + packages/ui-shell/tests/**","packages/ui-tokens/tokens/components/resizable-panels.json + dist outputs"],"risks":["Interaction risk: pointer capture and keyboard resizing are easy to regress; tests must be strict."],"contract_refs":[{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"§2.1"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"§3.1"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"§3.2"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"§4"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"§8"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"§11"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"§12"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"§13"}],"runbook":[]}}
{"id":"BL-0018","title":"Provide a token-driven JSON viewer/editor primitive (or explicit “editor backend” boundary)","type":"debt","status":"queued","priority":"P2","tags":["debt","feature","horizon-next","ui-primitives","ui-shell"],"created_at":"2025-01-01T00:00:20.000Z","updated_at":"2026-01-02T17:30:18.130Z","target":{"selector":"range","value":"0.1.x"},"deps":["BL-0007","BL-0011"],"evidence":[],"owner":"codex","notes":"Copy/paste-heavy workflows need readable JSON + validation UX; without a primitive/pattern, apps rely on raw textareas or heavy editors.\nContractRefsOriginal: [{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"2.1\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"3.1\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"4.1\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"8\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"13.1.D\"}]","details":{"rationale":"Copy/paste-heavy workflows need readable JSON + validation UX; without a primitive/pattern, apps rely on raw textareas or heavy editors."},"spec":{"problem":"Copy/paste-heavy workflows need readable JSON + validation UX; without a primitive/pattern, apps rely on raw textareas or heavy editors.","outcome":"Story demonstrates validate→format→apply; keyboard accessible; axe=0.","acceptance_criteria":["Story demonstrates validate→format→apply; keyboard accessible; axe=0.","If a backend boundary exists, it is explicitly documented and does not introduce adapter ecosystems."],"inputs":["Copy/paste-heavy workflows need readable JSON + validation UX; without a primitive/pattern, apps rely on raw textareas or heavy editors."],"deliverables":["Story demonstrates validate→format→apply; keyboard accessible; axe=0."],"scope":["packages/ui-primitives/**","packages/ui-shell/**"],"risks":["Rewrite-trap risk: “backend pluggability” can turn into adapter surface area; keep boundary minimal and standards-first.","Notes / links:","Demo: Cognitive System Inbox upgraded from raw textarea."],"contract_refs":["6.4"],"runbook":[]}}
{"id":"BL-0019","title":"Provide a token-driven diff preview primitive/pattern for apply previews","type":"debt","status":"queued","priority":"P2","tags":["debt","feature","horizon-next","ui-primitives","ui-shell"],"created_at":"2025-01-01T00:00:21.000Z","updated_at":"2026-01-02T17:30:18.130Z","target":{"selector":"range","value":"0.1.x"},"deps":["BL-0011","BL-0018"],"evidence":["Demo: apply preview that is scan-friendly and accessible."],"owner":"codex","notes":"Validate→preview→apply flows are safer with diff previews than raw patches; without a shared pattern, each app invents its own UX and accessibility.\nContractRefsOriginal: [{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"3.1\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"4.1\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"8\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"13.1.D\"}]","details":{"rationale":"Validate→preview→apply flows are safer with diff previews than raw patches; without a shared pattern, each app invents its own UX and accessibility.","links":["Demo: apply preview that is scan-friendly and accessible."]},"spec":{"problem":"Validate→preview→apply flows are safer with diff previews than raw patches; without a shared pattern, each app invents its own UX and accessibility.","outcome":"Story demonstrates change list/diff semantics; interaction test covers navigation; axe=0.","acceptance_criteria":["Story demonstrates change list/diff semantics; interaction test covers navigation; axe=0.","Works without requiring text-diff libraries as a hard dependency."],"inputs":["Validate→preview→apply flows are safer with diff previews than raw patches; without a shared pattern, each app invents its own UX and accessibility."],"deliverables":["Story demonstrates change list/diff semantics; interaction test covers navigation; axe=0."],"scope":["packages/ui-primitives/**","packages/ui-shell/**"],"risks":["Coupling risk: do not assume Monaco or vendor-specific editors for correctness."],"contract_refs":["6.4"],"runbook":[]}}
{"id":"BL-0020","title":"Add workflow-centric docs “Patterns” section (runnable, tested recipes)","type":"doc","status":"queued","priority":"P2","tags":["docs","ui-primitives","ui-shell"],"created_at":"2025-01-01T00:00:22.000Z","updated_at":"2026-01-02T17:30:18.130Z","target":{"selector":"range","value":"0.1.x"},"deps":["BL-0008","BL-0018","BL-0019"],"evidence":[],"owner":"codex","notes":"Mature ecosystems teach patterns, not only components; patterns docs must be runnable and tied to tests to prevent drift (`PLATFORM_CONTRACT.md` §10.2, §12).\nContractRefsOriginal: [{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"10.2\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"11.4\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"12\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"13.1.B\"}]","details":{"rationale":"Mature ecosystems teach patterns, not only components; patterns docs must be runnable and tied to tests to prevent drift (`PLATFORM_CONTRACT.md` §10.2, §12).","links":[]},"spec":{"problem":"Mature ecosystems teach patterns, not only components; patterns docs must be runnable and tied to tests to prevent drift (`PLATFORM_CONTRACT.md` §10.2, §12).","outcome":"New docs pages exist for overlays, navigation, desktop shell, copy/paste consoles, preview/apply flows.","acceptance_criteria":["New docs pages exist for overlays, navigation, desktop shell, copy/paste consoles, preview/apply flows.","Each recipe links to runnable stories and has at least one interaction test; axe=0."],"inputs":["Mature ecosystems teach patterns, not only components; patterns docs must be runnable and tied to tests to prevent drift (`PLATFORM_CONTRACT.md` §10.2, §12)."],"deliverables":["New docs pages exist for overlays, navigation, desktop shell, copy/paste consoles, preview/apply flows."],"scope":["packages/docs/**","packages/ui-shell/**","packages/ui-primitives/**"],"risks":["Drift risk: recipes must be generated/validated against contracts where possible."],"contract_refs":["6.4"],"runbook":[]}}
{"id":"BL-0021","title":"Ship docs command-palette search MVP","type":"doc","status":"done","priority":"P2","tags":["docs","horizon-next","ui-shell"],"created_at":"2025-01-01T00:00:23.000Z","updated_at":"2025-12-31T05:09:33.591Z","target":{"selector":"range","value":"0.1.x"},"deps":["BL-0008","BL-0012","BL-0041"],"evidence":["packages/ui-primitives/src/composed/overlay/uik-command-palette/element.ts","packages/ui-primitives/src/composed/overlay/uik-command-palette/styles.ts","packages/ui-primitives/tests/uik-command-palette.browser.test.ts","packages/ui-shell/src/internal/command-center.ts","packages/docs/src/app.ts","packages/docs/tests/docs-command-palette.browser.test.ts","packages/ui-tokens/tokens/components/command-palette.json","cmd:ato gate run --mode full"],"owner":"codex","notes":"Deep path complete. Command palette extracted into ui-primitives with new tokens, parts/slots, and keyboard + axe coverage; ui-shell command center added for hotkey + registry wiring; docs now consume shell/primitive implementation and updated lab copy. Contract review: Shadow DOM open, tokens-only styling hooks, WCAG/APG combobox/listbox semantics, reduced-motion + forced-colors support. Evidence: packages/ui-primitives/src/composed/overlay/uik-command-palette/element.ts; packages/ui-primitives/tests/uik-command-palette.browser.test.ts; packages/ui-shell/src/internal/command-center.ts; packages/docs/src/app.ts; cmd:ato gate run --mode full.","details":{"rationale":"Docs must be a usable platform manual; a keyboard-first, index-backed search experience is a baseline usability expectation.","links":[]},"spec":{"problem":"Docs must be a usable platform manual; a keyboard-first, index-backed search experience is a baseline usability expectation.","outcome":"Ctrl/Cmd+K search with index + highlighting exists.","acceptance_criteria":["Ctrl/Cmd+K search with index + highlighting exists.","Results are keyboard navigable and have clear empty/error states; axe=0 on a representative search flow."],"inputs":["Docs must be a usable platform manual; a keyboard-first, index-backed search experience is a baseline usability expectation. (evidence: packages/docs/src/app.ts)"],"deliverables":["Ctrl/Cmd+K search with index + highlighting exists."],"scope":["packages/docs/**","packages/ui-shell/**"],"risks":["Complexity risk: avoid introducing runtime router/framework coupling (`PLATFORM_CONTRACT.md` §11.4)."],"contract_refs":[{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"11.2"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"11.4"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"8"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"12"}],"runbook":[]},"completed_at":"2025-12-31T05:09:33.591Z","frozen":{"core_hash":"e66f014d13f6189d98c670efe68f7542de13c2356b9c67b5328b0785eb1721ad"}}
{"id":"BL-0040","title":"Choose a syntax highlighting strategy for docs code blocks","type":"doc","status":"done","priority":"P2","tags":["docs","uncertainty","macro-scope"],"created_at":"2025-01-01T00:00:25.000Z","updated_at":"2025-12-27T20:50:19.586Z","target":{"selector":"exact","value":"0.1.2"},"deps":[],"evidence":[],"owner":"codex","notes":"Syntax highlighting affects payload size, determinism, and accessibility/forced-colors behavior; Docs competitive baseline requires competitive code blocks with","details":{"rationale":"Syntax highlighting affects payload size, determinism, and accessibility/forced-colors behavior; Docs competitive baseline requires competitive code blocks with copy UX.","decision":["Use build-time syntax highlighting in the docs generator (no runtime highlighter).","Highlight via Prism token classes with a minimal grammar set (ts/js/json/css/html/bash) and fall back to plain code when unsupported.","Style tokens via CSS variables (no literal color values) to align with the token-first contract."],"tradeoffs":["Adds a docs build step and dependency, but avoids runtime payload and client-side parsing.","Grammar coverage is intentionally limited for determinism and bundle size."],"invariants":["No inline styles or literal colors in generated HTML; use token-backed CSS classes only.","Output must be deterministic across builds and platforms."],"contract_review":["§3 Styling & theming","§8 Accessibility","§10 Introspection & documentation"],"contract_gaps":["none"],"contract_followups":["none"],"effort":"M"},"completed_at":"2025-12-26T15:42:41.390Z","frozen":{"core_hash":"a7ffd4a6f9bba2abb555ce16bc7577986fc3f7a0d83a88fd98ae72a7b1f18ae1"},"spec":{"problem":"Syntax highlighting affects payload size, determinism, and accessibility/forced-colors behavior; Docs competitive baseline requires competitive code blocks with copy UX.","outcome":"Docs generator emits Prism token spans for supported languages (ts/js/json/css/html/bash).","acceptance_criteria":["Docs generator emits Prism token spans for supported languages (ts/js/json/css/html/bash).","Syntax highlighting uses token-based CSS variables with no literal color values.","Unsupported languages fall back to plain escaped code without runtime highlighting.","Verification: node .internal/tools/quality-gate.mjs --target 0.1.2."],"inputs":["Syntax highlighting affects payload size, determinism, and accessibility/forced-colors behavior; Docs competitive baseline requires competitive code blocks with copy UX."],"deliverables":["Docs generator emits Prism token spans for supported languages (ts/js/json/css/html/bash)."],"scope":["packages/docs/tools/generate-docs-content.mjs (build-time Prism highlighting)","packages/docs/src/styles.css (token-based Prism classes + forced-colors handling)","packages/docs/package.json (Prism dependency for generator)"],"risks":["Rewrite risk: switching highlight approaches late can churn rendering and styling."],"contract_refs":[{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"§3"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"§8"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"§10"}],"runbook":[]}}
{"id":"BL-0041","title":"Choose a docs search index strategy (engine + index format)","type":"doc","status":"done","priority":"P2","tags":["docs","uncertainty","macro-scope"],"created_at":"2025-01-01T00:00:26.000Z","updated_at":"2025-12-27T20:50:19.586Z","target":{"selector":"exact","value":"0.1.2"},"deps":[],"evidence":[],"owner":"codex","notes":"Search quality and performance depend on index format and engine choice; Docs competitive baseline requires build-time deterministic index generation and keyboa","details":{"rationale":"Search quality and performance depend on index format and engine choice; Docs competitive baseline requires build-time deterministic index generation and keyboard-first UX.","links":[],"decision":["Use MiniSearch as the in-browser search engine with a prebuilt JSON index generated at build time.","Generate the index from docs-content (pages, sections, headings) with a stable ordering and store it as a deterministic artifact.","Lazy-load the index when search is invoked to avoid inflating initial docs payload."],"tradeoffs":["Search quality is bounded by a compact local index, but stays offline and deterministic.","Index generation adds a build step but avoids runtime crawling/parsing."],"invariants":["Index schema must include page id, section id, title, and body text for highlighting.","No remote service is required for correctness or availability."],"contract_review":["§10 Introspection & documentation","§12 Verification & objective conformance gates"],"contract_gaps":["none"],"contract_followups":["none"],"effort":"M"},"completed_at":"2025-12-26T15:47:44.585Z","frozen":{"core_hash":"1b36b0e270e0915d7b6c73e891d81310c138864ec28ede1c68f71a79fadbf95f"},"spec":{"problem":"Search quality and performance depend on index format and engine choice; Docs competitive baseline requires build-time deterministic index generation and keyboard-first UX.","outcome":"Search index schema includes page id, section id, title, and body text for highlighting.","acceptance_criteria":["Search index schema includes page id, section id, title, and body text for highlighting.","Index output is deterministic and ordered by manifest + section order.","Index generation is build-time (no runtime parsing) with MiniSearch JSON output.","Verification: node .internal/tools/quality-gate.mjs --target 0.1.2."],"inputs":["Search quality and performance depend on index format and engine choice; Docs competitive baseline requires build-time deterministic index generation and keyboard-first UX."],"deliverables":["Search index schema includes page id, section id, title, and body text for highlighting."],"scope":["packages/docs/tools/generate-docs-content.mjs (build-time search index generation)","packages/docs/src/generated/docs-search-index.json (deterministic index artifact)","packages/docs/package.json (MiniSearch dependency)"],"risks":["Performance risk: search index can bloat initial payload if not lazy-loaded."],"contract_refs":[{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"§10"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"§12"}],"runbook":[]}}
{"id":"BL-0022","title":"Improve docs navigation tree UX (keyboard-first, discoverable)","type":"doc","status":"queued","priority":"P2","tags":["docs","ui-primitives","ui-shell"],"created_at":"2025-01-01T00:00:27.000Z","updated_at":"2025-12-31T00:47:30.075Z","target":{"selector":"range","value":"0.1.x"},"deps":["BL-0043"],"evidence":[],"owner":"codex","notes":"Navigation is a primary “dogfood” surface for shell/primitives; UX gaps mask real contract issues.","details":{"rationale":"Navigation is a primary “dogfood” surface for shell/primitives; UX gaps mask real contract issues."},"spec":{"problem":"Navigation is a primary “dogfood” surface for shell/primitives; UX gaps mask real contract issues.","outcome":"Navigation tree UX improvements land (keyboard navigation, focus visibility, selection clarity) and are verified by browser tests.","acceptance_criteria":["Navigation tree UX improvements land (keyboard navigation, focus visibility, selection clarity) and are verified by browser tests."],"inputs":["Navigation is a primary “dogfood” surface for shell/primitives; UX gaps mask real contract issues."],"deliverables":["Navigation tree UX improvements land (keyboard navigation, focus visibility, selection clarity) and are verified by browser tests."],"scope":["packages/docs/**","packages/ui-shell/**","packages/ui-primitives/**"],"risks":["Regression risk: nav changes can break deep linking and focus restoration."],"contract_refs":[{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"11.2"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"8"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"12"}],"runbook":[]}}
{"id":"BL-0042","title":"Decide tree navigation primitive approach (extend `uik-tree-view` vs new primitive)","type":"doc","status":"queued","priority":"P2","tags":["docs","primitives","ui-primitives","uncertainty"],"created_at":"2025-01-01T00:00:28.000Z","updated_at":"2025-12-31T00:47:38.490Z","target":{"selector":"range","value":"0.1.x"},"deps":["BL-0007","BL-0011"],"evidence":[],"owner":"codex","notes":"Docs competitive baseline requires a navigation tree without selection UI; choosing the right primitive contract early prevents a rewrite trap across shell/docs","details":{"rationale":"Docs competitive baseline requires a navigation tree without selection UI; choosing the right primitive contract early prevents a rewrite trap across shell/docs."},"spec":{"problem":"Docs competitive baseline requires a navigation tree without selection UI; choosing the right primitive contract early prevents a rewrite trap across shell/docs.","outcome":"A decision is recorded with a concrete contract:","acceptance_criteria":["A decision is recorded with a concrete contract:"],"inputs":["Docs competitive baseline requires a navigation tree without selection UI; choosing the right primitive contract early prevents a rewrite trap across shell/docs."],"deliverables":["A decision is recorded with a concrete contract:"],"scope":["packages/ui-primitives/**","packages/docs/**"],"risks":["Rewrite risk: tree contract shape will cascade into docs navigation and future desktop patterns."],"contract_refs":[{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"11.2"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"8"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"12"}],"runbook":[]}}
{"id":"BL-0043","title":"Ship a navigation tree primitive (APG treeview navigation semantics)","type":"feature","status":"queued","priority":"P2","tags":["accessibility","feature","ui-primitives","ui-tokens"],"created_at":"2025-01-01T00:00:29.000Z","updated_at":"2025-12-31T00:47:39.183Z","target":{"selector":"range","value":"0.1.x"},"deps":["BL-0042"],"evidence":[],"owner":"codex","notes":"Docs and desktop shells require dense keyboard-first navigation; relying on app glue for APG tree behavior causes drift and inconsistent accessibility.","details":{"rationale":"Docs and desktop shells require dense keyboard-first navigation; relying on app glue for APG tree behavior causes drift and inconsistent accessibility."},"spec":{"problem":"Docs and desktop shells require dense keyboard-first navigation; relying on app glue for APG tree behavior causes drift and inconsistent accessibility.","outcome":"APG-aligned keyboard behavior: arrow keys, Home/End, typeahead, expand/collapse, Enter activation.","acceptance_criteria":["APG-aligned keyboard behavior: arrow keys, Home/End, typeahead, expand/collapse, Enter activation.","Active item exposes a stable “current page” contract (`aria-current` or documented equivalent) and supports external control.","Events/attrs/slots/parts/custom properties are documented and covered by interaction tests; axe=0."],"inputs":["Docs and desktop shells require dense keyboard-first navigation; relying on app glue for APG tree behavior causes drift and inconsistent accessibility."],"deliverables":["APG-aligned keyboard behavior: arrow keys, Home/End, typeahead, expand/collapse, Enter activation."],"scope":["packages/ui-primitives/**","packages/ui-tokens/tokens/components/**"],"risks":["Compatibility risk: must not ship checkbox/selection UI in navigation mode unless explicitly intended."],"contract_refs":[{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"11.2"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"8"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"7"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"12"}],"runbook":[]}}
{"id":"BL-0044","title":"Provide a mobile navigation drawer pattern (sidebar-as-drawer) with focus and scroll policy","type":"doc","status":"queued","priority":"P2","tags":["accessibility","docs","horizon-next","shell","ui-primitives","ui-shell"],"created_at":"2025-01-01T00:00:30.000Z","updated_at":"2026-01-02T17:30:18.130Z","target":{"selector":"range","value":"0.1.x"},"deps":["BL-0008"],"evidence":[],"owner":"codex","notes":"Docs competitive baseline requires an accessible mobile navigation drawer and optional TOC drawer; ad-hoc app glue for focus/close/scroll is a drift source and\nContractRefsOriginal: [{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"6.3\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"7.1\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"8\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"13.1.G\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"11.1\"}]","details":{"rationale":"Docs competitive baseline requires an accessible mobile navigation drawer and optional TOC drawer; ad-hoc app glue for focus/close/scroll is a drift source and an a11y risk."},"spec":{"problem":"Docs competitive baseline requires an accessible mobile navigation drawer and optional TOC drawer; ad-hoc app glue for focus/close/scroll is a drift source and an a11y risk.","outcome":"A documented pattern/component exists for “sidebar as drawer” (Popover/Dialog enhancement allowed, but must have fallback).","acceptance_criteria":["A documented pattern/component exists for “sidebar as drawer” (Popover/Dialog enhancement allowed, but must have fallback).","Escape closes when open; initial focus + focus return are specified and tested.","Body scroll handling is specified and tested for mobile breakpoints.","Docs uses the pattern; axe=0 on representative mobile nav flow."],"inputs":["Docs competitive baseline requires an accessible mobile navigation drawer and optional TOC drawer; ad-hoc app glue for focus/close/scroll is a drift source and an a11y risk."],"deliverables":["A documented pattern/component exists for “sidebar as drawer” (Popover/Dialog enhancement allowed, but must have fallback)."],"scope":["packages/ui-shell/**","packages/ui-primitives/**","packages/docs/**"],"risks":["Compatibility risk: top-layer / overlay strategies must remain coherent and Baseline-gated."],"contract_refs":["6.4"],"runbook":[]}}
{"id":"BL-0045","title":"Improve docs markdown rendering: tables, callouts/admonitions, and token-first content styling","type":"doc","status":"queued","priority":"P2","tags":["docs","ui-primitives","ui-tokens"],"created_at":"2025-01-01T00:00:31.000Z","updated_at":"2026-01-02T17:30:18.130Z","target":{"selector":"range","value":"0.1.x"},"deps":["BL-0049"],"evidence":[],"owner":"codex","notes":"Docs competitive baseline requires competitive content rendering; markdown features must be rendered accessibly and styled without doc-local literals.\nContractRefsOriginal: [{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"3.1\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"4.1\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"8\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"10.2\"}]","details":{"rationale":"Docs competitive baseline requires competitive content rendering; markdown features must be rendered accessibly and styled without doc-local literals."},"spec":{"problem":"Docs competitive baseline requires competitive content rendering; markdown features must be rendered accessibly and styled without doc-local literals.","outcome":"Tables render with readable token-first styling and preserve accessibility semantics.","acceptance_criteria":["Tables render with readable token-first styling and preserve accessibility semantics.","Callouts/admonitions map to primitives (e.g. `uik-alert`) with token-first styling and explicit parts/vars.","Inline code, links, and code blocks are styled token-first (no hard-coded values)."],"inputs":["Docs competitive baseline requires competitive content rendering; markdown features must be rendered accessibly and styled without doc-local literals."],"deliverables":["Tables render with readable token-first styling and preserve accessibility semantics."],"scope":["packages/docs/**","packages/ui-tokens/**","packages/ui-primitives/**"],"risks":["Drift risk: custom markdown rendering can diverge from actual component contracts; prefer generated/validated outputs where possible."],"contract_refs":["6.4"],"runbook":[]}}
{"id":"BL-0046","title":"Enforce docs performance budgets (initial payload, CLS, lazy loading)","type":"doc","status":"done","priority":"P2","tags":["docs","quality"],"created_at":"2025-01-01T00:00:32.000Z","updated_at":"2026-01-03T23:16:06.769Z","target":{"selector":"range","value":"0.1.x"},"deps":[],"evidence":[],"owner":"codex","notes":"Docs competitive baseline defines performance as a feature; without budgets and lazy loading, docs will regress as content grows.\nContractRefsOriginal: [{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"12\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"3.6\"}]\nCompletion: Lazy-load docs page content and enforce performance budgets. Evidence: cmd:npm -w packages/docs run perf:check; file:/home/ismail-el-korchi/Documents/Projects/ui-kit/.ato/runs/artifacts/global/gate/format-1767480713493.log; file:/home/ismail-el-korchi/Documents/Projects/ui-kit/.ato/runs/artifacts/global/gate/typecheck-1767480715001.log; file:/home/ismail-el-korchi/Documents/Projects/ui-kit/.ato/runs/artifacts/global/gate/eslint-1767480728997.log; file:/home/ismail-el-korchi/Documents/Projects/ui-kit/.ato/runs/artifacts/global/gate/stylelint-1767480734115.log; file:/home/ismail-el-korchi/Documents/Projects/ui-kit/.ato/runs/artifacts/global/gate/docs-test-1767480752949.log; note:CLS check passed when preview server could listen (no sandbox EPERM).","details":{"rationale":"Docs competitive baseline defines performance as a feature; without budgets and lazy loading, docs will regress as content grows."},"spec":{"problem":"Docs competitive baseline defines performance as a feature; without budgets and lazy loading, docs will regress as content grows.","outcome":"Initial route does not require downloading the entire corpus/index before first render (lazy-load where appropriate).","acceptance_criteria":["Initial route does not require downloading the entire corpus/index before first render (lazy-load where appropriate).","CLS is effectively 0 for main layout transitions (measured via a reproducible check).","Budgets are defined and enforced in CI (initially conservative; can be tuned after measurement)."],"inputs":["cmd:npm -w packages/docs run perf:check","file:/home/ismail-el-korchi/Documents/Projects/ui-kit/.ato/runs/artifacts/global/gate/format-1767480713493.log","file:/home/ismail-el-korchi/Documents/Projects/ui-kit/.ato/runs/artifacts/global/gate/typecheck-1767480715001.log","file:/home/ismail-el-korchi/Documents/Projects/ui-kit/.ato/runs/artifacts/global/gate/eslint-1767480728997.log","file:/home/ismail-el-korchi/Documents/Projects/ui-kit/.ato/runs/artifacts/global/gate/stylelint-1767480734115.log","file:/home/ismail-el-korchi/Documents/Projects/ui-kit/.ato/runs/artifacts/global/gate/docs-test-1767480752949.log","cmd:npm -w packages/docs run perf:check (preview listen, CLS ok)"],"deliverables":["Initial route does not require downloading the entire corpus/index before first render (lazy-load where appropriate)."],"scope":["packages/docs/**"],"risks":["Flake risk: performance checks can be noisy; define stable measurement strategy."],"contract_refs":["6.4"],"runbook":[]},"completed_at":"2026-01-03T23:16:06.769Z","frozen":{"core_hash":"25fe89e15c04996466199979c22754b329547edea7ba4e1ea15fdaa39d39c43b"}}
{"id":"BL-0047","title":"Add docs SEO + sharing metadata (titles, descriptions, canonical URLs)","type":"doc","status":"queued","priority":"P2","tags":["docs"],"created_at":"2025-01-01T00:00:33.000Z","updated_at":"2026-01-02T17:30:18.130Z","target":{"selector":"range","value":"0.1.x"},"deps":[],"evidence":[],"owner":"codex","notes":"Docs competitive baseline requires correct titles/descriptions and canonical URLs; this also reduces drift in “URLs are a contract” expectations.\nContractRefsOriginal: [{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"11.4\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"13.1.B\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"10.2\"}]","details":{"rationale":"Docs competitive baseline requires correct titles/descriptions and canonical URLs; this also reduces drift in “URLs are a contract” expectations."},"spec":{"problem":"Docs competitive baseline requires correct titles/descriptions and canonical URLs; this also reduces drift in “URLs are a contract” expectations.","outcome":"Page titles/descriptions are correct per route.","acceptance_criteria":["Page titles/descriptions are correct per route.","Canonical URLs and basic metadata exist and are verifiable in built output.","If pre-rendering is chosen, it is Baseline-safe and does not introduce a runtime framework dependency."],"inputs":["Docs competitive baseline requires correct titles/descriptions and canonical URLs; this also reduces drift in “URLs are a contract” expectations."],"deliverables":["Page titles/descriptions are correct per route."],"scope":["packages/docs/**"],"risks":["Coupling risk: avoid turning docs tooling into a runtime dependency of packages (`PLATFORM_CONTRACT.md` §13B, §11.4)."],"contract_refs":["6.4"],"runbook":[]}}
{"id":"BL-0056","title":"Define the docs API contract schema (contracts/CEM → docs tables)","type":"doc","status":"queued","priority":"P2","tags":["docs","tooling","uncertainty"],"created_at":"2025-01-01T00:00:34.000Z","updated_at":"2026-01-02T17:30:18.130Z","target":{"selector":"range","value":"0.1.x"},"deps":[],"evidence":[],"owner":"codex","notes":"Docs competitive baseline requires durable API docs; without a precise schema (types/defaults/examples semantics), docs generation and drift detection will rema\nContractRefsOriginal: [{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"10.1\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"10.2\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"12\"}]","details":{"rationale":"Docs competitive baseline requires durable API docs; without a precise schema (types/defaults/examples semantics), docs generation and drift detection will remain fragile."},"spec":{"problem":"Docs competitive baseline requires durable API docs; without a precise schema (types/defaults/examples semantics), docs generation and drift detection will remain fragile.","outcome":"A documented schema exists for how docs tables are derived from contracts/CEM (including types, default values, and examples/notes).","acceptance_criteria":["A documented schema exists for how docs tables are derived from contracts/CEM (including types, default values, and examples/notes).","The schema is versioned or migration-guided so generator changes are explicit and reviewable."],"inputs":["Docs competitive baseline requires durable API docs; without a precise schema (types/defaults/examples semantics), docs generation and drift detection will remain fragile."],"deliverables":["A documented schema exists for how docs tables are derived from contracts/CEM (including types, default values, and examples/notes)."],"scope":["tools/contracts/**","packages/docs/tools/generate-docs-content.mjs"],"risks":["Rewrite risk: changing schema late can churn docs output and validator expectations."],"contract_refs":["6.4"],"runbook":[]}}
{"id":"BL-0048","title":"Make docs API tables fully derived from contracts/CEM and fail CI on drift","type":"doc","status":"queued","priority":"P2","tags":["docs","tooling","ui-primitives","ui-shell"],"created_at":"2025-01-01T00:00:35.000Z","updated_at":"2026-01-02T17:30:18.130Z","target":{"selector":"range","value":"0.1.x"},"deps":["BL-0005","BL-0006","BL-0056"],"evidence":["Source: `.ato/contracts/PLATFORM_CONTRACT.md` (§10.2, §12)."],"owner":"codex","notes":"`PLATFORM_CONTRACT.md` requires docs to not claim behaviors that aren’t implemented; Docs competitive baseline requires API docs that are maintainable and drift\nContractRefsOriginal: [{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"10.1\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"10.2\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"12\"}]","details":{"rationale":"`PLATFORM_CONTRACT.md` requires docs to not claim behaviors that aren’t implemented; Docs competitive baseline requires API docs that are maintainable and drift-resistant.","links":["Source: `.ato/contracts/PLATFORM_CONTRACT.md` (§10.2, §12)."]},"spec":{"problem":"`PLATFORM_CONTRACT.md` requires docs to not claim behaviors that aren’t implemented; Docs competitive baseline requires API docs that are maintainable and drift-resistant.","outcome":"Props/events/slots/parts/custom properties/a11y notes tables are generated from contracts/CEM (no hand-maintained API tables).","acceptance_criteria":["Props/events/slots/parts/custom properties/a11y notes tables are generated from contracts/CEM (no hand-maintained API tables).","CI fails when a public contract is undocumented or mismatched between source/registry/docs generation.","Examples referenced by API docs are runnable and represent real states."],"inputs":["`PLATFORM_CONTRACT.md` requires docs to not claim behaviors that aren’t implemented; Docs competitive baseline requires API docs that are maintainable and drift-resistant."],"deliverables":["Props/events/slots/parts/custom properties/a11y notes tables are generated from contracts/CEM (no hand-maintained API tables)."],"scope":["tools/contracts/**","packages/ui-primitives/**","packages/ui-shell/**","packages/docs/**"],"risks":["Rewrite risk: contract schema changes must be versioned or migration-guided to avoid breaking docs generation."],"contract_refs":["6.4"],"runbook":[]}}
{"id":"BL-0049","title":"Ensure token completeness for docs-critical content surfaces and new docs widgets","type":"doc","status":"queued","priority":"P2","tags":["docs","tokens","ui-tokens"],"created_at":"2025-01-01T00:00:36.000Z","updated_at":"2026-01-02T17:30:18.130Z","target":{"selector":"range","value":"0.1.x"},"deps":[],"evidence":[],"owner":"codex","notes":"Docs competitive baseline requires competitive typography/code/table/focus styling without doc-local literals; new docs-critical widgets must have component tok\nContractRefsOriginal: [{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"3.1\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"4.2\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"4.4\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"13.1.D\"}]","details":{"rationale":"Docs competitive baseline requires competitive typography/code/table/focus styling without doc-local literals; new docs-critical widgets must have component token hooks in `ui-tokens`."},"spec":{"problem":"Docs competitive baseline requires competitive typography/code/table/focus styling without doc-local literals; new docs-critical widgets must have component token hooks in `ui-tokens`.","outcome":"Semantic tokens are sufficient to style docs content surfaces (text, headings, code, table borders, selection, focus) without hard-coded values in docs.","acceptance_criteria":["Semantic tokens are sufficient to style docs content surfaces (text, headings, code, table borders, selection, focus) without hard-coded values in docs.","Component hooks for docs-critical widgets exist under `packages/ui-tokens/tokens/components/` and are consumed as `--uik-component-*`.","Token outputs remain deterministic and verified."],"inputs":["Docs competitive baseline requires competitive typography/code/table/focus styling without doc-local literals; new docs-critical widgets must have component token hooks in `ui-tokens`."],"deliverables":["Semantic tokens are sufficient to style docs content surfaces (text, headings, code, table borders, selection, focus) without hard-coded values in docs."],"scope":["packages/ui-tokens/tokens/**","packages/ui-tokens/scripts/**"],"risks":["Drift risk: if docs introduces “one-off” styling values, it will fork the token system."],"contract_refs":["6.4"],"runbook":[]}}
{"id":"BL-0050","title":"Make reduced motion + forced-colors behavior explicit and tested for docs-critical surfaces","type":"doc","status":"queued","priority":"P2","tags":["accessibility","docs","ui-primitives","ui-tokens"],"created_at":"2025-01-01T00:00:37.000Z","updated_at":"2026-01-02T17:30:18.130Z","target":{"selector":"range","value":"0.1.x"},"deps":["BL-0049"],"evidence":["Source: `.ato/contracts/PLATFORM_CONTRACT.md` (§5.4, §8, §13)."],"owner":"codex","notes":"`PLATFORM_CONTRACT.md` requires reduced motion and forced-colors support; Docs competitive baseline makes this a P0 docs capability.\nContractRefsOriginal: [{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"5.4\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"8\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"13.1.E\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"13.1.F\"}]","details":{"rationale":"`PLATFORM_CONTRACT.md` requires reduced motion and forced-colors support; Docs competitive baseline makes this a P0 docs capability.","links":["Source: `.ato/contracts/PLATFORM_CONTRACT.md` (§5.4, §8, §13)."]},"spec":{"problem":"`PLATFORM_CONTRACT.md` requires reduced motion and forced-colors support; Docs competitive baseline makes this a P0 docs capability.","outcome":"Motion tokens define durations/easings used by interactive primitives and docs transitions.","acceptance_criteria":["Motion tokens define durations/easings used by interactive primitives and docs transitions.","Under `prefers-reduced-motion: reduce`, non-essential motion is removed/shortened and is verified on representative docs flows (nav, dialogs).","Forced-colors mode remains readable and operable with visible focus and boundaries; verified via targeted cases."],"inputs":["`PLATFORM_CONTRACT.md` requires reduced motion and forced-colors support; Docs competitive baseline makes this a P0 docs capability."],"deliverables":["Motion tokens define durations/easings used by interactive primitives and docs transitions."],"scope":["packages/ui-tokens/**","packages/ui-primitives/**","packages/docs/**"],"risks":["Compatibility risk: forced-colors behavior must be documented if opting out of forced-color adjustment."],"contract_refs":["6.4"],"runbook":[]}}
{"id":"BL-0051","title":"Build docs “Examples” and “Lab” surfaces for complex widgets","type":"doc","status":"queued","priority":"P2","tags":["docs","ui-primitives"],"created_at":"2025-01-01T00:00:38.000Z","updated_at":"2026-01-02T17:30:18.130Z","target":{"selector":"range","value":"0.1.x"},"deps":["BL-0020"],"evidence":[],"owner":"codex","notes":"Docs competitive baseline requires examples/lab as product surfaces; this increases adoption and provides a durable dogfooding harness.\nContractRefsOriginal: [{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"10.2\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"12\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"8\"}]","details":{"rationale":"Docs competitive baseline requires examples/lab as product surfaces; this increases adoption and provides a durable dogfooding harness."},"spec":{"problem":"Docs competitive baseline requires examples/lab as product surfaces; this increases adoption and provides a durable dogfooding harness.","outcome":"Each complex widget has a docs example and a lab interaction surface exercising keyboard + a11y, with contracts documented.","acceptance_criteria":["Each complex widget has a docs example and a lab interaction surface exercising keyboard + a11y, with contracts documented.","Examples stay in sync with public contracts via generation/validation where possible."],"inputs":["Docs competitive baseline requires examples/lab as product surfaces; this increases adoption and provides a durable dogfooding harness."],"deliverables":["Each complex widget has a docs example and a lab interaction surface exercising keyboard + a11y, with contracts documented."],"scope":["packages/docs/**","packages/ui-primitives/**"],"risks":["Drift risk: examples can become stale unless tied to validators and tests."],"contract_refs":["6.4"],"runbook":[]}}
{"id":"BL-0052","title":"Add a safe live playground for a limited set of docs examples","type":"doc","status":"queued","priority":"P2","tags":["docs"],"created_at":"2025-01-01T00:00:39.000Z","updated_at":"2026-01-02T17:30:18.130Z","target":{"selector":"range","value":"0.1.x"},"deps":["BL-0046","BL-0051"],"evidence":[],"owner":"codex","notes":"A live playground improves understanding and adoption, but must remain deterministic and avoid framework lock-in.\nContractRefsOriginal: [{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"13.1.I\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"13.1.B\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"10.2\"}]","details":{"rationale":"A live playground improves understanding and adoption, but must remain deterministic and avoid framework lock-in."},"spec":{"problem":"A live playground improves understanding and adoption, but must remain deterministic and avoid framework lock-in.","outcome":"Users can tweak a small set of example props and see live output.","acceptance_criteria":["Users can tweak a small set of example props and see live output.","Sandbox is safe and deterministic; no framework runtime dependency is introduced."],"inputs":["A live playground improves understanding and adoption, but must remain deterministic and avoid framework lock-in."],"deliverables":["Users can tweak a small set of example props and see live output."],"scope":["packages/docs/**"],"risks":["Security risk: arbitrary code execution must be avoided; restrict to structured inputs."],"contract_refs":["6.4"],"runbook":[]}}
{"id":"BL-0053","title":"Add shell extension points for docs global controls and active-state patterns","type":"doc","status":"queued","priority":"P2","tags":["docs","shell","ui-shell"],"created_at":"2025-01-01T00:00:40.000Z","updated_at":"2026-01-02T17:30:18.130Z","target":{"selector":"range","value":"0.1.x"},"deps":[],"evidence":[],"owner":"codex","notes":"Docs needs global controls (search, theme/density toggles) and reliable active-state patterns without turning `ui-shell` into docs-only runtime.\nContractRefsOriginal: [{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"11.1\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"11.4\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"13.1.K\"}]","details":{"rationale":"Docs needs global controls (search, theme/density toggles) and reliable active-state patterns without turning `ui-shell` into docs-only runtime."},"spec":{"problem":"Docs needs global controls (search, theme/density toggles) and reliable active-state patterns without turning `ui-shell` into docs-only runtime.","outcome":"Layout provides clear slots/parts for global controls without breaking semantics.","acceptance_criteria":["Layout provides clear slots/parts for global controls without breaking semantics.","Documented patterns exist for active state, breadcrumbs, and page-level landmark structure, without hardcoding docs routing."],"inputs":["Docs needs global controls (search, theme/density toggles) and reliable active-state patterns without turning `ui-shell` into docs-only runtime."],"deliverables":["Layout provides clear slots/parts for global controls without breaking semantics."],"scope":["packages/ui-shell/**","packages/docs/**"],"risks":["Coupling risk: keep `ui-shell` general-purpose and avoid bundling routers or site generators (`PLATFORM_CONTRACT.md` §11.4)."],"contract_refs":["6.4"],"runbook":[]}}
{"id":"BL-0055","title":"Add docs theme + density controls (token-first, optionally persistent)","type":"doc","status":"queued","priority":"P2","tags":["docs","tokens","ui-shell","ui-tokens"],"created_at":"2025-01-01T00:00:41.000Z","updated_at":"2026-01-02T17:30:18.130Z","target":{"selector":"range","value":"0.1.x"},"deps":["BL-0049","BL-0053"],"evidence":[],"owner":"codex","notes":"Docs competitive baseline treats theme/density as P0 capabilities; docs must expose controls that dogfood token-driven theming without introducing doc-local sty\nContractRefsOriginal: [{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"3.1\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"4.5\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"8\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"11.3\"}]","details":{"rationale":"Docs competitive baseline treats theme/density as P0 capabilities; docs must expose controls that dogfood token-driven theming without introducing doc-local styling drift."},"spec":{"problem":"Docs competitive baseline treats theme/density as P0 capabilities; docs must expose controls that dogfood token-driven theming without introducing doc-local styling drift.","outcome":"Docs provides theme (light/dark) and density (comfortable/compact) controls in a keyboard-accessible way.","acceptance_criteria":["Docs provides theme (light/dark) and density (comfortable/compact) controls in a keyboard-accessible way.","Surfaces remain readable and token-first across modes; no hard-coded values are introduced in docs CSS.","Persistence behavior is either implemented (and tested) or explicitly documented as app-owned with a clear contract."],"inputs":["Docs competitive baseline treats theme/density as P0 capabilities; docs must expose controls that dogfood token-driven theming without introducing doc-local styling drift."],"deliverables":["Docs provides theme (light/dark) and density (comfortable/compact) controls in a keyboard-accessible way."],"scope":["packages/docs/**","packages/ui-shell/**","packages/ui-tokens/**"],"risks":["Drift risk: if docs introduces special-casing instead of tokens, it will fork theming semantics."],"contract_refs":["6.4"],"runbook":[]}}
{"id":"BL-0054","title":"Expand docs a11y gates and interaction tests for nav tree, search, and drawers","type":"doc","status":"queued","priority":"P2","tags":["accessibility","docs","testing"],"created_at":"2025-01-01T00:00:42.000Z","updated_at":"2026-01-02T17:30:18.130Z","target":{"selector":"range","value":"0.1.x"},"deps":["BL-0021","BL-0022","BL-0044"],"evidence":[],"owner":"codex","notes":"Docs competitive baseline requires axe=0 on representative routes and interaction tests for critical paths; without explicit gates, regressions will slip in.\nContractRefsOriginal: [{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"8\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"12\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"13.1.E\"}]","details":{"rationale":"Docs competitive baseline requires axe=0 on representative routes and interaction tests for critical paths; without explicit gates, regressions will slip in."},"spec":{"problem":"Docs competitive baseline requires axe=0 on representative routes and interaction tests for critical paths; without explicit gates, regressions will slip in.","outcome":"Docs key pages (home, at least one “components” page, one markdown page) pass axe=0 in automated runs.","acceptance_criteria":["Docs key pages (home, at least one “components” page, one markdown page) pass axe=0 in automated runs.","Interaction tests cover: nav tree keyboard navigation, search open/close/navigation/activation, and drawer focus management (initial focus + return focus + Escape)."],"inputs":["Docs competitive baseline requires axe=0 on representative routes and interaction tests for critical paths; without explicit gates, regressions will slip in."],"deliverables":["Docs key pages (home, at least one “components” page, one markdown page) pass axe=0 in automated runs."],"scope":["packages/docs/tests/**",".storybook/**"],"risks":["Flake risk: browser/a11y tests can be flaky; keep cases small and deterministic."],"contract_refs":["6.4"],"runbook":[]}}
{"id":"BL-0023","title":"Add syntax highlighting for docs code blocks (deterministic, no drift)","type":"doc","status":"queued","priority":"P2","tags":["docs"],"created_at":"2025-01-01T00:00:43.000Z","updated_at":"2026-01-02T17:30:18.130Z","target":{"selector":"range","value":"0.1.x"},"deps":["BL-0020","BL-0040"],"evidence":[],"owner":"codex","notes":"Code samples are core to adoption; highlighting must not introduce nondeterminism or vendor/tooling coupling.\nContractRefsOriginal: [{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"10.2\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"8\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"5.4\"}]","details":{"rationale":"Code samples are core to adoption; highlighting must not introduce nondeterminism or vendor/tooling coupling."},"spec":{"problem":"Code samples are core to adoption; highlighting must not introduce nondeterminism or vendor/tooling coupling.","outcome":"Code blocks render with syntax highlighting deterministically across builds.","acceptance_criteria":["Code blocks render with syntax highlighting deterministically across builds.","Reduced-motion/forced-colors remain legible; axe=0."],"inputs":["Code samples are core to adoption; highlighting must not introduce nondeterminism or vendor/tooling coupling."],"deliverables":["Code blocks render with syntax highlighting deterministically across builds."],"scope":["packages/docs/**"],"risks":["Tooling risk: avoid heavy runtime dependencies; prefer build-time processing where possible."],"contract_refs":["6.4"],"runbook":[]}}
{"id":"BL-0024","title":"Add visual regression testing across themes/density/forced-colors","type":"tooling","status":"queued","priority":"P2","tags":["horizon-later","quality","testing"],"created_at":"2025-01-01T00:00:44.000Z","updated_at":"2026-01-02T17:30:18.130Z","target":{"selector":"range","value":"0.1.x"},"deps":["BL-0010"],"evidence":["Demo: a deliberate visual regression is caught as a diff."],"owner":"codex","notes":"`PLATFORM_CONTRACT.md` recommends objective proof gates (§12) and `ui-shell` must support viewing across preference modes (§11.3); visual regression prevents si\nContractRefsOriginal: [{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"11.3\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"12\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"8\"}]","details":{"rationale":"`PLATFORM_CONTRACT.md` recommends objective proof gates (§12) and `ui-shell` must support viewing across preference modes (§11.3); visual regression prevents silent style drift.","links":["Demo: a deliberate visual regression is caught as a diff."]},"spec":{"problem":"`PLATFORM_CONTRACT.md` recommends objective proof gates (§12) and `ui-shell` must support viewing across preference modes (§11.3); visual regression prevents silent style drift.","outcome":"Screenshot baselines exist across themes/density/forced-colors; low flake budget enforced.","acceptance_criteria":["Screenshot baselines exist across themes/density/forced-colors; low flake budget enforced.","Visual diffs are reviewable and deterministic."],"inputs":["`PLATFORM_CONTRACT.md` recommends objective proof gates (§12) and `ui-shell` must support viewing across preference modes (§11.3); visual regression prevents silent style drift."],"deliverables":["Screenshot baselines exist across themes/density/forced-colors; low flake budget enforced."],"scope":["Storybook/docs test harness","CI configuration","token/theme fixtures"],"risks":["Flake risk: fonts/rendering variance; must design the pipeline to be stable."],"contract_refs":["6.4"],"runbook":[]}}
{"id":"BL-0025","title":"Publish standards-first host integration guide (no adapters)","type":"doc","status":"queued","priority":"P2","tags":["contract","docs","horizon-next","ui-primitives","ui-shell"],"created_at":"2025-01-01T00:00:45.000Z","updated_at":"2026-01-02T17:30:18.130Z","target":{"selector":"range","value":"0.1.x"},"deps":["BL-0004"],"evidence":[],"owner":"codex","notes":"Without clear host recipes, consumers build wrapper stacks; `PLATFORM_CONTRACT.md` forbids framework runtime requirements and encourages import-map/no-bundler p\nContractRefsOriginal: [{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"§2\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"§10\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"§13\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"§15\"}]","details":{"rationale":"Without clear host recipes, consumers build wrapper stacks; `PLATFORM_CONTRACT.md` forbids framework runtime requirements and encourages import-map/no-bundler paths (§2, §10, §13B, §15).","links":[],"effort":"M"},"spec":{"problem":"Without clear host recipes, consumers build wrapper stacks; `PLATFORM_CONTRACT.md` forbids framework runtime requirements and encourages import-map/no-bundler paths (§2, §10, §13B, §15).","outcome":"Integration docs cover: events/value patterns, form-associated controls, CEM consumption, import-map/no-bundler usage, and SSR-safe loading guidance.","acceptance_criteria":["Integration docs cover: events/value patterns, form-associated controls, CEM consumption, import-map/no-bundler usage, and SSR-safe loading guidance.","Examples are runnable and tested (at least smoke coverage)."],"inputs":["Without clear host recipes, consumers build wrapper stacks; `PLATFORM_CONTRACT.md` forbids framework runtime requirements and encourages import-map/no-bundler paths (§2, §10, §13B, §15)."],"deliverables":["Integration docs cover: events/value patterns, form-associated controls, CEM consumption, import-map/no-bundler usage, and SSR-safe loading guidance."],"scope":["packages/docs/**","packages/ui-primitives/**","packages/ui-shell/**"],"risks":["Drift risk: docs must derive from manifests/registries when possible."],"contract_refs":["6.4"],"runbook":[]}}
{"id":"BL-0026","title":"Define an “external apps” convention and validation policy","type":"tooling","status":"done","priority":"P2","tags":["horizon-next","tooling","governance","external-apps"],"created_at":"2025-01-01T00:00:46.000Z","updated_at":"2025-12-26T05:42:27.013Z","target":{"selector":"exact","value":"0.1.2"},"deps":[],"evidence":[],"owner":"codex","notes":"External apps stay under external/ and are untracked; only touched when the user explicitly instructs or asks to create a queue item for dogfooding.","details":{"rationale":"Dogfooding apps outside workspaces should not destabilize monorepo gates; conventions prevent lint/build drift.","links":[]},"completed_at":"2025-12-26T05:42:27.013Z","frozen":{"core_hash":"8d048ce08a5cebafaf211a41f0312d35c9456f46ab680a192cfac3dda7086f36"},"spec":{"problem":"Dogfooding apps outside workspaces should not destabilize monorepo gates; conventions prevent lint/build drift.","outcome":"Policy states external apps (external/, suno-studio, llm-context-studio) remain untracked and out of repo scope by default.","acceptance_criteria":["Policy states external apps (external/, suno-studio, llm-context-studio) remain untracked and out of repo scope by default.","Agents open/modify external/ only when the user explicitly instructs or when executing a queue item created at the user's request.","Workspace lint/typecheck/test/build remain deterministic and ignore external apps by default."],"inputs":["Dogfooding apps outside workspaces should not destabilize monorepo gates; conventions prevent lint/build drift."],"deliverables":["Policy states external apps (external/, suno-studio, llm-context-studio) remain untracked and out of repo scope by default."],"scope":["repo root conventions","external/ policy and ignore rules","agent access rules for external apps","queue policy for dogfooding apps"],"risks":["Unclear policy leads to accidental coupling and noisy CI/lint."],"contract_refs":[],"runbook":[]}}
{"id":"BL-0027","title":"Add a release workflow (tagging, changelog, version bumps)","type":"tooling","status":"queued","priority":"P2","tags":["horizon-next","tooling"],"created_at":"2025-01-01T00:00:47.000Z","updated_at":"2025-12-31T00:47:32.149Z","target":{"selector":"range","value":"0.1.x"},"deps":[],"evidence":[],"owner":"codex","notes":"Manual releases increase drift risk and make it hard to maintain monotonic npm versions.","details":{"rationale":"Manual releases increase drift risk and make it hard to maintain monotonic npm versions.","links":[]},"spec":{"problem":"Manual releases increase drift risk and make it hard to maintain monotonic npm versions.","outcome":"A reproducible release workflow exists (tag + changelog + version bump automation).","acceptance_criteria":["A reproducible release workflow exists (tag + changelog + version bump automation).","It respects npm monotonic version requirements."],"inputs":["Manual releases increase drift risk and make it hard to maintain monotonic npm versions."],"deliverables":["A reproducible release workflow exists (tag + changelog + version bump automation)."],"scope":["repo scripts/CI","package versioning policies"],"risks":["Compatibility risk: release automation can break publish flows if not tested in dry-run mode."],"contract_refs":[{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"9"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"12"}],"runbook":[]}}
{"id":"BL-0028","title":"Decide where `llm-context-studio` should live and enforce policy","type":"investigation","status":"done","priority":"P2","tags":["governance","horizon-next","uncertainty","external-apps"],"created_at":"2025-01-01T00:00:48.000Z","updated_at":"2025-12-26T05:42:32.959Z","target":{"selector":"exact","value":"0.1.2"},"deps":["BL-0026"],"evidence":[],"owner":"codex","notes":"Decision: llm-context-studio stays under external/ and untracked; only touched on explicit user instruction or user-requested queue item.","details":{"rationale":"Repo determinism and tooling scope depend on whether `llm-context-studio` is a workspace member, a submodule, or an external sandbox.","links":[]},"completed_at":"2025-12-26T05:42:32.959Z","frozen":{"core_hash":"23d5e058e2156f0a6a454aa5ad14bbec392e45b41d07bfa4554436c63072e2a8"},"spec":{"problem":"Repo determinism and tooling scope depend on whether `llm-context-studio` is a workspace member, a submodule, or an external sandbox.","outcome":"llm-context-studio remains under external/ and untracked by default.","acceptance_criteria":["llm-context-studio remains under external/ and untracked by default.","Agents access external/ only on explicit user instruction or a queue item created at the user's request.","Monorepo gates remain deterministic and do not depend on external apps by default."],"inputs":["Repo determinism and tooling scope depend on whether `llm-context-studio` is a workspace member, a submodule, or an external sandbox."],"deliverables":["llm-context-studio remains under external/ and untracked by default."],"scope":["repo root structure","external/ policy and ignore rules","dogfooding queue requirements"],"risks":["Drift risk: unclear policy leads to accidental coupling and noisy CI/lint."],"contract_refs":[],"runbook":[]}}
{"id":"BL-0029","title":"Resolve docs axe landmark “top-level” rule policy (justify or restructure)","type":"debt","status":"queued","priority":"P2","tags":["accessibility","debt","docs","ui-shell"],"created_at":"2025-01-01T00:00:49.000Z","updated_at":"2025-12-31T00:47:32.840Z","target":{"selector":"range","value":"0.1.x"},"deps":["BL-0031"],"evidence":["Source: internal consolidation notes + `.internal/views/RELEASES.md` (a11y gate decision)."],"owner":"codex","notes":"Axe landmark “top-level” rules can conflict with componentized layouts; policy must be explicit to keep a11y gates meaningful (`PLATFORM_CONTRACT.md` §8, §12).","details":{"rationale":"Axe landmark “top-level” rules can conflict with componentized layouts; policy must be explicit to keep a11y gates meaningful (`PLATFORM_CONTRACT.md` §8, §12).","links":["Source: internal consolidation notes + `.internal/views/RELEASES.md` (a11y gate decision)."]},"spec":{"problem":"Axe landmark “top-level” rules can conflict with componentized layouts; policy must be explicit to keep a11y gates meaningful (`PLATFORM_CONTRACT.md` §8, §12).","outcome":"Either:","acceptance_criteria":["Either:"],"inputs":["Axe landmark “top-level” rules can conflict with componentized layouts; policy must be explicit to keep a11y gates meaningful (`PLATFORM_CONTRACT.md` §8, §12)."],"deliverables":["Either:"],"scope":["packages/docs/**","packages/ui-shell/**"],"risks":["Compatibility risk: changes may impact screen reader navigation patterns."],"contract_refs":[{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"8"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"12"}],"runbook":[]}}
{"id":"BL-0030","title":"Ship an optional “semantic app mapping” token output (utility semantics layer)","type":"debt","status":"queued","priority":"P2","tags":["debt","docs","tokens","ui-tokens"],"created_at":"2025-01-01T00:00:50.000Z","updated_at":"2026-01-02T17:30:18.130Z","target":{"selector":"range","value":"0.1.x"},"deps":[],"evidence":["Demo: remove per-app semantic mapping glue in a minimal sample.","Source: internal consolidation notes (“Missing first-class Tailwind theme mapping for app semantics”)."],"owner":"codex","notes":"External apps often use semantic utility naming (background/foreground/border/ring/etc); a mapping layer reduces glue while keeping tokens-first discipline.\nContractRefsOriginal: [{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"4.1\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"4.4\"}]","details":{"rationale":"External apps often use semantic utility naming (background/foreground/border/ring/etc); a mapping layer reduces glue while keeping tokens-first discipline.","links":["Source: internal consolidation notes (“Missing first-class Tailwind theme mapping for app semantics”).","Demo: remove per-app semantic mapping glue in a minimal sample."]},"spec":{"problem":"External apps often use semantic utility naming (background/foreground/border/ring/etc); a mapping layer reduces glue while keeping tokens-first discipline.","outcome":"A new optional tokens output maps common semantic names to UIK tokens deterministically.","acceptance_criteria":["A new optional tokens output maps common semantic names to UIK tokens deterministically.","Docs show a minimal consumer example that works via a single import."],"inputs":["External apps often use semantic utility naming (background/foreground/border/ring/etc); a mapping layer reduces glue while keeping tokens-first discipline."],"deliverables":["A new optional tokens output maps common semantic names to UIK tokens deterministically."],"scope":["packages/ui-tokens/**","packages/docs/**"],"risks":["Compatibility risk: naming must avoid synonym drift and remain optional (do not redefine core token ontology)."],"contract_refs":["6.4"],"runbook":[]}}
{"id":"BL-0031","title":"Document and (optionally) support shell landmark roles/labels as explicit contracts","type":"doc","status":"done","priority":"P2","tags":["accessibility","docs","horizon-now","shell","ui-shell"],"created_at":"2025-01-01T00:00:51.000Z","updated_at":"2025-12-26T03:45:38.814Z","target":{"selector":"range","value":"0.1.x"},"deps":[],"evidence":["Demo: screen reader region navigation in docs shell."],"owner":"codex","notes":"Landmarks must be predictable and operable; shell should not rely on host markup guesswork for region navigation (`PLATFORM_CONTRACT.md` §8, §11).","details":{"rationale":"Landmarks must be predictable and operable; shell should not rely on host markup guesswork for region navigation (`PLATFORM_CONTRACT.md` §8, §11).","links":["Demo: screen reader region navigation in docs shell."]},"completed_at":"2025-12-26T03:45:38.814Z","frozen":{"core_hash":"b31ac640be664c77ef866c60381ebdb5d5f2967c142ac0e2e6f17a127db46be4"},"spec":{"problem":"Landmarks must be predictable and operable; shell should not rely on host markup guesswork for region navigation (`PLATFORM_CONTRACT.md` §8, §11).","outcome":"Landmark guidance exists (recommended roles/labels per region) and is demonstrated in docs.","acceptance_criteria":["Landmark guidance exists (recommended roles/labels per region) and is demonstrated in docs.","If optional attributes/helpers are added, they are documented and covered by at least one a11y-focused test."],"inputs":["Landmarks must be predictable and operable; shell should not rely on host markup guesswork for region navigation (`PLATFORM_CONTRACT.md` §8, §11)."],"deliverables":["Landmark guidance exists (recommended roles/labels per region) and is demonstrated in docs."],"scope":["packages/ui-shell/**","packages/docs/**"],"risks":["Compatibility risk: landmark semantics must not be hardcoded in ways that conflict with app layouts."],"contract_refs":[],"runbook":[]}}
{"id":"BL-0032","title":"Add advanced tree view affordances (typeahead, multi-select patterns, async loading)","type":"feature","status":"queued","priority":"P2","tags":["feature","horizon-later","ui-primitives","ui-shell"],"created_at":"2025-01-01T00:00:52.000Z","updated_at":"2025-12-31T00:47:34.274Z","target":{"selector":"range","value":"0.1.x"},"deps":["BL-0007","BL-0011"],"evidence":[],"owner":"codex","notes":"Dogfooding apps and shell navigation benefit from richer tree affordances; shipping shared patterns prevents fragmentation.","details":{"rationale":"Dogfooding apps and shell navigation benefit from richer tree affordances; shipping shared patterns prevents fragmentation.","links":[]},"spec":{"problem":"Dogfooding apps and shell navigation benefit from richer tree affordances; shipping shared patterns prevents fragmentation.","outcome":"Affordances are documented as patterns (what’s supported vs app-owned) and covered by interaction tests.","acceptance_criteria":["Affordances are documented as patterns (what’s supported vs app-owned) and covered by interaction tests."],"inputs":["Dogfooding apps and shell navigation benefit from richer tree affordances; shipping shared patterns prevents fragmentation."],"deliverables":["Affordances are documented as patterns (what’s supported vs app-owned) and covered by interaction tests."],"scope":["packages/ui-primitives/**","packages/ui-shell/**"],"risks":["Scope risk: avoid building a monolithic tree “mega component”; keep orthogonal, testable pieces."],"contract_refs":[{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"11.2"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"8"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"7"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"12"}],"runbook":[]}}
{"id":"BL-0033","title":"Ship advanced widgets only when dogfooding justifies them (`uik-toast`, `uik-virtual-list`, `uik-data-table`)","type":"feature","status":"queued","priority":"P2","tags":["feature","ui-primitives"],"created_at":"2025-01-01T00:00:53.000Z","updated_at":"2025-12-31T00:47:34.975Z","target":{"selector":"range","value":"0.1.x"},"deps":["BL-0008","BL-0011"],"evidence":[],"owner":"codex","notes":"Advanced widgets should be proven by real usage to avoid overbuilding; when shipped, they must meet APG/testability expectations.","details":{"rationale":"Advanced widgets should be proven by real usage to avoid overbuilding; when shipped, they must meet APG/testability expectations."},"spec":{"problem":"Advanced widgets should be proven by real usage to avoid overbuilding; when shipped, they must meet APG/testability expectations.","outcome":"Each shipped widget has APG/keyboard coverage where applicable, axe=0, and documented contracts.","acceptance_criteria":["Each shipped widget has APG/keyboard coverage where applicable, axe=0, and documented contracts.","Performance baselines exist for virtualized surfaces."],"inputs":["Advanced widgets should be proven by real usage to avoid overbuilding; when shipped, they must meet APG/testability expectations."],"deliverables":["Each shipped widget has APG/keyboard coverage where applicable, axe=0, and documented contracts."],"scope":["packages/ui-primitives/**"],"risks":["Rewrite-trap risk: shipping “half widgets” creates long-term maintenance debt."],"contract_refs":[{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"6.4"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"8"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"12"}],"runbook":[]}}
{"id":"BL-0034","title":"Publish platform integration guides for Electron/webviews/mobile web","type":"doc","status":"queued","priority":"P2","tags":["docs","horizon-later"],"created_at":"2025-01-01T00:00:54.000Z","updated_at":"2026-01-02T17:30:18.130Z","target":{"selector":"range","value":"0.1.x"},"deps":["BL-0025"],"evidence":[],"owner":"codex","notes":"Adoption depends on clear guidance for real host environments; docs should remain standards-first and avoid framework coupling.\nContractRefsOriginal: [{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"9\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"10.2\"}]","details":{"rationale":"Adoption depends on clear guidance for real host environments; docs should remain standards-first and avoid framework coupling.","links":[]},"spec":{"problem":"Adoption depends on clear guidance for real host environments; docs should remain standards-first and avoid framework coupling.","outcome":"Guides exist for Electron/webview/mobile web, with verified recipes and caveats.","acceptance_criteria":["Guides exist for Electron/webview/mobile web, with verified recipes and caveats."],"inputs":["Adoption depends on clear guidance for real host environments; docs should remain standards-first and avoid framework coupling."],"deliverables":["Guides exist for Electron/webview/mobile web, with verified recipes and caveats."],"scope":["packages/docs/**"],"risks":["Drift risk: keep guidance tied to verified dogfooding surfaces."],"contract_refs":["6.4"],"runbook":[]}}
{"id":"BL-0035","title":"Define “edge adapters” policy and optional modules boundary (without ecosystem split)","type":"tooling","status":"queued","priority":"P2","tags":["governance","horizon-later"],"created_at":"2025-01-01T00:00:55.000Z","updated_at":"2026-01-02T17:30:18.130Z","target":{"selector":"range","value":"0.1.x"},"deps":["BL-0025"],"evidence":[],"owner":"codex","notes":"The platform forbids framework runtime requirements, but may allow edge adapters at boundaries; policy must prevent a second ecosystem surface.\nContractRefsOriginal: [{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"11.4\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"13.1.B\"}]","details":{"rationale":"The platform forbids framework runtime requirements, but may allow edge adapters at boundaries; policy must prevent a second ecosystem surface.","links":[]},"spec":{"problem":"The platform forbids framework runtime requirements, but may allow edge adapters at boundaries; policy must prevent a second ecosystem surface.","outcome":"A written policy exists: what adapters are allowed (if any), where they live, and how they preserve contracts.","acceptance_criteria":["A written policy exists: what adapters are allowed (if any), where they live, and how they preserve contracts."],"inputs":["The platform forbids framework runtime requirements, but may allow edge adapters at boundaries; policy must prevent a second ecosystem surface."],"deliverables":["A written policy exists: what adapters are allowed (if any), where they live, and how they preserve contracts."],"scope":["repo governance docs","package boundaries","docs recipes"],"risks":["Rewrite-trap risk: adapters can become a parallel API surface and drift faster than core contracts."],"contract_refs":["6.4"],"runbook":[]}}
{"id":"BL-0036","title":"Ship Tooling Pack v1 (generators + contract validators)","type":"contract","status":"queued","priority":"P2","tags":["tooling"],"created_at":"2025-01-01T00:00:56.000Z","updated_at":"2026-01-02T17:30:18.130Z","target":{"selector":"range","value":"0.1.x"},"deps":["BL-0005","BL-0006","BL-0010"],"evidence":["Demo: generate a new primitive skeleton and run tests unchanged."],"owner":"codex","notes":"“Pit of success” tooling reduces contract drift and speeds compliant component creation.\nContractRefsOriginal: [{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"10.1\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"12\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"15\"}]","details":{"rationale":"“Pit of success” tooling reduces contract drift and speeds compliant component creation.","links":["Demo: generate a new primitive skeleton and run tests unchanged."]},"spec":{"problem":"“Pit of success” tooling reduces contract drift and speeds compliant component creation.","outcome":"Generator scaffolds a compliant primitive + tokens + story + tests with zero manual edits.","acceptance_criteria":["Generator scaffolds a compliant primitive + tokens + story + tests with zero manual edits.","Validator fails CI if public contracts are undocumented or drift from registries/CEM."],"inputs":["“Pit of success” tooling reduces contract drift and speeds compliant component creation."],"deliverables":["Generator scaffolds a compliant primitive + tokens + story + tests with zero manual edits."],"scope":["tools/**"],"risks":["Coupling risk: generators must use public exports only and follow tokens-first conventions."],"contract_refs":["6.4"],"runbook":[]}}
{"id":"BL-0037","title":"Validate scaffolder token hook conventions against `ui-tokens` component tokens","type":"debt","status":"queued","priority":"P2","tags":["debt","tooling","ui-tokens"],"created_at":"2025-01-01T00:00:57.000Z","updated_at":"2026-01-02T17:30:18.130Z","target":{"selector":"range","value":"0.1.x"},"deps":[],"evidence":[],"owner":"codex","notes":"If scaffolding emits token hooks that drift from `ui-tokens` conventions, it creates systemic naming debt and forces renames (a rewrite trap).\nContractRefsOriginal: [{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"4.1\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"4.4\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"13.1.D\"}]","details":{"rationale":"If scaffolding emits token hooks that drift from `ui-tokens` conventions, it creates systemic naming debt and forces renames (a rewrite trap).","links":[]},"spec":{"problem":"If scaffolding emits token hooks that drift from `ui-tokens` conventions, it creates systemic naming debt and forces renames (a rewrite trap).","outcome":"Scaffolder-generated token paths match actual `tokens/components/**` conventions.","acceptance_criteria":["Scaffolder-generated token paths match actual `tokens/components/**` conventions.","Naming/casing rules are documented and enforced by tests or validation."],"inputs":["If scaffolding emits token hooks that drift from `ui-tokens` conventions, it creates systemic naming debt and forces renames (a rewrite trap)."],"deliverables":["Scaffolder-generated token paths match actual `tokens/components/**` conventions."],"scope":["tools/contracts/scaffold-primitive.mjs","packages/ui-tokens/tokens/components/**"],"risks":["Drift risk: mismatched conventions spread rapidly once generators are used."],"contract_refs":["6.4"],"runbook":[]}}
{"id":"BL-0001","title":"Upgrade `.internal/` workflow so `PLATFORM_CONTRACT.md` governs and drift is eliminated","type":"contract","status":"done","priority":"P2","tags":["decision"],"created_at":"2025-01-01T00:00:58.000Z","updated_at":"2025-12-26T03:13:32.687Z","completed_at":"2025-01-01T00:00:58.000Z","target":{"selector":"unbounded"},"deps":[],"evidence":[],"owner":"codex","notes":"Resolved (see decision record).","details":{"decision":["Changed `.internal/` cognitive system model to: `queue store + generated views` (long-term future), `queue store (version-targeted)` (medium-term future), `.internal/views/STATE_PRESENT.md` (present pointers), `.internal/views/RELEASES.md` (past resolved work), with `PLATFORM_CONTRACT.md` as the highest authority.","Consolidated actionable items into `queue store + generated views` and removed the parallel risk register to avoid duplicate planning surfaces.","Recorded the missing `v1.0.0` criteria as a blocked uncertainty (BL-0002) rather than inventing assumptions.","Updated `.gitignore` to reduce drift and noise by ignoring `external/`, local routers (`AGENTS.md`), generated docs content, and the local docs plan file (canonical planning is in `.internal/`)."],"tradeoffs":["Legacy planning files remain as historical sources, but are no longer authoritative for planning."],"invariants":["`.internal/views/STATE_PRESENT.md` MUST NOT contain plans; it only references backlog IDs.","`.internal/views/RELEASES.md` MUST contain only resolved backlog entries.","Any uncertainty MUST be captured as a backlog entry (tagged `Uncertainty`) and blocks dependent work."]},"frozen":{"core_hash":"f09dac8770a772654881dd1da6af64494096a71f9cb993208588c3e3f8beb4ba"},"spec":{"problem":"Upgrade `.internal/` workflow so `PLATFORM_CONTRACT.md` governs and drift is eliminated","outcome":"Resolved (see decision record).","acceptance_criteria":["Resolved (see decision record)."],"inputs":["Upgrade `.internal/` workflow so `PLATFORM_CONTRACT.md` governs and drift is eliminated"],"deliverables":["Resolved (see decision record)."],"scope":[],"risks":[],"contract_refs":[],"runbook":[]}}
{"id":"BL-0002","title":"Define `v1.0.0` acceptance criteria as a verifiable checklist","type":"tooling","status":"done","priority":"P2","tags":["decision"],"created_at":"2025-01-01T00:00:59.000Z","updated_at":"2025-12-26T03:13:32.687Z","completed_at":"2025-01-01T00:00:59.000Z","target":{"selector":"milestone","value":"1.0.0"},"deps":[],"evidence":[],"owner":"codex","notes":"Resolved (see decision record).","details":{"decision":["Populated `milestone:1.0.0 criteria (queue items)` with an explicit, verifiable checklist (V1-A…V1-F) aligned to `PLATFORM_CONTRACT.md`.","Updated `.internal/views/STATE_PRESENT.md` to report 1.0.0 progress from those checklist items (no assumptions; defaults remain unchecked until verified)."],"tradeoffs":["Progress is conservative by default (unchecked) until evidence is explicitly attached and/or items are verified."],"invariants":["`.internal/views/STATE_PRESENT.md` derives “Progress to 1.0.0” only from `milestone:1.0.0 criteria (queue items)` checkboxes; do not guess completion."]},"frozen":{"core_hash":"0b171d41128c2bea48f5d49436cf765e52724e96a3bbed0e2da9a1cc824c624c"},"spec":{"problem":"Define `v1.0.0` acceptance criteria as a verifiable checklist","outcome":"Resolved (see decision record).","acceptance_criteria":["Resolved (see decision record)."],"inputs":["Define `v1.0.0` acceptance criteria as a verifiable checklist"],"deliverables":["Resolved (see decision record)."],"scope":[],"risks":[],"contract_refs":[],"runbook":[]}}
{"id":"BL-0005","title":"Add a JSON Schema for contract registries and validate in CI + editors","type":"contract","status":"done","priority":"P2","tags":["decision"],"created_at":"2025-01-01T00:01:00.000Z","updated_at":"2025-01-01T00:01:00.000Z","completed_at":"2025-01-01T00:01:00.000Z","target":{"selector":"unbounded"},"deps":[],"evidence":[],"owner":"codex","notes":"Resolved (see decision record).","details":{"decision":["Added JSON Schemas for primitives and shell contract registries and stored them under `tools/contracts/schemas/`.","Wired `$schema` references into `packages/ui-primitives/contracts/components.json` and `packages/ui-shell/contracts/entries.json`, and updated the generator to keep them stable.","Added schema validation to `tools/contracts/validate.mjs` (Ajv) so malformed registries fail contract validation early."],"tradeoffs":["Added Ajv as a dev dependency and enforced stricter registry shape checks."],"invariants":["Contract registries must include `$schema` and conform to the schema during `contracts:validate`.","Registry schema files are the source of truth for contract shape."]},"frozen":{"core_hash":"70f83278778c2c3995f308d62252db5914599e9e4df106910861082e0bf4bde8"},"spec":{"problem":"Add a JSON Schema for contract registries and validate in CI + editors","outcome":"Resolved (see decision record).","acceptance_criteria":["Resolved (see decision record)."],"inputs":["Add a JSON Schema for contract registries and validate in CI + editors"],"deliverables":["Resolved (see decision record)."],"scope":[],"risks":[],"contract_refs":[],"runbook":[]}}
{"id":"BL-0006","title":"Decouple contract validation from `dist/` artifacts (or provide explicit `:build` path)","type":"contract","status":"done","priority":"P2","tags":["decision"],"created_at":"2025-01-01T00:01:01.000Z","updated_at":"2025-01-01T00:01:01.000Z","completed_at":"2025-01-01T00:01:01.000Z","target":{"selector":"unbounded"},"deps":[],"evidence":[],"owner":"codex","notes":"Resolved (see decision record).","details":{"decision":["Added explicit build-artifact checks to contract generation and validation, with a single documented recovery path (`npm run contracts:validate:build`).","Contract scripts now fail fast with clear missing-artifact lists instead of cryptic file errors when `dist/` or token outputs are absent."],"tradeoffs":["Validation still depends on build outputs, but failures are now explicit and deterministic."],"invariants":["Contract tooling must emit a clear “build required” message with the canonical build path when artifacts are missing."]},"frozen":{"core_hash":"12a7fcf058ab283a677b856c36357956cd5c82dd66bb4e5060f2e295ce086c69"},"spec":{"problem":"Decouple contract validation from `dist/` artifacts (or provide explicit `:build` path)","outcome":"Resolved (see decision record).","acceptance_criteria":["Resolved (see decision record)."],"inputs":["Decouple contract validation from `dist/` artifacts (or provide explicit `:build` path)"],"deliverables":["Resolved (see decision record)."],"scope":[],"risks":[],"contract_refs":[],"runbook":[]}}
{"id":"BL-0121","title":"Add a11y gating scripts and fix Storybook accessibility violations","type":"bug","status":"done","priority":"P2","tags":["decision"],"created_at":"2025-01-01T00:01:02.000Z","updated_at":"2025-01-01T00:01:02.000Z","completed_at":"2025-01-01T00:01:02.000Z","target":{"selector":"unbounded"},"deps":[],"evidence":[],"owner":"codex","notes":"Resolved (see decision record).","details":{"decision":["Added Storybook a11y scripts for CI and developer workflows; `test-storybook` now runs the a11y-focused runner.","Enforced document-level a11y checks (lang/title/main landmark) alongside canvas checks and standardized preview wrapper semantics.","Applied `interactionStory` to shell and tokens stories; updated shell layout/status semantics to avoid nested landmarks; adjusted token samples to pass contrast."],"tradeoffs":["`uik-shell-layout` no longer wraps content in an implicit landmark role; `uik-shell-status-bar` now uses `role=\"status\"` instead of `<footer>`."],"invariants":["Storybook a11y checks are a first-class test target (`npm run a11y:storybook`) and run in `npm run test`."]},"frozen":{"core_hash":"9b9ea76cfecfd61c965cc8dfd7dd4b95fcc18715e2df094fdd3d2da7ebf39fe4"},"spec":{"problem":"Add a11y gating scripts and fix Storybook accessibility violations","outcome":"Resolved (see decision record).","acceptance_criteria":["Resolved (see decision record)."],"inputs":["Add a11y gating scripts and fix Storybook accessibility violations"],"deliverables":["Resolved (see decision record)."],"scope":[],"risks":[],"contract_refs":[],"runbook":[]}}
{"id":"BL-0122","title":"Fix Storybook a11y issues in core primitives and prevent regressions","type":"bug","status":"done","priority":"P2","tags":["decision"],"created_at":"2025-01-01T00:01:03.000Z","updated_at":"2025-01-01T00:01:03.000Z","completed_at":"2025-01-01T00:01:03.000Z","target":{"selector":"unbounded"},"deps":[],"evidence":[],"owner":"codex","notes":"Resolved (see decision record).","details":{"decision":["Enabled shadow DOM traversal for Storybook a11y checks to surface component-internal violations.","Forwarded `aria-describedby` for `uik-button`, added modal semantics for `uik-dialog`, and added default labels for nav/tree/progress to avoid unlabeled landmark/control failures.","Defaulted `uik-icon` to `aria-hidden` when unlabeled to prevent stray icon exposure."],"tradeoffs":["Some components now provide fallback accessible names; consumers should still supply explicit labels for context-specific meaning."],"invariants":["Storybook a11y checks must include shadow DOM (`shadowDom: true`).","Unlabeled icons are hidden by default; meaningful icons require explicit labels."]},"frozen":{"core_hash":"78265685ac45dd99100951d538bfb3d3f141c6965d2885700ee45be51a4725c2"},"spec":{"problem":"Fix Storybook a11y issues in core primitives and prevent regressions","outcome":"Resolved (see decision record).","acceptance_criteria":["Resolved (see decision record)."],"inputs":["Fix Storybook a11y issues in core primitives and prevent regressions"],"deliverables":["Resolved (see decision record)."],"scope":[],"risks":[],"contract_refs":[],"runbook":[]}}
{"id":"BL-0010","title":"Remove Storybook non-tokenized backgrounds and Tailwind artifacts; standardize interaction story templates","type":"tooling","status":"done","priority":"P2","tags":["decision"],"created_at":"2025-01-01T00:01:04.000Z","updated_at":"2025-01-01T00:01:04.000Z","completed_at":"2025-01-01T00:01:04.000Z","target":{"selector":"unbounded"},"deps":[],"evidence":[],"owner":"codex","notes":"Resolved (see decision record).","details":{"decision":["Removed the non-tokenized Storybook background option and ensured background choices rely on `--uik-*` variables only.","Dropped unused Tailwind artifacts from `.storybook/` and replaced Tailwind class usage in token stories with token-driven CSS.","Centralized interaction story behavior via a shared `interactionStory` template and applied it across primitive stories."],"tradeoffs":["Story files now depend on the shared Storybook helper, which is a small coupling to `.storybook/`."],"invariants":["Storybook backgrounds and story styling must use `--uik-*` tokens only.","Interaction stories should use the shared `interactionStory` template instead of local `play` definitions."]},"frozen":{"core_hash":"dbd26b98147f2e174269bb42c0c55baf974d87467badc51544aef2333171f501"},"spec":{"problem":"Remove Storybook non-tokenized backgrounds and Tailwind artifacts; standardize interaction story templates","outcome":"Resolved (see decision record).","acceptance_criteria":["Resolved (see decision record)."],"inputs":["Remove Storybook non-tokenized backgrounds and Tailwind artifacts; standardize interaction story templates"],"deliverables":["Resolved (see decision record)."],"scope":[],"risks":[],"contract_refs":[],"runbook":[]}}
{"id":"BL-0116","title":"Add deterministic context-pack + internal tooling for the cognitive system","type":"tooling","status":"done","priority":"P2","tags":["decision"],"created_at":"2025-01-01T00:01:05.000Z","updated_at":"2025-01-01T00:01:05.000Z","completed_at":"2025-01-01T00:01:05.000Z","target":{"selector":"unbounded"},"deps":[],"evidence":[],"owner":"codex","notes":"Resolved (see decision record).","details":{"decision":["Added deterministic internal tools (`repo-index`, `context-pack`, `internal-lint`) under `.internal/tools/` with cached outputs in `.internal/.cache/`.","Added machine-parseable backlog metadata (`BL_META`) for all backlog entries and a deterministic lint gate for internal docs.","Documented roles and commands in `.internal/INDEX.md` and updated workflow/rules to start tasks with `context-pack`.","Added a worked example context pack under `.internal/examples/`."],"tradeoffs":["Introduces additional internal tooling and cache artifacts that must remain deterministic and minimal."],"invariants":["Backlog entries include `BL_META` and must pass `internal-lint`.","Tasks start with a budgeted `context-pack`; extra file reads require evidence or an `Uncertainty` entry."]},"frozen":{"core_hash":"a1836aac32d7a7295e358b6c3ba1b3ceed4186b09eb0d2eeaf66537f49eae5c4"},"spec":{"problem":"Add deterministic context-pack + internal tooling for the cognitive system","outcome":"Resolved (see decision record).","acceptance_criteria":["Resolved (see decision record)."],"inputs":["Add deterministic context-pack + internal tooling for the cognitive system"],"deliverables":["Resolved (see decision record)."],"scope":[],"risks":[],"contract_refs":[],"runbook":[]}}
{"id":"BL-0117","title":"No partial clipping: omit whole sections or fail on budget","type":"tooling","status":"done","priority":"P2","tags":["decision"],"created_at":"2025-01-01T00:01:06.000Z","updated_at":"2025-01-01T00:01:06.000Z","completed_at":"2025-01-01T00:01:06.000Z","target":{"selector":"unbounded"},"deps":[],"evidence":[],"owner":"codex","notes":"Resolved (see decision record).","details":{"decision":["Removed truncation from context pack sections; budget enforcement omits whole sections by priority only.","If the pack still exceeds the budget after dropping sections, the tool exits non-zero with required size.","Updated the example pack to reflect “no partial clipping” behavior."],"tradeoffs":["Small budgets may omit more context; consumers must increase budget when necessary."],"invariants":["Context packs never truncate included sections; budget enforcement omits whole sections or fails."]},"frozen":{"core_hash":"282e94bfbad117db734957ab90768ee20d6fa6aa66b449a57f0657bf99d42873"},"spec":{"problem":"No partial clipping: omit whole sections or fail on budget","outcome":"Resolved (see decision record).","acceptance_criteria":["Resolved (see decision record)."],"inputs":["No partial clipping: omit whole sections or fail on budget"],"deliverables":["Resolved (see decision record)."],"scope":[],"risks":[],"contract_refs":[],"runbook":[]}}
{"id":"BL-0119","title":"Budgeting contract for context packs (non-droppable units + atomic drops)","type":"contract","status":"done","priority":"P2","tags":["decision"],"created_at":"2025-01-01T00:01:07.000Z","updated_at":"2025-01-01T00:01:07.000Z","completed_at":"2025-01-01T00:01:07.000Z","target":{"selector":"unbounded"},"deps":[],"evidence":[],"owner":"codex","notes":"Resolved (see decision record).","details":{"decision":["Added non-droppable essentials (router + contract intros + state) and MIN_BUDGET checks with explicit errors.","Split PLATFORM_CONTRACT excerpts into atomic intro/subsection units for deterministic dropping without clipping.","Added deterministic drop order and regression checks (budget failure + deterministic output) in internal lint.","Documented the budgeting contract in `.internal/INDEX.md` and updated the example pack."],"tradeoffs":["Strict budgets can omit more context or fail; users must supply a sufficient budget for essentials."],"invariants":["No partial clipping; budget enforcement omits whole units or fails with required_min + essentials.","Context packs are deterministic for identical inputs and repo state."]},"frozen":{"core_hash":"47a2b21ca12a4c9c0ee87998461f685321e8a28c2ec15188cfb1eb6094162261"},"spec":{"problem":"Budgeting contract for context packs (non-droppable units + atomic drops)","outcome":"Resolved (see decision record).","acceptance_criteria":["Resolved (see decision record)."],"inputs":["Budgeting contract for context packs (non-droppable units + atomic drops)"],"deliverables":["Resolved (see decision record)."],"scope":[],"risks":[],"contract_refs":[],"runbook":[]}}
{"id":"BL-0120","title":"Align cognitive-system improvements to project + community efficiency","type":"tooling","status":"done","priority":"P2","tags":["decision"],"created_at":"2025-01-01T00:01:08.000Z","updated_at":"2025-01-01T00:01:08.000Z","completed_at":"2025-01-01T00:01:08.000Z","target":{"selector":"unbounded"},"deps":[],"evidence":[],"owner":"codex","notes":"Resolved (see decision record).","details":{"decision":["Codified that `.internal/` tool improvements target project/community efficiency (correctness, determinism, speed) over personal preference."],"tradeoffs":["Requires stating the community-facing benefit for cognitive-system changes."],"invariants":["Cognitive-system changes must justify improvements in project/community efficiency."]},"frozen":{"core_hash":"ae65b6c3b4da7450067793a79683bd687452847596e326948a25df170a6c0334"},"spec":{"problem":"Align cognitive-system improvements to project + community efficiency","outcome":"Resolved (see decision record).","acceptance_criteria":["Resolved (see decision record)."],"inputs":["Align cognitive-system improvements to project + community efficiency"],"deliverables":["Resolved (see decision record)."],"scope":[],"risks":[],"contract_refs":[],"runbook":[]}}
{"id":"BL-0118","title":"Treat `.internal/` tools as a perception layer and improve on limitations","type":"tooling","status":"done","priority":"P2","tags":["decision"],"created_at":"2025-01-01T00:01:09.000Z","updated_at":"2025-01-01T00:01:09.000Z","completed_at":"2025-01-01T00:01:09.000Z","target":{"selector":"unbounded"},"deps":[],"evidence":[],"owner":"codex","notes":"Resolved (see decision record).","details":{"decision":["Added explicit perception-layer maintenance steps to the workflow and codified the rule in knowledge + index.","Added a perception-layer example and enforced it via `internal-lint` checks."],"tradeoffs":["Internal lint is stricter and will fail if perception-layer guidance/examples drift."],"invariants":["When a tool limitation appears, it must be named, fixed in `.internal/`, and protected by a regression check."]},"frozen":{"core_hash":"308f0aef1e4c1de0fadc3d3873cc6b5e00249c53b928be2c6a8f55e8962d47bf"},"spec":{"problem":"Treat `.internal/` tools as a perception layer and improve on limitations","outcome":"Resolved (see decision record).","acceptance_criteria":["Resolved (see decision record)."],"inputs":["Treat `.internal/` tools as a perception layer and improve on limitations"],"deliverables":["Resolved (see decision record)."],"scope":[],"risks":[],"contract_refs":[],"runbook":[]}}
{"id":"BL-0064","title":"Rename `.internal/` files for role/scope clarity","type":"tooling","status":"done","priority":"P2","tags":["decision"],"created_at":"2025-01-01T00:01:10.000Z","updated_at":"2025-12-26T03:13:32.687Z","completed_at":"2025-01-01T00:01:10.000Z","target":{"selector":"unbounded"},"deps":[],"evidence":[],"owner":"codex","notes":"Resolved (see decision record).","details":{"decision":["Renamed the cognitive system files to explicit role/scope names (`queue store + generated views`, `queue store (version-targeted)`, `.internal/views/STATE_PRESENT.md`, `.internal/views/RELEASES.md`, `blocked queue items + evidence`, `quality gates + platform contract`, `internal-confidence + queue + gates`, `WORKFLOW_LOOP.md`, `.internal/tools/internal-gc.mjs`, `workflow loop + confidence + gates`, `milestone:1.0.0 criteria (queue items)`).","Updated document titles and added Purpose headers to mirror filenames and reduce ambiguity.","Updated internal references and router docs to the new names.","Removed redundant planning artifacts after consolidating actionable items into the long/medium-term and resolved-work models."],"tradeoffs":["Rename churn: existing links and muscle memory must be updated."],"invariants":["`.internal/` filenames and titles must explicitly state role + scope.","Any rename must update all references and router checklists."]},"frozen":{"core_hash":"07d3e502dd411b97eb54f4f287f04a93b71edaba2834225a2a0aafaa50e3f1ad"},"spec":{"problem":"Rename `.internal/` files for role/scope clarity","outcome":"Resolved (see decision record).","acceptance_criteria":["Resolved (see decision record)."],"inputs":["Rename `.internal/` files for role/scope clarity"],"deliverables":["Resolved (see decision record)."],"scope":[],"risks":[],"contract_refs":[],"runbook":[]}}
{"id":"BL-0062","title":"Add milestone meta-cognitive checkpoints and a 3-task self-observation experiment (governance)","type":"tooling","status":"done","priority":"P2","tags":["decision"],"created_at":"2025-01-01T00:01:11.000Z","updated_at":"2025-12-26T03:13:32.687Z","completed_at":"2025-01-01T00:01:11.000Z","target":{"selector":"unbounded"},"deps":[],"evidence":[],"owner":"codex","notes":"Resolved (see decision record).","details":{"decision":["Defined backlog milestones (entries tagged `Milestone`) and required a meta-cognitive checkpoint at milestone start/completion (read `DECISIONS/STATE/next/BACKLOG` and output a “trajectory review”).","Started a 3-task self-observation experiment template in `internal-confidence + queue + gates` and enforced it via `AGENTS.md`.","Kept `AGENTS.md` routers as local-only workspace constraints (gitignored) and enforced triggers via behavioral requirements when the files exist locally."],"tradeoffs":["Adds process overhead; mitigated by keeping the checkpoint review short and evidence-based."],"invariants":["Milestone boundaries must trigger a trajectory review (per `.internal/WORKFLOW_LOOP.md`).","The next 3 implementation tasks must record pre-code info needs and post-task postmortems in `internal-confidence + queue + gates`."]},"frozen":{"core_hash":"591469bdb52bff9b1f3ca9df484223454c36e4f3a7b1166621c72fcfbf0065d5"},"spec":{"problem":"Add milestone meta-cognitive checkpoints and a 3-task self-observation experiment (governance)","outcome":"Resolved (see decision record).","acceptance_criteria":["Resolved (see decision record)."],"inputs":["Add milestone meta-cognitive checkpoints and a 3-task self-observation experiment (governance)"],"deliverables":["Resolved (see decision record)."],"scope":[],"risks":[],"contract_refs":[],"runbook":[]}}
{"id":"BL-0090","title":"Tokenized breakpoints + `createBreakpointObserver()` helper","type":"tooling","status":"done","priority":"P2","tags":["decision"],"created_at":"2025-01-01T00:01:12.000Z","updated_at":"2025-01-01T00:01:12.000Z","completed_at":"2025-01-01T00:01:12.000Z","target":{"selector":"unbounded"},"deps":[],"evidence":[],"owner":"codex","notes":"Resolved (see decision record).","details":{"decision":["Implemented token-driven breakpoints and a `createBreakpointObserver()` helper that sets `data-uik-breakpoint`, enabling responsive docs UI without literal `@media` breakpoints."],"tradeoffs":["Adds a small runtime observer in exchange for token-driven responsive behavior."],"invariants":["Prefer token-driven responsive strategies over literal breakpoints where feasible."]},"frozen":{"core_hash":"34b7e021423b75699770ed011596946a24983f2abbf4bef11400ab3215db20ca"},"spec":{"problem":"Tokenized breakpoints + `createBreakpointObserver()` helper","outcome":"Resolved (see decision record).","acceptance_criteria":["Resolved (see decision record)."],"inputs":["Tokenized breakpoints + `createBreakpointObserver()` helper"],"deliverables":["Resolved (see decision record)."],"scope":[],"risks":[],"contract_refs":[],"runbook":[]}}
{"id":"BL-0091","title":"Overlay component tokens for dialog/popover/tooltip","type":"tooling","status":"done","priority":"P2","tags":["decision"],"created_at":"2025-01-01T00:01:13.000Z","updated_at":"2025-01-01T00:01:13.000Z","completed_at":"2025-01-01T00:01:13.000Z","target":{"selector":"unbounded"},"deps":[],"evidence":[],"owner":"codex","notes":"Resolved (see decision record).","details":{"decision":["Added component token hooks for dialog/popover/tooltip and consumed them in overlay primitives to avoid foundation-token leakage."],"tradeoffs":["Expands the component-token surface area and its maintenance cost."],"invariants":["Component-level styling hooks live in `ui-tokens` and are consumed as `--uik-component-*`."]},"frozen":{"core_hash":"d0d6259f6091d6523ec43a24312cd4bb00d0882e50919a2bbcd7716daf945fa5"},"spec":{"problem":"Overlay component tokens for dialog/popover/tooltip","outcome":"Resolved (see decision record).","acceptance_criteria":["Resolved (see decision record)."],"inputs":["Overlay component tokens for dialog/popover/tooltip"],"deliverables":["Resolved (see decision record)."],"scope":[],"risks":[],"contract_refs":[],"runbook":[]}}
{"id":"BL-0092","title":"Nav rail primitive owns roving focus; shell activity bar composes it","type":"tooling","status":"done","priority":"P2","tags":["decision"],"created_at":"2025-01-01T00:01:14.000Z","updated_at":"2025-01-01T00:01:14.000Z","completed_at":"2025-01-01T00:01:14.000Z","target":{"selector":"unbounded"},"deps":[],"evidence":[],"owner":"codex","notes":"Resolved (see decision record).","details":{"decision":["Added `uik-nav-rail` as the roving-focus primitive and rebased `uik-shell-activity-bar` on it, delegating keyboard behavior to primitives."],"tradeoffs":["Shell becomes thinner; behavior evolution happens in primitives first."],"invariants":["Roving focus logic belongs in primitives; shell composes and maps tokens/contracts."]},"frozen":{"core_hash":"3dc8a7063749f8b385e0f3a3f51ebaf45b75ae582c64aa03f9a52345764b7c4d"},"spec":{"problem":"Nav rail primitive owns roving focus; shell activity bar composes it","outcome":"Resolved (see decision record).","acceptance_criteria":["Resolved (see decision record)."],"inputs":["Nav rail primitive owns roving focus; shell activity bar composes it"],"deliverables":["Resolved (see decision record)."],"scope":[],"risks":[],"contract_refs":[],"runbook":[]}}
{"id":"BL-0093","title":"No framework adapters as a primary DX strategy","type":"tooling","status":"done","priority":"P2","tags":["decision"],"created_at":"2025-01-01T00:01:15.000Z","updated_at":"2025-01-01T00:01:15.000Z","completed_at":"2025-01-01T00:01:15.000Z","target":{"selector":"unbounded"},"deps":[],"evidence":[],"owner":"codex","notes":"Resolved (see decision record).","details":{"decision":["Rejected framework adapter ecosystems as the default integration path; integration guidance should be standards-first."],"tradeoffs":["Some consumers require recipes rather than turn-key wrappers."],"invariants":["DX improvements ship as standards-first primitives/patterns/tests/docs, not wrapper stacks."]},"frozen":{"core_hash":"81c3686e0f9a37716e163d1ebdddc1f49df9ef6eb7fb8393c4d9ada22ec20048"},"spec":{"problem":"No framework adapters as a primary DX strategy","outcome":"Resolved (see decision record).","acceptance_criteria":["Resolved (see decision record)."],"inputs":["No framework adapters as a primary DX strategy"],"deliverables":["Resolved (see decision record)."],"scope":[],"risks":[],"contract_refs":[],"runbook":[]}}
{"id":"BL-0094","title":"Package `AGENTS.md` are routers and “mind triggers”","type":"tooling","status":"done","priority":"P2","tags":["decision"],"created_at":"2025-01-01T00:01:16.000Z","updated_at":"2025-01-01T00:01:16.000Z","completed_at":"2025-01-01T00:01:16.000Z","target":{"selector":"unbounded"},"deps":[],"evidence":[],"owner":"codex","notes":"Resolved (see decision record).","details":{"decision":["Adopted per-package `AGENTS.md` to reduce repeated context reads and consistently trigger the learning loop."],"tradeoffs":["Router docs must be kept aligned with the true workflow to avoid drift (tracked as BL-0003)."],"invariants":["Always use the nearest in-scope `AGENTS.md` as the minimal context router."]},"frozen":{"core_hash":"1b3c870d98e99c13ac560c5a2b54bd58e81ff76a654f686cf30b42069b9b4a03"},"spec":{"problem":"Package `AGENTS.md` are routers and “mind triggers”","outcome":"Resolved (see decision record).","acceptance_criteria":["Resolved (see decision record)."],"inputs":["Package `AGENTS.md` are routers and “mind triggers”"],"deliverables":["Resolved (see decision record)."],"scope":[],"risks":[],"contract_refs":[],"runbook":[]}}
{"id":"BL-0095","title":"Suno Studio lives under `apps/` and is not an npm workspace member","type":"tooling","status":"done","priority":"P2","tags":["decision"],"created_at":"2025-01-01T00:01:17.000Z","updated_at":"2025-01-01T00:01:17.000Z","completed_at":"2025-01-01T00:01:17.000Z","target":{"selector":"unbounded"},"deps":[],"evidence":[],"owner":"codex","notes":"Resolved (see decision record).","details":{"decision":["Implemented `apps/suno-studio` outside npm workspaces, with dependencies pinned to published UIK versions."],"tradeoffs":["Separate build scripts/tooling; less shared infra."],"invariants":["Non-workspace apps must not destabilize workspace lint/test/build gates."]},"frozen":{"core_hash":"f2b7d6a4bc942fde4d9a1d7f829124ea38deac90c1c204d0c065a447e5a0d1fc"},"spec":{"problem":"Suno Studio lives under `apps/` and is not an npm workspace member","outcome":"Resolved (see decision record).","acceptance_criteria":["Resolved (see decision record)."],"inputs":["Suno Studio lives under `apps/` and is not an npm workspace member"],"deliverables":["Resolved (see decision record)."],"scope":[],"risks":[],"contract_refs":[],"runbook":[]}}
{"id":"BL-0096","title":"Contract outputs carry `runId` for audit linking","type":"contract","status":"done","priority":"P2","tags":["decision"],"created_at":"2025-01-01T00:01:18.000Z","updated_at":"2025-01-01T00:01:18.000Z","completed_at":"2025-01-01T00:01:18.000Z","target":{"selector":"unbounded"},"deps":[],"evidence":[],"owner":"codex","notes":"Resolved (see decision record).","details":{"decision":["Included `runId` in contract input/output payloads so pasted JSON can be linked deterministically to stored runs and audits."],"tradeoffs":["Requires propagating `runId` through pipelines and storage."],"invariants":["Contract workflows that support copy/paste must remain auditable without heuristics."]},"frozen":{"core_hash":"926c4e8ecfa10145d7d6cbd8ea460dfbb94b1d9dee7446f33cb397b4407ce954"},"spec":{"problem":"Contract outputs carry `runId` for audit linking","outcome":"Resolved (see decision record).","acceptance_criteria":["Resolved (see decision record)."],"inputs":["Contract outputs carry `runId` for audit linking"],"deliverables":["Resolved (see decision record)."],"scope":[],"risks":[],"contract_refs":[],"runbook":[]}}
{"id":"BL-0097","title":"Release numbering follows npm history (monotonic versions)","type":"tooling","status":"done","priority":"P2","tags":["decision"],"created_at":"2025-01-01T00:01:19.000Z","updated_at":"2025-01-01T00:01:19.000Z","completed_at":"2025-01-01T00:01:19.000Z","target":{"selector":"unbounded"},"deps":[],"evidence":[],"owner":"codex","notes":"Resolved (see decision record).","details":{"decision":["Chose monotonic npm versioning (e.g. publish next compatible version as `0.1.1`) and updated consumers to depend on `^0.1.1`."],"tradeoffs":["Version numbers may not match informal internal labels."],"invariants":["Published versions must be monotonic with npm history."]},"frozen":{"core_hash":"270ccb7df99dda9c5e55bb59abcf9780968965035bffd66ccc4f87b174393c58"},"spec":{"problem":"Release numbering follows npm history (monotonic versions)","outcome":"Resolved (see decision record).","acceptance_criteria":["Resolved (see decision record)."],"inputs":["Release numbering follows npm history (monotonic versions)"],"deliverables":["Resolved (see decision record)."],"scope":[],"risks":[],"contract_refs":[],"runbook":[]}}
{"id":"BL-0098","title":"Exclude non-workspace apps from monorepo lint","type":"tooling","status":"done","priority":"P2","tags":["decision"],"created_at":"2025-01-01T00:01:20.000Z","updated_at":"2025-01-01T00:01:20.000Z","completed_at":"2025-01-01T00:01:20.000Z","target":{"selector":"unbounded"},"deps":[],"evidence":[],"owner":"codex","notes":"Resolved (see decision record).","details":{"decision":["Ignored `llm-context-studio/**` in the monorepo ESLint config so workspace lint reflects only workspace packages."],"tradeoffs":["Non-workspace apps must enforce their own linting separately."],"invariants":["Workspace gates must remain deterministic and scoped."]},"frozen":{"core_hash":"bedfb0314f1c09133a71207a25590c0f34ebe7b9cd0c2dd836b146f26a21753f"},"spec":{"problem":"Exclude non-workspace apps from monorepo lint","outcome":"Resolved (see decision record).","acceptance_criteria":["Resolved (see decision record)."],"inputs":["Exclude non-workspace apps from monorepo lint"],"deliverables":["Resolved (see decision record)."],"scope":[],"risks":[],"contract_refs":[],"runbook":[]}}
{"id":"BL-0099","title":"Align tree data vocabulary on “item”","type":"tooling","status":"done","priority":"P2","tags":["decision"],"created_at":"2025-01-01T00:01:21.000Z","updated_at":"2025-01-01T00:01:21.000Z","completed_at":"2025-01-01T00:01:21.000Z","target":{"selector":"unbounded"},"deps":[],"evidence":[],"owner":"codex","notes":"Resolved (see decision record).","details":{"decision":["Standardized tree data vocabulary to “item” to prevent synonym drift across tree/nav contracts."],"tradeoffs":["Consumer type/name updates may be required."],"invariants":["One concept → one term; “item” is canonical for tree data."]},"frozen":{"core_hash":"b71549939a57effe08c6ff6cdbe4b653049a12c97b7d02423d1dcde84c95efb3"},"spec":{"problem":"Align tree data vocabulary on “item”","outcome":"Resolved (see decision record).","acceptance_criteria":["Resolved (see decision record)."],"inputs":["Align tree data vocabulary on “item”"],"deliverables":["Resolved (see decision record)."],"scope":[],"risks":[],"contract_refs":[],"runbook":[]}}
{"id":"BL-0100","title":"Move navigation + tree view into `ui-primitives`","type":"tooling","status":"done","priority":"P2","tags":["decision"],"created_at":"2025-01-01T00:01:22.000Z","updated_at":"2025-01-01T00:01:22.000Z","completed_at":"2025-01-01T00:01:22.000Z","target":{"selector":"unbounded"},"deps":[],"evidence":[],"owner":"codex","notes":"Resolved (see decision record).","details":{"decision":["Decided to build shared tree/navigation foundations in `ui-primitives` so APG semantics and reuse are centralized.","Note: historical notes are treated as non-actionable history if they cannot be validated; this decision is based on current repo constraints and goals."],"tradeoffs":["Expands primitives surface area; requires strict contract discipline."],"invariants":["Shared navigation semantics should live in primitives, not app-specific shells."]},"frozen":{"core_hash":"d31666489c956e24402275da54d5ed5d4fb5d2decf3b5c53c9bdacefcd2b897e"},"spec":{"problem":"Move navigation + tree view into `ui-primitives`","outcome":"Resolved (see decision record).","acceptance_criteria":["Resolved (see decision record)."],"inputs":["Move navigation + tree view into `ui-primitives`"],"deliverables":["Resolved (see decision record)."],"scope":[],"risks":[],"contract_refs":[],"runbook":[]}}
{"id":"BL-0101","title":"Internal cognitive system lifecycle stages + GC checklist","type":"tooling","status":"done","priority":"P2","tags":["decision"],"created_at":"2025-01-01T00:01:23.000Z","updated_at":"2025-01-01T00:01:23.000Z","completed_at":"2025-01-01T00:01:23.000Z","target":{"selector":"unbounded"},"deps":[],"evidence":[],"owner":"codex","notes":"Resolved (see decision record).","details":{"decision":["Adopted lifecycle stages (EPHEMERAL/CANDIDATE/VALIDATED) and a GC checklist to keep the cognitive system compact and restartable."],"tradeoffs":["Requires deliberate pruning instead of append-only logs."],"invariants":["Cognitive system updates must replace contradictions and prune duplicates; no append-only drift."]},"frozen":{"core_hash":"21faaa51f2c22992f16be2559c8138695a4a9364f2c4adcf30f2030ed344b82a"},"spec":{"problem":"Internal cognitive system lifecycle stages + GC checklist","outcome":"Resolved (see decision record).","acceptance_criteria":["Resolved (see decision record)."],"inputs":["Internal cognitive system lifecycle stages + GC checklist"],"deliverables":["Resolved (see decision record)."],"scope":[],"risks":[],"contract_refs":[],"runbook":[]}}
{"id":"BL-0102","title":"Reward system + Adjacent-Wins gate","type":"tooling","status":"done","priority":"P2","tags":["decision"],"created_at":"2025-01-01T00:01:24.000Z","updated_at":"2025-01-01T00:01:24.000Z","completed_at":"2025-01-01T00:01:24.000Z","target":{"selector":"unbounded"},"deps":[],"evidence":[],"owner":"codex","notes":"Resolved (see decision record).","details":{"decision":["Adopted explicit optimization targets and required an Adjacent-Wins scan at task start."],"tradeoffs":["Limits opportunistic refactors; requires discipline in scoping."],"invariants":["Adjacent improvements must tie directly to acceptance criteria or be logged as backlog work."]},"frozen":{"core_hash":"de9a0ccedde85e7fedbcfbed447ef74bf2012767aaea9a314e1c0dd5bda876c2"},"spec":{"problem":"Reward system + Adjacent-Wins gate","outcome":"Resolved (see decision record).","acceptance_criteria":["Resolved (see decision record)."],"inputs":["Reward system + Adjacent-Wins gate"],"deliverables":["Resolved (see decision record)."],"scope":[],"risks":[],"contract_refs":[],"runbook":[]}}
{"id":"BL-0103","title":"Ship tree view as a `ui-shell` structure (superseded)","type":"tooling","status":"done","priority":"P2","tags":["decision"],"created_at":"2025-01-01T00:01:25.000Z","updated_at":"2025-01-01T00:01:25.000Z","completed_at":"2025-01-01T00:01:25.000Z","target":{"selector":"unbounded"},"deps":[],"evidence":[],"owner":"codex","notes":"Resolved (see decision record).","details":{"decision":["Initially shipped tree view in shell; later superseded by the primitives-first tree view direction."],"tradeoffs":["Some shell contracts may be legacy; requires explicit deprecation paths."],"invariants":["Prefer primitives for reusable interaction widgets; shell structures should compose them."]},"frozen":{"core_hash":"c03ab49a6b5c7ca724a1cb219ddcffd0fc1ab8d5808f557bcac758737581c479"},"spec":{"problem":"Ship tree view as a `ui-shell` structure (superseded)","outcome":"Resolved (see decision record).","acceptance_criteria":["Resolved (see decision record)."],"inputs":["Ship tree view as a `ui-shell` structure (superseded)"],"deliverables":["Resolved (see decision record)."],"scope":[],"risks":[],"contract_refs":[],"runbook":[]}}
{"id":"BL-0104","title":"Docs site as Vite + UIK components (no framework runtime)","type":"doc","status":"done","priority":"P2","tags":["decision"],"created_at":"2025-01-01T00:01:26.000Z","updated_at":"2025-01-01T00:01:26.000Z","completed_at":"2025-01-01T00:01:26.000Z","target":{"selector":"unbounded"},"deps":[],"evidence":[],"owner":"codex","notes":"Resolved (see decision record).","details":{"decision":["Added `packages/docs` as a Vite app that consumes `ui-tokens/base.css` and composes `ui-primitives` + `ui-shell`."],"tradeoffs":["Must implement routing/nav UX directly without a framework router."],"invariants":["Docs must not introduce framework coupling into runtime packages."]},"frozen":{"core_hash":"9d99fe0fde93906a9ad8cf440353952a2a449a17e815bfbbbfbfa67fac358cda"},"spec":{"problem":"Docs site as Vite + UIK components (no framework runtime)","outcome":"Resolved (see decision record).","acceptance_criteria":["Resolved (see decision record)."],"inputs":["Docs site as Vite + UIK components (no framework runtime)"],"deliverables":["Resolved (see decision record)."],"scope":[],"risks":[],"contract_refs":[],"runbook":[]}}
{"id":"BL-0105","title":"Docs content generated from package sources","type":"doc","status":"done","priority":"P2","tags":["decision"],"created_at":"2025-01-01T00:01:27.000Z","updated_at":"2025-01-01T00:01:27.000Z","completed_at":"2025-01-01T00:01:27.000Z","target":{"selector":"unbounded"},"deps":[],"evidence":[],"owner":"codex","notes":"Resolved (see decision record).","details":{"decision":["Generated docs content from markdown sources into deterministic JSON consumed by the docs frontend; wired generation into docs build/dev/test."],"tradeoffs":["Adds a generation pipeline that must remain deterministic."],"invariants":["Docs content source-of-truth lives in package/doc markdown, not hand-authored frontend data."]},"frozen":{"core_hash":"6e49e60eadaeb4a36b82fc6f0da32c94f3217074ec9a6974f58249c6b4acd3db"},"spec":{"problem":"Docs content generated from package sources","outcome":"Resolved (see decision record).","acceptance_criteria":["Resolved (see decision record)."],"inputs":["Docs content generated from package sources"],"deliverables":["Resolved (see decision record)."],"scope":[],"risks":[],"contract_refs":[],"runbook":[]}}
{"id":"BL-0106","title":"Contract registry + validation pipeline","type":"contract","status":"done","priority":"P2","tags":["decision"],"created_at":"2025-01-01T00:01:28.000Z","updated_at":"2025-01-01T00:01:28.000Z","completed_at":"2025-01-01T00:01:28.000Z","target":{"selector":"unbounded"},"deps":[],"evidence":[],"owner":"codex","notes":"Resolved (see decision record).","details":{"decision":["Added package-level contract registries for primitives/shell, plus a validator and primitive scaffolder."],"tradeoffs":["Requires continued investment in validation correctness (see BL-0005 and BL-0006)."],"invariants":["Public contracts must be validated against registries/CEM/tokens/docs before release."]},"frozen":{"core_hash":"f07d857cff9f86f4629435e1627f5f28f805478c6d924244064b73eb8d74ca26"},"spec":{"problem":"Contract registry + validation pipeline","outcome":"Resolved (see decision record).","acceptance_criteria":["Resolved (see decision record)."],"inputs":["Contract registry + validation pipeline"],"deliverables":["Resolved (see decision record)."],"scope":[],"risks":[],"contract_refs":[],"runbook":[]}}
{"id":"BL-0107","title":"Contracts generated from JSDoc annotations","type":"contract","status":"done","priority":"P2","tags":["decision"],"created_at":"2025-01-01T00:01:29.000Z","updated_at":"2025-01-01T00:01:29.000Z","completed_at":"2025-01-01T00:01:29.000Z","target":{"selector":"unbounded"},"deps":[],"evidence":[],"owner":"codex","notes":"Resolved (see decision record).","details":{"decision":["Chose JSDoc-in-source authoring plus deterministic generation for contract registries to reduce manual drift."],"tradeoffs":["Requires annotation discipline and tooling upkeep."],"invariants":["Contract metadata should live close to implementation and be generated deterministically."]},"frozen":{"core_hash":"6e4eaee00362bc37412db987d66e23b13fb015a42c4e202ad0cf9d554d64eb07"},"spec":{"problem":"Contracts generated from JSDoc annotations","outcome":"Resolved (see decision record).","acceptance_criteria":["Resolved (see decision record)."],"inputs":["Contracts generated from JSDoc annotations"],"deliverables":["Resolved (see decision record)."],"scope":[],"risks":[],"contract_refs":[],"runbook":[]}}
{"id":"BL-0108","title":"External apps sandbox (`external/`) to avoid workspace drift","type":"tooling","status":"done","priority":"P2","tags":["decision"],"created_at":"2025-01-01T00:01:30.000Z","updated_at":"2025-01-01T00:01:30.000Z","completed_at":"2025-01-01T00:01:30.000Z","target":{"selector":"unbounded"},"deps":[],"evidence":[],"owner":"codex","notes":"Resolved (see decision record).","details":{"decision":["Added a gitignored `external/` sandbox (except README) for non-workspace apps."],"tradeoffs":["External apps are less integrated with workspace tooling."],"invariants":["Non-workspace apps must not affect workspace scripts or CI gates."]},"frozen":{"core_hash":"8fc7138183dc598109006fdba7f83d46b30bc4f0e3539f5800739b1bd6f8cb05"},"spec":{"problem":"External apps sandbox (`external/`) to avoid workspace drift","outcome":"Resolved (see decision record).","acceptance_criteria":["Resolved (see decision record)."],"inputs":["External apps sandbox (`external/`) to avoid workspace drift"],"deliverables":["Resolved (see decision record)."],"scope":[],"risks":[],"contract_refs":[],"runbook":[]}}
{"id":"BL-0109","title":"Shell router for docs navigation","type":"doc","status":"done","priority":"P2","tags":["decision"],"created_at":"2025-01-01T00:01:31.000Z","updated_at":"2025-01-01T00:01:31.000Z","completed_at":"2025-01-01T00:01:31.000Z","target":{"selector":"unbounded"},"deps":[],"evidence":[],"owner":"codex","notes":"Resolved (see decision record).","details":{"decision":["Used `createUikShellRouter` with activity bar + tree view navigation and a mobile page selector to keep docs framework-light while dogfooding shell patterns."],"tradeoffs":["Requires explicit state/history handling without framework routing."],"invariants":["Routing must remain standards-first and framework-light."]},"frozen":{"core_hash":"e9bd68f98abd42d3eb7fee764f700f064a01d225c4bbe05bc2d505b9a3d9c7ba"},"spec":{"problem":"Shell router for docs navigation","outcome":"Resolved (see decision record).","acceptance_criteria":["Resolved (see decision record)."],"inputs":["Shell router for docs navigation"],"deliverables":["Resolved (see decision record)."],"scope":[],"risks":[],"contract_refs":[],"runbook":[]}}
{"id":"BL-0110","title":"Internal working cognitive system is local-only","type":"tooling","status":"done","priority":"P2","tags":["decision"],"created_at":"2025-01-01T00:01:32.000Z","updated_at":"2025-01-01T00:01:32.000Z","completed_at":"2025-01-01T00:01:32.000Z","target":{"selector":"unbounded"},"deps":[],"evidence":[],"owner":"codex","notes":"Resolved (see decision record).","details":{"decision":["Kept the cognitive system in `.internal/` and kept public docs limited to package `README.md` files."],"tradeoffs":["Internal docs must be maintained separately from published docs/contracts."],"invariants":["Public docs surface is package READMEs; the cognitive system is not a published contract."]},"frozen":{"core_hash":"d9d85a987b099036fb3bb456fcb27d5590401d7d35fda10a0acd0beac7a862f6"},"spec":{"problem":"Internal working cognitive system is local-only","outcome":"Resolved (see decision record).","acceptance_criteria":["Resolved (see decision record)."],"inputs":["Internal working cognitive system is local-only"],"deliverables":["Resolved (see decision record)."],"scope":[],"risks":[],"contract_refs":[],"runbook":[]}}
{"id":"BL-0111","title":"Docs URLs are a contract (History API routing)","type":"doc","status":"done","priority":"P2","tags":["decision"],"created_at":"2025-01-01T00:01:33.000Z","updated_at":"2025-01-01T00:01:33.000Z","completed_at":"2025-01-01T00:01:33.000Z","target":{"selector":"unbounded"},"deps":[],"evidence":[],"owner":"codex","notes":"Resolved (see decision record).","details":{"decision":["Driven docs routing from `window.location.pathname` and updated it via `history.pushState/replaceState`, keeping heading anchors as hash links."],"tradeoffs":["Requires careful popstate handling and deep-link stability."],"invariants":["Docs URLs must be deep-linkable and reloadable; headings must be linkable."]},"frozen":{"core_hash":"341b6617e21e8707474ab1a8c29b07e0dac38beadfe08ae78e146e82927c3dc9"},"spec":{"problem":"Docs URLs are a contract (History API routing)","outcome":"Resolved (see decision record).","acceptance_criteria":["Resolved (see decision record)."],"inputs":["Docs URLs are a contract (History API routing)"],"deliverables":["Resolved (see decision record)."],"scope":[],"risks":[],"contract_refs":[],"runbook":[]}}
{"id":"BL-0112","title":"Docs generator emits nested TOC + deterministic heading anchors","type":"doc","status":"done","priority":"P2","tags":["decision"],"created_at":"2025-01-01T00:01:34.000Z","updated_at":"2025-01-01T00:01:34.000Z","completed_at":"2025-01-01T00:01:34.000Z","target":{"selector":"unbounded"},"deps":[],"evidence":[],"owner":"codex","notes":"Resolved (see decision record).","details":{"decision":["Generated deterministic slugs for sections + headings and emitted a nested `toc` array per page."],"tradeoffs":["Any slug algorithm change becomes a compatibility concern for deep links."],"invariants":["Heading anchors must be deterministic and stable."]},"frozen":{"core_hash":"c54ca8439b8b2e7f0cb032f19376a4fdd1964ced3a5c40cfe23dd344b1f63e31"},"spec":{"problem":"Docs generator emits nested TOC + deterministic heading anchors","outcome":"Resolved (see decision record).","acceptance_criteria":["Resolved (see decision record)."],"inputs":["Docs generator emits nested TOC + deterministic heading anchors"],"deliverables":["Resolved (see decision record)."],"scope":[],"risks":[],"contract_refs":[],"runbook":[]}}
{"id":"BL-0113","title":"Docs axe gate disables landmark “top-level” rules (temporary policy)","type":"doc","status":"done","priority":"P2","tags":["decision"],"created_at":"2025-01-01T00:01:35.000Z","updated_at":"2025-01-01T00:01:35.000Z","completed_at":"2025-01-01T00:01:35.000Z","target":{"selector":"unbounded"},"deps":[],"evidence":[],"owner":"codex","notes":"Resolved (see decision record).","details":{"decision":["Disabled `landmark-*-is-top-level` axe rules for docs runs while keeping other rules enabled."],"tradeoffs":["Must maintain compensating a11y checks or revisit policy later (tracked as BL-0029)."],"invariants":["Disabled a11y rules require explicit rationale and a follow-up plan."]},"frozen":{"core_hash":"321a5ffa78aaef560147c7c8cef4c7f4e37e3de7bc046b83b632a5c584bda837"},"spec":{"problem":"Docs axe gate disables landmark “top-level” rules (temporary policy)","outcome":"Resolved (see decision record).","acceptance_criteria":["Resolved (see decision record)."],"inputs":["Docs axe gate disables landmark “top-level” rules (temporary policy)"],"deliverables":["Resolved (see decision record)."],"scope":[],"risks":[],"contract_refs":[],"runbook":[]}}
{"id":"BL-0114","title":"Implement docs “URLs are a contract” slice (routing, anchors/TOC, code copy, axe smoke test)","type":"doc","status":"done","priority":"P2","tags":["decision"],"created_at":"2025-01-01T00:01:36.000Z","updated_at":"2025-12-26T03:13:32.687Z","completed_at":"2025-01-01T00:01:36.000Z","target":{"selector":"unbounded"},"deps":[],"evidence":[],"owner":"codex","notes":"Resolved (see decision record).","details":{"decision":["Implemented the first docs competitive baseline slice: History API routing (deep-linkable paths), deterministic heading anchors + nested TOC, code block copy UX, and an axe=0 smoke test.","Adjusted minimal shell layout/landmark surfaces used by docs to avoid drift and keep contracts explicit.","Changed (from a prior `.internal/views/STATE_PRESENT.md` record): `packages/docs/package.json`, `packages/docs/src/app.ts`, `packages/docs/src/content.ts`, `packages/docs/src/styles.css`, `packages/docs/tools/generate-docs-content.mjs`, `packages/docs/tests/docs-a11y.browser.test.ts`, `packages/docs/tests/docs-navigation.browser.test.ts`, `packages/ui-shell/src/structures/uik-shell-layout.ts`, `packages/ui-shell/src/structures/uik-shell-sidebar.ts`, `packages/ui-shell/src/structures/uik-shell-secondary-sidebar.ts`, `.internal/views/RELEASES.md`, `.internal/views/STATE_PRESENT.md`."],"tradeoffs":["Adds more “product” expectations to docs, increasing the maintenance surface for browser tests and a11y gates."],"invariants":["Docs navigation must be deep-linkable via pathname; headings must be linkable and appear in TOC.","Docs changes that affect navigation/a11y must ship with browser tests and remain axe=0."]},"frozen":{"core_hash":"48624fbf505659efa3450955b167549b81370db4f7a13519a36b879f7dcc5b4b"},"spec":{"problem":"Implement docs “URLs are a contract” slice (routing, anchors/TOC, code copy, axe smoke test)","outcome":"Resolved (see decision record).","acceptance_criteria":["Resolved (see decision record)."],"inputs":["Implement docs “URLs are a contract” slice (routing, anchors/TOC, code copy, axe smoke test)"],"deliverables":["Resolved (see decision record)."],"scope":[],"risks":[],"contract_refs":[],"runbook":[]}}
{"id":"BL-0115","title":"Add Escape dismissal + focus return to `<uik-shell-secondary-sidebar>`","type":"tooling","status":"done","priority":"P2","tags":["decision"],"created_at":"2025-01-01T00:01:37.000Z","updated_at":"2025-12-26T03:13:32.687Z","completed_at":"2025-01-01T00:01:37.000Z","target":{"selector":"unbounded"},"deps":[],"evidence":[],"owner":"codex","notes":"Resolved (see decision record).","details":{"decision":["Added Escape handling and a focus return mechanism to `<uik-shell-secondary-sidebar>` via `focusReturnTarget` (selector or element) with a fallback to the previously focused element.","Documented and tested the contract, ensuring keyboard users can dismiss and regain context.","Changed (from a prior `.internal/views/STATE_PRESENT.md` record): `packages/ui-shell/src/structures/uik-shell-secondary-sidebar.ts`, `packages/ui-shell/tests/uik-shell-secondary-sidebar.browser.test.ts`, `packages/ui-shell/README.md`, `packages/docs/src/content.ts`, `packages/docs/src/app.ts`, `.internal/views/STATE_PRESENT.md`."],"tradeoffs":["Adds more overlay-like semantics to a shell structure, requiring careful alignment with overlay contracts going forward."],"invariants":["Closable regions/overlays must be dismissible via keyboard (Escape where appropriate) and should restore focus to the opener when closed."]},"frozen":{"core_hash":"60b1eed6a9b7989dfa5fe75444bf05c18df37c74b644d98782d892f4b0516267"},"spec":{"problem":"Add Escape dismissal + focus return to `<uik-shell-secondary-sidebar>`","outcome":"Resolved (see decision record).","acceptance_criteria":["Resolved (see decision record)."],"inputs":["Add Escape dismissal + focus return to `<uik-shell-secondary-sidebar>`"],"deliverables":["Resolved (see decision record)."],"scope":[],"risks":[],"contract_refs":[],"runbook":[]}}
{"id":"BL-0123","title":"Cognitive system growth control + enforced quality gate","type":"tooling","status":"done","priority":"P1","tags":["governance","quality","tooling"],"created_at":"2025-12-26T01:34:46.372Z","updated_at":"2025-12-26T02:11:33.843Z","target":{"selector":"unbounded"},"deps":[],"evidence":[".internal/tools/internal-gc.mjs;.internal/tools/quality-gate.mjs;.internal/QUALITY_GATES.md"],"owner":"codex","notes":"Reduce .internal token growth with lossless archiving + enforce repo quality gates.","completed_at":"2025-12-26T02:11:33.843Z","frozen":{"core_hash":"fba128bb2660be78026629337ee71c075d08d4484d0379e430947bdfab2e370c"},"spec":{"problem":"Cognitive system growth control + enforced quality gate","outcome":"Reduce .internal token growth with lossless archiving + enforce repo quality gates.","acceptance_criteria":["Reduce .internal token growth with lossless archiving + enforce repo quality gates."],"inputs":["Cognitive system growth control + enforced quality gate"],"deliverables":["Reduce .internal token growth with lossless archiving + enforce repo quality gates."],"scope":[],"risks":[],"contract_refs":[],"runbook":[]}}
{"id":"BL-0124","title":"Internal noise purge + confidence mechanism + 0.1.2 release policy","type":"tooling","status":"done","priority":"P1","tags":["governance","release","tooling"],"created_at":"2025-12-26T02:33:06.592Z","updated_at":"2025-12-26T02:56:13.706Z","target":{"selector":"exact","value":"0.1.2"},"deps":[],"evidence":[".internal/INDEX.md;.internal/WORKFLOW_LOOP.md;.internal/tools/internal-gc.mjs;.internal/tools/internal-lint.mjs"],"owner":"codex","notes":"Reduce .internal noise while preserving structure; add deterministic confidence checks; enforce version-linked open queue items; prep 0.1.2 process.","completed_at":"2025-12-26T02:56:13.706Z","frozen":{"core_hash":"73f4fc5ea95767dccc4c28b67d85f55e1e827751dddf5b39b3b07321d6bc3d31"},"spec":{"problem":"Internal noise purge + confidence mechanism + 0.1.2 release policy","outcome":"Reduce .internal noise while preserving structure; add deterministic confidence checks; enforce version-linked open queue items; prep 0.1.2 process.","acceptance_criteria":["Reduce .internal noise while preserving structure; add deterministic confidence checks; enforce version-linked open queue items; prep 0.1.2 process."],"inputs":["Internal noise purge + confidence mechanism + 0.1.2 release policy"],"deliverables":["Reduce .internal noise while preserving structure; add deterministic confidence checks; enforce version-linked open queue items; prep 0.1.2 process."],"scope":[],"risks":[],"contract_refs":[],"runbook":[]}}
{"id":"BL-0126","title":"0.1.2 major readiness gate (foundation + core widgets)","type":"contract","status":"done","priority":"P1","tags":["governance","release"],"created_at":"2025-12-26T03:29:15.679Z","updated_at":"2025-12-27T14:38:05.000Z","target":{"selector":"exact","value":"0.1.2"},"deps":["BL-0004","BL-0007","BL-0008","BL-0011","BL-0012","BL-0013","BL-0014","BL-0031","BL-0038","BL-0063","BL-0009","BL-0017","BL-0026","BL-0028","BL-0040","BL-0041","BL-0151","BL-0152","BL-0153"],"evidence":[],"owner":"codex","notes":"Treat 0.1.2 as a major bump; release stays blocked until these foundation + core widget items are done. Scope expanded to include BL-0009, BL-0017, BL-0026, BL-0028, BL-0039, BL-0040, BL-0041.","details":{"contract_reflection":{"delta_scan":{"inputs":["git status --short","rg -n \"createOutsideDismissController\" packages/ui-primitives/src"],"findings":["uik-combobox installs outside-dismiss listeners without disconnecting on detach (document listener leak)."],"evidence":["packages/ui-primitives/src/composed/collection/uik-listbox/uik-combobox.ts","packages/ui-primitives/src/internal/overlay/dismiss.ts"]},"system_scan":{"inputs":["rg -n \"attachInternals|formAssociated\" packages/ui-primitives/src","PLATFORM_CONTRACT §7.2"],"findings":["Form-associated primitives lack a documented/implemented ElementInternals fallback mode."],"evidence":["packages/ui-primitives/src/atomic/control/uik-input/element.ts","packages/ui-primitives/src/atomic/control/uik-select/element.ts","packages/ui-primitives/src/composed/collection/uik-listbox/uik-combobox.ts","packages/ui-primitives/README.md"]},"queue_items":["BL-0161","BL-0162"]}},"completed_at":"2025-12-27T02:59:38.978Z","frozen":{"core_hash":"fb2306c79ac6bc36fea4235634fa47a91967b1f5654c9fcd48445bdba1ab82e1"},"spec":{"problem":"0.1.2 major readiness gate (foundation + core widgets)","outcome":"Treat 0.1.2 as a major bump; release stays blocked until these foundation + core widget items are done. Scope expanded to include BL-0009, BL-0017, BL-0026, BL-0028, BL-0039, BL-0040, BL-0041.","acceptance_criteria":["Treat 0.1.2 as a major bump; release stays blocked until these foundation + core widget items are done. Scope expanded to include BL-0009, BL-0017, BL-0026, BL-0028, BL-0039, BL-0040, BL-0041."],"inputs":["0.1.2 major readiness gate (foundation + core widgets)"],"deliverables":["Treat 0.1.2 as a major bump; release stays blocked until these foundation + core widget items are done. Scope expanded to include BL-0009, BL-0017, BL-0026, BL-0028, BL-0039, BL-0040, BL-0041."],"scope":[],"risks":[],"contract_refs":[],"runbook":[]}}
{"id":"BL-0127","title":"Quality gate execution must surface failures consistently","type":"tooling","status":"done","priority":"P1","tags":["governance","quality","tooling"],"created_at":"2025-12-26T03:59:44.356Z","updated_at":"2025-12-26T04:20:30.739Z","target":{"selector":"exact","value":"0.1.2"},"deps":[],"evidence":[],"owner":"codex","notes":"Acceptance: quality gate run (node .internal/tools/quality-gate.mjs --target 0.1.2) reports failures and exits non-zero; documented usage path is clear. Risks: regressions if gate silently ignores failures or missing scripts.","completed_at":"2025-12-26T04:20:30.739Z","frozen":{"core_hash":"833a9c6c06e1c08e5515609eaee448ef9287e8a813387bcae418ef1357b57cc5"},"spec":{"problem":"Quality gate execution must surface failures consistently","outcome":"Acceptance: quality gate run (node .internal/tools/quality-gate.mjs --target 0.1.2) reports failures and exits non-zero; documented usage path is clear. Risks: regressions if gate silently ignores failures or missing scripts.","acceptance_criteria":["Acceptance: quality gate run (node .internal/tools/quality-gate.mjs --target 0.1.2) reports failures and exits non-zero; documented usage path is clear. Risks: regressions if gate silently ignores failures or missing scripts."],"inputs":["Quality gate execution must surface failures consistently"],"deliverables":["Acceptance: quality gate run (node .internal/tools/quality-gate.mjs --target 0.1.2) reports failures and exits non-zero; documented usage path is clear. Risks: regressions if gate silently ignores failures or missing scripts."],"scope":[],"risks":[],"contract_refs":[],"runbook":[]}}
{"id":"BL-0128","title":"Fix docs build failures","type":"bug","status":"done","priority":"P1","tags":["build","docs","quality"],"created_at":"2025-12-26T03:59:48.769Z","updated_at":"2025-12-26T04:20:30.792Z","target":{"selector":"exact","value":"0.1.2"},"deps":[],"evidence":[],"owner":"codex","notes":"Acceptance: npm -w packages/docs run build exits 0 on clean workspace. Risks: generator/build order or missing assets cause regressions.","completed_at":"2025-12-26T04:20:30.792Z","frozen":{"core_hash":"6d35d8c16b53d42def8457692d8694747155d10a6eab3166a272e06781f16139"},"spec":{"problem":"Fix docs build failures","outcome":"Acceptance: npm -w packages/docs run build exits 0 on clean workspace. Risks: generator/build order or missing assets cause regressions.","acceptance_criteria":["Acceptance: npm -w packages/docs run build exits 0 on clean workspace. Risks: generator/build order or missing assets cause regressions."],"inputs":["Fix docs build failures"],"deliverables":["Acceptance: npm -w packages/docs run build exits 0 on clean workspace. Risks: generator/build order or missing assets cause regressions."],"scope":[],"risks":[],"contract_refs":[],"runbook":[]}}
{"id":"BL-0129","title":"Resolve ESLint failures in repo lint gate","type":"quality-debt","status":"done","priority":"P1","tags":["lint","quality","tooling"],"created_at":"2025-12-26T03:59:52.435Z","updated_at":"2025-12-26T04:20:30.937Z","target":{"selector":"exact","value":"0.1.2"},"deps":[],"evidence":[],"owner":"codex","notes":"Acceptance: npm run lint exits 0 with no warnings. Risks: fixing lint may require refactors or config changes; avoid masking errors with ignores.","completed_at":"2025-12-26T04:20:30.937Z","frozen":{"core_hash":"0c166d07ddd1b7db3aca040f455545ea2d01ee89846a76e298cf62ce202197fa"},"spec":{"problem":"Resolve ESLint failures in repo lint gate","outcome":"Acceptance: npm run lint exits 0 with no warnings. Risks: fixing lint may require refactors or config changes; avoid masking errors with ignores.","acceptance_criteria":["Acceptance: npm run lint exits 0 with no warnings. Risks: fixing lint may require refactors or config changes; avoid masking errors with ignores."],"inputs":["Resolve ESLint failures in repo lint gate"],"deliverables":["Acceptance: npm run lint exits 0 with no warnings. Risks: fixing lint may require refactors or config changes; avoid masking errors with ignores."],"scope":[],"risks":[],"contract_refs":[],"runbook":[]}}
{"id":"BL-0130","title":"Resolve contract warnings for non-component tokens (dialog/popover/tooltip/separator)","type":"debt","status":"queued","priority":"P2","tags":["contract","tokens","ui-primitives"],"created_at":"2025-12-26T04:21:04.197Z","updated_at":"2025-12-27T20:50:19.586Z","target":{"selector":"range","value":"0.1.x"},"deps":[],"evidence":["Contracts validate warnings during npm run build (dialog/popover/tooltip/separator css vars not component tokens)."],"owner":"codex","notes":"Acceptance: component tokens exist for scrim/z/local/sep vars and components consume --uik-component-*; contract warnings are eliminated. Risks: token migration touches multiple primitives and ui-tokens outputs.","details":{"effort":"M","rationale":"Resolve contract warnings for non-component tokens by defining component hooks and updating consumers."},"spec":{"problem":"Resolve contract warnings for non-component tokens by defining component hooks and updating consumers.","outcome":"Component tokens exist for dialog/popover/tooltip/separator hooks and components consume --uik-component-*.","acceptance_criteria":["Component tokens exist for dialog/popover/tooltip/separator hooks and components consume --uik-component-*.","Contract warnings are eliminated during token build/validation."],"inputs":["Resolve contract warnings for non-component tokens by defining component hooks and updating consumers."],"deliverables":["Component tokens exist for dialog/popover/tooltip/separator hooks and components consume --uik-component-*."],"scope":["packages/ui-tokens/tokens/components/**","packages/ui-primitives/**"],"risks":["Token migration touches multiple primitives and ui-tokens outputs."],"contract_refs":[{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"§4"}],"runbook":[]}}
{"id":"BL-0151","title":"Improve Baseline Support Matrix content","type":"doc","status":"done","priority":"P2","tags":["baseline","contract","docs"],"created_at":"2025-12-26T05:51:01.506Z","updated_at":"2025-12-27T20:50:19.586Z","target":{"selector":"exact","value":"0.1.2"},"deps":[],"evidence":["Request: Baseline Support Matrix must be more competitive than a link table."],"owner":"codex","notes":"Expand baseline-support docs with policy, gating, and usage detail.","details":{"rationale":"Baseline documentation must explain gating policy and usage impact, not just list links.","effort":"S"},"completed_at":"2025-12-26T05:52:45.865Z","frozen":{"core_hash":"dcd2e44d8e6b225f4ae8b7dc40a15a4b1e7cd2911534d5bbcf07287b2f18ecae"},"spec":{"problem":"Baseline documentation must explain gating policy and usage impact, not just list links.","outcome":"Baseline support page explains Baseline Widely/Newly/Not Baseline and the required gating/fallback policy.","acceptance_criteria":["Baseline support page explains Baseline Widely/Newly/Not Baseline and the required gating/fallback policy.","Matrix includes usage impact and explicit gating/fallback guidance where required.","Page highlights how UIK applies Baseline policy to docs/primitives/shell."],"inputs":["Baseline documentation must explain gating policy and usage impact, not just list links."],"deliverables":["Baseline support page explains Baseline Widely/Newly/Not Baseline and the required gating/fallback policy."],"scope":["packages/docs/content/baseline-support.md"],"risks":["If the policy is unclear, consumers may misuse non-baseline features without fallback."],"contract_refs":[{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"§1"}],"runbook":[]}}
{"id":"BL-0152","title":"Add UIK surface + gating metadata to baseline matrix data","type":"doc","status":"done","priority":"P2","tags":["baseline","docs"],"created_at":"2025-12-26T05:57:34.135Z","updated_at":"2025-12-26T05:59:10.162Z","target":{"selector":"exact","value":"0.1.2"},"deps":[],"evidence":["Request: Baseline Support Matrix must be more competitive than link table."],"owner":"codex","notes":"Add surface/gating metadata to support-matrix.json to drive richer docs.","details":{"rationale":"The matrix should be driven by structured data so the docs stay consistent and competitive."},"completed_at":"2025-12-26T05:59:10.162Z","frozen":{"core_hash":"08287ff4fdff6c12ba59f18fd3c368bd9fe2ee64704a68860d498f19417826b6"},"spec":{"problem":"The matrix should be driven by structured data so the docs stay consistent and competitive.","outcome":"Each feature entry includes UIK surface metadata.","acceptance_criteria":["Each feature entry includes UIK surface metadata.","Entries that require gating/fallback provide explicit guidance."],"inputs":["The matrix should be driven by structured data so the docs stay consistent and competitive."],"deliverables":["Each feature entry includes UIK surface metadata."],"scope":["tools/baseline/support-matrix.json"],"risks":["Missing surface/gating data makes the matrix less actionable for consumers."],"contract_refs":[],"runbook":[]}}
{"id":"BL-0153","title":"Generate Baseline Support Matrix from source data","type":"tooling","status":"done","priority":"P2","tags":["baseline","docs","tooling"],"created_at":"2025-12-26T05:57:38.517Z","updated_at":"2025-12-26T05:59:16.673Z","target":{"selector":"exact","value":"0.1.2"},"deps":["BL-0152"],"evidence":["Request: Matrix should be generated automatically or removed."],"owner":"codex","notes":"Update generator and regenerate outputs from support-matrix.json.","details":{"rationale":"Baseline Support Matrix should be generated from the canonical JSON source."},"completed_at":"2025-12-26T05:59:16.673Z","frozen":{"core_hash":"311a5baebbf2e56ef5dd002fde35c162b24041bc1afde555f5972d23cc7bbbd9"},"spec":{"problem":"Baseline Support Matrix should be generated from the canonical JSON source.","outcome":"Generator outputs a richer matrix with policy guidance and UIK surface data.","acceptance_criteria":["Generator outputs a richer matrix with policy guidance and UIK surface data.","Docs markdown and public JSON regenerate from support-matrix.json."],"inputs":["Baseline Support Matrix should be generated from the canonical JSON source."],"deliverables":["Generator outputs a richer matrix with policy guidance and UIK surface data."],"scope":["tools/baseline/generate.mjs","packages/docs/content/baseline-support.md","packages/docs/public/baseline-support.json"],"risks":["Manual edits will drift if generation is not the only source of truth."],"contract_refs":[],"runbook":[]}}
{"id":"BL-0156","title":"Fix resizable panels drag continuity and panel clipping","type":"bug","status":"done","priority":"P1","tags":["macro-scope","ui-primitives|ui-shell|accessibility"],"created_at":"2025-12-26T18:42:26.425Z","updated_at":"2025-12-27T20:50:19.586Z","target":{"selector":"exact","value":"0.1.2"},"deps":[],"evidence":["Storybook: resize handle moves once then stalls; end panel clipped at container edge."],"owner":"codex","notes":"","details":{"rationale":"Storybook inspection shows the resize handle stops after the pointer leaves the handle, and the end panel is clipped when min sizes exceed the container.","contract_review":["§3.1","§3.2","§8","§13.1"],"contract_gaps":["none"],"contract_followups":["none"],"effort":"M"},"completed_at":"2025-12-26T18:52:11.055Z","frozen":{"core_hash":"be7a3dedbf21e95f50aa4b918a8a2af73c7659b40ecd45b7929412ab7d27d6c1"},"spec":{"problem":"Storybook inspection shows the resize handle stops after the pointer leaves the handle, and the end panel is clipped when min sizes exceed the container.","outcome":"Dragging continues smoothly even when the pointer leaves the handle (pointer capture or global tracking).","acceptance_criteria":["Dragging continues smoothly even when the pointer leaves the handle (pointer capture or global tracking).","End panel remains fully visible within the container at small sizes (no clipping from min-size overflow).","Stories and interaction tests confirm resize behavior and a11y remains intact."],"inputs":["Storybook inspection shows the resize handle stops after the pointer leaves the handle, and the end panel is clipped when min sizes exceed the container."],"deliverables":["Dragging continues smoothly even when the pointer leaves the handle (pointer capture or global tracking)."],"scope":["packages/ui-primitives/src/atomic/layout/uik-resizable-panels/**","packages/ui-shell/src/structures/uik-shell-split-view.ts","packages/ui-primitives/tests/** and stories/**"],"risks":["Global pointer listeners must be cleaned up on disconnect to avoid leaks (PLATFORM_CONTRACT §13.1.H)."],"contract_refs":[{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"§3.1"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"§3.2"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"§8"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"§13.1"}],"runbook":[]}}
{"id":"BL-0157","title":"Remove uik-shell-split-view to honor ui-shell boundaries","type":"contract","status":"done","priority":"P1","tags":["macro-scope","ui-shell|architecture"],"created_at":"2025-12-26T19:41:29.929Z","updated_at":"2025-12-27T20:50:19.586Z","target":{"selector":"exact","value":"0.1.2"},"deps":[],"evidence":["User reported split view violates ui-shell responsibilities."],"owner":"codex","notes":"","details":{"rationale":"uik-shell should only provide shell layout scaffolding; split view duplicates a primitive and violates the shell responsibility boundary.","contract_review":["§11.4","§11.1","§3.1","§3.2","§13.1"],"contract_gaps":["none"],"contract_followups":["none"],"effort":"M"},"completed_at":"2025-12-26T19:45:02.687Z","frozen":{"core_hash":"e127c786b55e83fce53acd957f325575f2232d16690d822255c1e89fdbd74bc9"},"spec":{"problem":"uik-shell should only provide shell layout scaffolding; split view duplicates a primitive and violates the shell responsibility boundary.","outcome":"uik-shell-split-view is removed from source, exports, stories, and tests.","acceptance_criteria":["uik-shell-split-view is removed from source, exports, stories, and tests.","Contracts/README no longer list split view; docs build passes.","Quality gate passes with no shell split-view references."],"inputs":["uik-shell should only provide shell layout scaffolding; split view duplicates a primitive and violates the shell responsibility boundary."],"deliverables":["uik-shell-split-view is removed from source, exports, stories, and tests."],"scope":["packages/ui-shell/src/structures/**","packages/ui-shell/README.md + stories/tests","packages/ui-shell/package.json + exports/contracts"],"risks":["Removing a shell component may require downstream story/demo updates."],"contract_refs":[{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"§11.1"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"§11.4"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"§3.1"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"§3.2"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"§13.1"}],"runbook":[]}}
{"id":"BL-0158","title":"Clamp resizable panels start size to available space on initial render","type":"bug","status":"done","priority":"P1","tags":["macro-scope","ui-primitives|layout"],"created_at":"2025-12-26T19:51:42.323Z","updated_at":"2025-12-27T20:50:19.586Z","target":{"selector":"exact","value":"0.1.2"},"deps":[],"evidence":["User reports handle gets stuck and end panel is clipped in Storybook."],"owner":"codex","notes":"","details":{"rationale":"Resizable panels should not render with token start size that exceeds container width; this causes clipping and apparent drag lock in Storybook.","contract_review":["§1.1","§3.1","§3.2","§8","§9.1"],"contract_gaps":["none"],"contract_followups":["none"],"effort":"M"},"completed_at":"2025-12-26T20:02:02.666Z","frozen":{"core_hash":"9e0fed66160e9569bd7ad9fd7199d00670f0d31a1a65a5306db09e0ae2c5a221"},"spec":{"problem":"Resizable panels should not render with token start size that exceeds container width; this causes clipping and apparent drag lock in Storybook.","outcome":"Initial render uses a computed start size based on container space (no clipping).","acceptance_criteria":["Initial render uses a computed start size based on container space (no clipping).","Dragging works smoothly without sticking at the initial token size.","Tests and quality gate pass."],"inputs":["Resizable panels should not render with token start size that exceeds container width; this causes clipping and apparent drag lock in Storybook."],"deliverables":["Initial render uses a computed start size based on container space (no clipping)."],"scope":["packages/ui-primitives/src/atomic/layout/uik-resizable-panels/element.ts","packages/ui-primitives/src/atomic/layout/uik-resizable-panels/styles.ts","packages/ui-primitives/tests/**"],"risks":["Incorrect sizing logic could regress panel layout in constrained containers; verify in story."],"contract_refs":[{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"§1.1"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"§3.1"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"§3.2"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"§8"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"§9.1"}],"runbook":[]}}
{"id":"BL-0159","title":"Ensure resizable panels story allows handle movement","type":"bug","status":"done","priority":"P2","tags":["macro-scope","ui-primitives|stories"],"created_at":"2025-12-26T20:08:49.832Z","updated_at":"2025-12-27T20:50:19.586Z","target":{"selector":"exact","value":"0.1.2"},"deps":[],"evidence":["User report: Storybook width is too small and the resize bar is stuck."],"owner":"codex","notes":"","details":{"rationale":"The Storybook resizable panels demo uses layout panel width tokens while the default min sizes sum to more than the available width, so the handle appears stuck and the demo fails to show resizing.","contract_review":["§3.1","§3.2"],"contract_gaps":["none"],"contract_followups":["none"],"effort":"S"},"completed_at":"2025-12-26T20:11:43.572Z","frozen":{"core_hash":"13949a3ea6ea9accc838b283d93a288829501ca73678eda39262c833ab244dc8"},"spec":{"problem":"The Storybook resizable panels demo uses layout panel width tokens while the default min sizes sum to more than the available width, so the handle appears stuck and the demo fails to show resizing.","outcome":"Storybook resizable panels story uses token overrides that allow the handle to move in the centered layout.","acceptance_criteria":["Storybook resizable panels story uses token overrides that allow the handle to move in the centered layout.","No literal design values are introduced; overrides use --uik-* tokens only.","Quality gate passes for target 0.1.2."],"inputs":["The Storybook resizable panels demo uses layout panel width tokens while the default min sizes sum to more than the available width, so the handle appears stuck and the demo fails to show resizing."],"deliverables":["Storybook resizable panels story uses token overrides that allow the handle to move in the centered layout."],"scope":["packages/ui-primitives/stories/uik-resizable-panels.stories.ts","packages/ui-tokens/tokens/foundation/layout.json","packages/ui-primitives/tests/uik-resizable-panels.browser.test.ts"],"risks":["Smaller demo min sizes could be mistaken for recommended defaults; keep the change scoped to the story only."],"contract_refs":[{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"§3.1"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"§3.2"}],"runbook":[]}}
{"id":"BL-0160","title":"Test item from agent","type":"bug","status":"dropped","priority":"P2","tags":[],"created_at":"2025-12-26T22:44:38.004Z","updated_at":"2025-12-26T22:44:56.490Z","target":{"selector":"exact","value":"0.1.2"},"deps":[],"evidence":[],"owner":"agent","notes":"","spec":{"problem":"Test item from agent","outcome":"Test item from agent","acceptance_criteria":["Test item from agent"],"inputs":["Test item from agent"],"deliverables":["Test item from agent"],"scope":[],"risks":[],"contract_refs":[],"runbook":[]}}
{"id":"BL-0161","title":"Disconnect combobox outside-dismiss listeners on disconnect","type":"bug","status":"done","priority":"P1","tags":["accessibility","ui-primitives"],"created_at":"2025-12-27T14:38:05.000Z","updated_at":"2025-12-29T00:48:00.884Z","target":{"selector":"exact","value":"0.1.2"},"deps":[],"evidence":["Delta scan: uik-combobox outside-dismiss disconnect missing."],"owner":"codex","notes":"","details":{"rationale":"uik-combobox connects a document-level outside-dismiss listener but does not disconnect it when removed, leaving a global listener and violating the no-global-side-effects rule.","effort":"S"},"spec":{"problem":"uik-combobox connects a document-level outside-dismiss listener but does not disconnect it when removed, leaving a global listener and violating the no-global-side-effects rule.","outcome":"uik-combobox disconnects outside-dismiss listeners in disconnectedCallback.","acceptance_criteria":["uik-combobox disconnects outside-dismiss listeners in disconnectedCallback.","Removing an open combobox from the DOM leaves no active document pointerdown listener (verified via test/spies).","Open/close behavior remains unchanged (existing combobox tests pass)."],"inputs":["uik-combobox connects a document-level outside-dismiss listener but does not disconnect it when removed, leaving a global listener and violating the no-global-side-effects rule."],"deliverables":["uik-combobox disconnects outside-dismiss listeners in disconnectedCallback."],"scope":["packages/ui-primitives/src/composed/collection/uik-listbox/uik-combobox.ts","packages/ui-primitives/src/internal/overlay/dismiss.ts","packages/ui-primitives/tests/**"],"risks":[],"contract_refs":[{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"§2.2"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"§13.1.H"}],"runbook":[]},"completed_at":"2025-12-29T00:48:00.884Z","frozen":{"core_hash":"523726676493f3c9bea74d18c4653889647528ddc0852f500625b20f51bde0e5"}}
{"id":"BL-0162","title":"Add ElementInternals fallback for form-associated primitives","type":"contract","status":"done","priority":"P1","tags":["accessibility","contract","macro-scope","ui-primitives"],"created_at":"2025-12-27T14:38:05.000Z","updated_at":"2025-12-29T00:49:21.833Z","target":{"selector":"exact","value":"0.1.2"},"deps":[],"evidence":["System scan: ElementInternals used without fallback across form-associated primitives."],"owner":"codex","notes":"","details":{"rationale":"Form-associated primitives rely on ElementInternals without a fallback mode; the contract requires a documented fallback when ElementInternals is unavailable.","effort":"L","contract_review":["§2.1 Component model","§7.2 Form-associated custom elements"],"contract_gaps":["none"],"contract_followups":["none"]},"spec":{"problem":"Form-associated primitives rely on ElementInternals without a fallback mode; the contract requires a documented fallback when ElementInternals is unavailable.","outcome":"Components detect absence of ElementInternals and fall back to value reflection + custom events without throwing.","acceptance_criteria":["Components detect absence of ElementInternals and fall back to value reflection + custom events without throwing.","Fallback behavior and limitations are documented in packages/ui-primitives/README.md.","Tests cover fallback mode for at least uik-input and uik-combobox by stubbing attachInternals."],"inputs":["Form-associated primitives rely on ElementInternals without a fallback mode; the contract requires a documented fallback when ElementInternals is unavailable."],"deliverables":["Components detect absence of ElementInternals and fall back to value reflection + custom events without throwing."],"scope":["packages/ui-primitives/src/atomic/control/uik-input/element.ts","packages/ui-primitives/src/atomic/control/uik-select/element.ts","packages/ui-primitives/src/atomic/control/uik-checkbox/element.ts","packages/ui-primitives/src/atomic/control/uik-radio/element.ts","packages/ui-primitives/src/atomic/control/uik-switch/element.ts","packages/ui-primitives/src/atomic/control/uik-textarea/element.ts","packages/ui-primitives/src/atomic/control/uik-button/element.ts","packages/ui-primitives/src/composed/collection/uik-radio-group/element.ts","packages/ui-primitives/src/composed/collection/uik-listbox/uik-combobox.ts","packages/ui-primitives/README.md"],"risks":["Fallback semantics may diverge from native form submission/validation; document limitations and keep behavior explicit."],"contract_refs":[{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"§7.2"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"§2.1"}],"runbook":[]},"completed_at":"2025-12-29T00:49:21.833Z","frozen":{"core_hash":"4bb98c560ac729a3469c7fd374f924126ad329ea5e44d852d62e20d5264a0575"}}
{"id":"BL-0163","title":"Implement ATO CLI + migrate .internal to .ato","type":"tooling","status":"dropped","priority":"P0","tags":["ato","macro-scope","migration","tooling"],"created_at":"2025-12-27T20:42:24.938Z","updated_at":"2026-01-03T21:34:30.344Z","target":{"selector":"milestone","value":"ato-v0"},"deps":[],"evidence":[],"owner":"agent","notes":"Removed per user request: ATO CLI testing item.","details":{"rationale":"Replace .internal tools with public ATO CLI and migrate repo state.","links":["spec: ato/docs/design.md"],"contract_review":["Reviewed .internal/ATO_SPEC.md sections 1-13 and evidence maps in required order.","Reviewed .ato/contracts/PLATFORM_CONTRACT.md, .internal/QUEUE_CONTRACT.md, .internal/QUALITY_GATES.md, .internal/WORKFLOW_LOOP.md, .internal/INDEX.md, and routed AGENTS.md files.","Confirmed protocol handshake, target resolution, migration, and removal steps align with the spec."],"effort":"L","blockers":["Full gate failed: Storybook a11y violation scrollable-region-focusable in uik-combobox Open story."]},"spec":{"problem":"Replace .internal tools with public ATO CLI and migrate repo state.","outcome":"ato target resolve succeeds","acceptance_criteria":["ato target resolve succeeds","ato q validate passes after contract index","Full gate passes","MIGRATION_REPORT.md written with verification results",".internal removed and no legacy references remain"],"inputs":["Replace .internal tools with public ATO CLI and migrate repo state."],"deliverables":["ato target resolve succeeds"],"scope":["Implement ATO CLI/package per spec","Migrate .internal data to .ato and validate","Update AGENTS routers to ato commands","Remove .internal after verification"],"risks":["Large migration/deletion risk; ensure verification before removal"],"contract_refs":[{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"§9"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"§12"}],"runbook":[]}}
{"id":"BL-0164","title":"Implement local ATO dashboard web UI","type":"feature","status":"done","priority":"P2","tags":["ato","ui-primitives","ui-shell","ui-tokens"],"created_at":"2025-12-27T23:32:23.530Z","updated_at":"2025-12-28T00:40:36.637Z","target":{"selector":"milestone","value":"ato-v0"},"deps":[],"evidence":[],"owner":"agent","notes":"","completed_at":"2025-12-28T00:40:36.637Z","frozen":{"core_hash":"2a21d0be4be842dee8f1fa255dad74631ae82e92e94e792e14f6e74dd72edd7e"},"spec":{"problem":"Implement local ATO dashboard web UI","outcome":"Implement local ATO dashboard web UI","acceptance_criteria":["Implement local ATO dashboard web UI"],"inputs":["Implement local ATO dashboard web UI"],"deliverables":["Implement local ATO dashboard web UI"],"scope":[],"risks":[],"contract_refs":[],"runbook":[]}}
{"id":"BL-0165","title":"Add token-driven tag input/multi-select primitive","type":"feature","status":"queued","priority":"P2","tags":["ui-primitives"],"created_at":"2025-12-27T23:43:47.150Z","updated_at":"2025-12-31T00:47:49.174Z","target":{"selector":"range","value":"0.1.x"},"deps":[],"evidence":[],"owner":"agent","notes":"","spec":{"problem":"Add token-driven tag input/multi-select primitive","outcome":"Add token-driven tag input/multi-select primitive","acceptance_criteria":["Add token-driven tag input/multi-select primitive"],"inputs":["Add token-driven tag input/multi-select primitive"],"deliverables":["Add token-driven tag input/multi-select primitive"],"scope":[],"risks":[],"contract_refs":[{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"7.2"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"8"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"3.1"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"4.1"}],"runbook":[]}}
{"id":"BL-0166","title":"Add timeline/log list primitive for run history","type":"feature","status":"queued","priority":"P2","tags":["ui-primitives"],"created_at":"2025-12-27T23:43:50.982Z","updated_at":"2025-12-31T00:47:49.867Z","target":{"selector":"range","value":"0.1.x"},"deps":[],"evidence":[],"owner":"agent","notes":"","spec":{"problem":"Add timeline/log list primitive for run history","outcome":"Add timeline/log list primitive for run history","acceptance_criteria":["Add timeline/log list primitive for run history"],"inputs":["Add timeline/log list primitive for run history"],"deliverables":["Add timeline/log list primitive for run history"],"scope":[],"risks":[],"contract_refs":[{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"3.1"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"4.1"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"8"}],"runbook":[]}}
{"id":"BL-0167","title":"Fix dashboard module resolution + import map for local UI","type":"bug","status":"done","priority":"P1","tags":["ato","dashboard"],"created_at":"2025-12-28T03:44:19.309Z","updated_at":"2025-12-28T03:47:33.254Z","target":{"selector":"milestone","value":"ato-v0"},"deps":[],"evidence":[],"owner":"agent","notes":"","spec":{"problem":"Dashboard loads blank because module specifiers resolve to missing vendor paths and lit-html import map targets a non-existent entry.","outcome":"Dashboard loads without module 404s and renders UI.","acceptance_criteria":["Dashboard loads with zero console errors","No 404s for ui-primitives subpaths or lit-html","Local server handles directory module requests"],"inputs":["Dashboard loads blank because module specifiers resolve to missing vendor paths and lit-html import map targets a non-existent entry."],"deliverables":["Import map includes ui-primitives subpaths and correct lit-html entry","Static server resolves directory module requests"],"scope":[],"risks":[],"contract_refs":[],"runbook":[]},"completed_at":"2025-12-28T03:47:33.254Z","frozen":{"core_hash":"9cf4354362447e77376182dc6b050a70f53422c4184ea6bf9b55002026b17caa"}}
{"id":"BL-0168","title":"Add description list primitive for dashboard metadata","type":"feature","status":"done","priority":"P2","tags":["dashboard","ui-primitives"],"created_at":"2025-12-28T03:44:29.178Z","updated_at":"2025-12-29T01:56:20.032Z","target":{"selector":"exact","value":"0.1.2"},"deps":[],"evidence":[],"owner":"agent","notes":"","spec":{"problem":"Dashboard metadata panels rely on bespoke key/value grids that are hard to standardize or reuse.","outcome":"Provide a uik-description-list primitive for dense label/value metadata.","acceptance_criteria":["Supports label/value pairs with dense + comfortable spacing","Handles long values and inline code styles","Docs include usage and a11y guidance"],"inputs":["Dashboard metadata panels rely on bespoke key/value grids that are hard to standardize or reuse."],"deliverables":["uik-description-list primitive with tokens + docs"],"scope":[],"risks":[],"contract_refs":[],"runbook":[]},"completed_at":"2025-12-29T01:56:20.032Z","frozen":{"core_hash":"6a7e6ee959b4a0cfb770d20ce676f137e9a82dfa2bfc5805b25e3ff2d52cf849"}}
{"id":"BL-0169","title":"Add pagination primitive for large dashboard tables","type":"feature","status":"done","priority":"P2","tags":["dashboard","ui-primitives"],"created_at":"2025-12-28T03:44:36.895Z","updated_at":"2025-12-29T01:56:51.621Z","target":{"selector":"exact","value":"0.1.2"},"deps":[],"evidence":[],"owner":"agent","notes":"","spec":{"problem":"Dashboard lists can exceed hundreds of rows; rendering everything without paging/virtualization hurts performance and usability.","outcome":"Provide uik-pagination that pairs with data tables and list views.","acceptance_criteria":["Supports previous/next, page buttons, and total count","Keyboard/aria navigation is documented and tested","Docs show data-table integration"],"inputs":["Dashboard lists can exceed hundreds of rows; rendering everything without paging/virtualization hurts performance and usability."],"deliverables":["uik-pagination primitive with tokens + docs"],"scope":[],"risks":[],"contract_refs":[],"runbook":[]},"completed_at":"2025-12-29T01:56:51.621Z","frozen":{"core_hash":"ef29f978dcf1d354b6e0e309b17ed85d2e35ca56d2b22cbb90664002d10fe84e"}}
{"id":"BL-0170","title":"Add code-block primitive for dashboard log/JSON outputs","type":"feature","status":"done","priority":"P2","tags":["dashboard","ui-primitives"],"created_at":"2025-12-28T03:44:44.663Z","updated_at":"2025-12-29T01:57:21.221Z","target":{"selector":"exact","value":"0.1.2"},"deps":[],"evidence":[],"owner":"agent","notes":"","spec":{"problem":"Dashboard panels render JSON/log outputs in plain <pre> blocks without consistent tokens or copy support.","outcome":"Provide uik-code-block for read-only log/JSON display with optional copy action.","acceptance_criteria":["Supports read-only monospace display with overflow handling","Optional copy button and accessible label","Tokens cover background/foreground/border"],"inputs":["Dashboard panels render JSON/log outputs in plain <pre> blocks without consistent tokens or copy support."],"deliverables":["uik-code-block primitive with tokens + docs"],"scope":[],"risks":[],"contract_refs":[],"runbook":[]},"completed_at":"2025-12-29T01:57:21.221Z","frozen":{"core_hash":"9cb49685062b06ca8ee6df004dfaac6405e21c46383138026c129fa4f68d42ee"}}
{"id":"BL-0171","title":"Fix ATO dashboard ui-tokens export mismatch","type":"bug","status":"done","priority":"P1","tags":["ato","dashboard","ui-tokens"],"created_at":"2025-12-29T01:43:42.253Z","updated_at":"2025-12-29T04:01:23.601Z","target":{"selector":"milestone","value":"ato-v0"},"deps":[],"evidence":[],"owner":"agent","notes":"","spec":{"problem":"ATO dashboard fails to load because the vendor ui-tokens module served by the dashboard lacks createBreakpointObserver.","outcome":"Dashboard loads with the expected ui-tokens exports and no missing-export console errors.","acceptance_criteria":["ato dashboard serve renders UI without missing-export console errors","Import map vendor for ui-tokens resolves to a build that includes createBreakpointObserver or provides a fallback","Dashboard layout responds to breakpoint updates"],"inputs":["Chrome DevTools console: The requested module '@ismail-elkorchi/ui-tokens' does not provide an export named 'createBreakpointObserver'"],"deliverables":["Updated dashboard vendor mapping or dependency so ui-tokens exports createBreakpointObserver"],"scope":["ato/src/dashboard/app.js","ato/src/dashboard/server.js"],"risks":[],"contract_refs":[],"runbook":[]},"completed_at":"2025-12-29T04:01:23.601Z","frozen":{"core_hash":"c9e60ccb03b0ff8041a8a6558bd8397285e19da43a1ecf2ba7839be89a57468e"}}
{"id":"BL-0172","title":"Add responsive layout mode for uik-description-list","type":"feature","status":"queued","priority":"P2","tags":["layout","ui-primitives","ui-tokens"],"created_at":"2025-12-29T04:46:06.792Z","updated_at":"2025-12-31T00:47:50.632Z","target":{"selector":"range","value":"range:0.1.x"},"deps":[],"evidence":["computed:viewport=768x1024 scrollWidth=788 gridTemplateColumns=252px 0px hostWidth=264","screenshot:/tmp/ato-dashboard-detail-768x1024-fold.png"],"owner":"agent","notes":"Affected packages: ui-primitives, ui-tokens. Proposed change: default responsive stacking for uik-description-list (auto switch when container is narrow). Why universal: metadata lists in any app need to stay readable in narrow layouts. Breaking change: narrow layouts will stack term/value pairs; call out in release notes.","spec":{"problem":"uik-description-list uses a fixed term column width; in narrow containers the value column collapses and the page horizontally overflows.","outcome":"Description lists support stacked or auto layout that preserves value readability without horizontal overflow in narrow containers.","acceptance_criteria":["When container width is below term width plus gap, term/value stack vertically with no horizontal overflow (default behavior)","Two-column layout remains for wide containers","Stories/docs show stacked and two-column examples with guidance"],"inputs":["Dashboard audit at 768x1024 shows scrollWidth 788>768 and gridTemplateColumns '252px 0px' for a 264px host","Screenshot /tmp/ato-dashboard-detail-768x1024-fold.png"],"deliverables":["New layout attribute or auto mode for uik-description-list","Token or container rule for responsive stacking","Stories/docs and regression coverage"],"scope":["packages/ui-primitives/src/atomic/content/uik-description-list/**","packages/ui-tokens/tokens/components/description-list.json","packages/ui-primitives/stories/uik-description-list.stories.ts"],"risks":["Breaking change for narrow layouts; call out in release notes and verify in narrow and wide containers"],"contract_refs":[{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"6.2"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"3.1"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"4.2"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"8"}],"runbook":["Visual check in Storybook narrow container","Add visual regression for stacked mode"]}}
{"id":"BL-0173","title":"Normalize select control height with input/combobox sizes","type":"debt","status":"queued","priority":"P2","tags":["forms","ui-primitives","ui-tokens"],"created_at":"2025-12-29T04:46:19.707Z","updated_at":"2025-12-31T00:47:51.459Z","target":{"selector":"range","value":"range:0.1.x"},"deps":[],"evidence":["computed:viewport=1440x900 selectHeight=66 inputHeight=40 comboboxHeight=40","screenshot:/tmp/ato-dashboard-detail-1440x900-fold.png"],"owner":"agent","notes":"Affected packages: ui-primitives, ui-tokens. Proposed change: default select height aligns with size.control.md (40px) to match input/combobox. Why universal: all forms need aligned controls across layouts. Breaking change: select default height changes; call out in release notes.","spec":{"problem":"uik-select renders taller than other form controls in the same layout, causing misaligned baselines and inconsistent vertical rhythm.","outcome":"Form controls share a consistent height system so select, input, and combobox align by default.","acceptance_criteria":["Default select height aligns with size.control.md (40px) like input/combobox","Select exposes size/density options consistent with other controls","Docs show aligned form row examples"],"inputs":["Dashboard audit at 1440x900 shows uik-select height 66px vs uik-input/combobox 40px","Screenshot /tmp/ato-dashboard-detail-1440x900-fold.png"],"deliverables":["Add select height token and wire to component styles","Align select sizing with input/combobox tokens","Docs/story updates"],"scope":["packages/ui-tokens/tokens/components/select.json","packages/ui-primitives/src/atomic/control/uik-select/**","packages/ui-primitives/stories/uik-select.stories.ts"],"risks":["Breaking change for layouts that relied on taller selects; call out in release notes and verify aligned form rows"],"contract_refs":[{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"7.2"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"3.1"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"4.2"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"8"}],"runbook":["Storybook: form row alignment across input/select/combobox","Visual regression for size variants"]}}
{"id":"BL-0174","title":"Add compact heading line-height tokens and density option","type":"feature","status":"queued","priority":"P3","tags":["typography","ui-primitives","ui-tokens"],"created_at":"2025-12-29T04:46:33.424Z","updated_at":"2025-12-31T00:47:52.245Z","target":{"selector":"range","value":"range:0.1.x"},"deps":[],"evidence":["computed:h2 fontSize=30 lineHeight=75 h3 fontSize=24 lineHeight=54","screenshot:/tmp/ato-dashboard-detail-1440x900-fold.png"],"owner":"agent","notes":"Affected packages: ui-primitives, ui-tokens. Proposed change: shift default heading line-height to compact tokens; keep a roomy variant for display contexts. Why universal: dense dashboards and data-heavy UIs need tighter heading rhythm without per-app overrides. Breaking change: heading rhythm changes; call out in release notes.","spec":{"problem":"Heading line-heights are extremely tall in dense interfaces, creating excessive vertical gaps and reducing information density.","outcome":"Headings support a compact line-height option for dense UIs while keeping the current default as the roomy baseline.","acceptance_criteria":["Default heading line-height aligns to compact heading tokens (tighter than current)","Optional roomy heading line-height is documented for display contexts","Storybook shows default vs roomy heading rhythm"],"inputs":["Dashboard audit shows uik-heading computed line-height 75px for 30px (H2) and 54px for 24px (H3)","Screenshot /tmp/ato-dashboard-detail-1440x900-fold.png"],"deliverables":["Add compact line-height tokens for headings","Add uik-heading density or leading attribute","Docs/story updates"],"scope":["packages/ui-tokens/tokens/components/heading.json","packages/ui-primitives/src/atomic/content/uik-heading/**","packages/ui-primitives/stories/uik-heading.stories.ts"],"risks":["Breaking change to heading rhythm may affect layouts; call out in release notes and verify heading stacks"],"contract_refs":[{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"3.1"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"4.2"}],"runbook":["Storybook: compare default vs compact heading stacks","Visual regression for heading rhythm"]}}
{"id":"BL-0175","title":"Add responsive collapse behavior for uik-shell sidebars and activity bar","type":"feature","status":"queued","priority":"P2","tags":["layout","responsive","ui-shell","ui-tokens"],"created_at":"2025-12-29T04:58:01.820Z","updated_at":"2026-01-02T17:30:18.130Z","target":{"selector":"range","value":"range:0.1.x"},"deps":[],"evidence":[],"owner":"agent","notes":"Affected packages: ui-shell, ui-tokens (and overlay primitives as needed). Proposed change: default responsive collapse of sidebars/activity bar at narrow widths. Why universal: shell layouts must remain usable on small screens. Breaking change: mobile shell layout behavior changes; call out in release notes.\nContractRefsOriginal: [{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"6.2\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"11.1\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"7.1\"},{\"doc\":\".ato/contracts/PLATFORM_CONTRACT.md\",\"section\":\"13.1.G\"}]","spec":{"problem":"uik-shell uses fixed sidebar/activity bar widths; at 360px wide layouts the main content collapses to ~32px, making the shell unusable on small screens.","outcome":"Shell layout collapses sidebars and activity bar into overlay/drawer or stacked modes at narrow widths so the main content fills the viewport without horizontal clipping.","acceptance_criteria":["At 360px width, main content fills the viewport with no persistent sidebars or horizontal clipping","Sidebar/activity bar are accessible via overlay/drawer with documented open/close + focus/scroll behavior","Responsive breakpoints and panel widths are tokenized and used by uik-shell"],"inputs":["Dashboard audit: viewport=360x800 mainWidth=32 sidebarWidth=384 activityWidth=56 (computed)","Screenshot /tmp/ato-dashboard-360x800-fold.png"],"deliverables":["Responsive shell collapse rules in ui-shell","Tokenized breakpoints/panel widths in ui-tokens","Docs/story showing wide vs collapsed shell"],"scope":["packages/ui-shell/src/structures/**","packages/ui-tokens/tokens/foundation/layout.json","packages/ui-shell/stories/**"],"risks":["Breaking change for narrow layouts; call out in release notes and verify overlay focus + scroll behavior"],"contract_refs":["6.4"],"runbook":[]}}
{"id":"BL-0176","title":"Fix docs theme/density controls + system default","type":"bug","status":"done","priority":"P1","tags":["docs","ui-primitives","ui-tokens"],"created_at":"2025-12-31T05:49:12.867Z","updated_at":"2026-01-02T01:27:06.492Z","target":{"selector":"range","value":"range:0.1.x"},"deps":[],"evidence":[],"owner":"agent","notes":"Evidence: packages/docs/index.html, packages/ui-primitives/tests/uik-controls.browser.test.ts, packages/ui-tokens/dist/base.css. Gate: cmd: ato gate run --mode full (failed; artifact: .ato/runs/artifacts/global/gate/tests-1767160834997.log).","spec":{"problem":"Docs theme/density controls don't update; default theme ignores system preference when data-uik-theme is absent.","outcome":"Form-associated controls emit composed change/input events; base theme follows prefers-color-scheme when no data-uik-theme is set.","acceptance_criteria":["uik-select change bubbles from host","docs updates data-uik-theme/data-uik-density","no attribute defaults to prefers-color-scheme"],"inputs":["Docs theme/density toggles not reacting (packages/docs/src/app.ts, packages/ui-primitives/src/internal/form.ts).","System default theme handling (packages/ui-tokens/scripts/build.mjs, packages/ui-tokens/README.md).","Regenerated outputs: cmd: node packages/ui-tokens/scripts/build.mjs; cmd: node packages/docs/tools/generate-docs-content.mjs; cmd: npm -w packages/ui-primitives run build.","file:/tmp/uik-ato-evidence/gate-full-escalated.txt","cmd:node /home/ismail-el-korchi/Documents/Projects/ato/dist/cli/main.js gate run --mode full --report-touched > /tmp/uik-ato-evidence/gate-full-escalated.txt 2>&1","file:/home/ismail-el-korchi/Documents/Projects/ui-kit/.ato/runs/artifacts/global/gate/tests-1767317166514.log","cmd:node /home/ismail-el-korchi/Documents/Projects/ato/dist/cli/main.js gate run --mode full --report-touched"],"deliverables":["Update dispatchFormFallbackEvent","Update ui-tokens base theme selector","Update docs control sync"],"scope":["packages/ui-primitives/**","packages/ui-tokens/**","packages/docs/**"],"risks":["Default theme behavior changes when data-uik-theme is missing."],"contract_refs":[{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"3.7"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"4.5"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"7.2"}],"runbook":[]},"completed_at":"2026-01-02T01:27:06.492Z","frozen":{"core_hash":"400f6637167eff2c4f5d83f51bd71337ecb0748116a8e5b6718479c5d761ecd5"}}
{"id":"BL-0177","title":"PP6 missing evidence repro (temp)","type":"investigation","status":"dropped","priority":"P3","tags":["ato","tooling"],"created_at":"2026-01-01T04:28:07.597Z","updated_at":"2026-01-03T21:34:31.042Z","target":{"selector":"range","value":"range:0.1.x"},"deps":[],"evidence":[],"owner":"agent","notes":"Removed per user request: ATO CLI testing item.","spec":{"problem":"Need to verify q done evidence guidance output.","outcome":"Capture error output when q done runs without evidence citations.","acceptance_criteria":["q done emits evidence guidance with JSON pointers and template."],"inputs":["Run q done without evidence","file:/tmp/ui-kit-pp/gate-full.txt","cmd:ato gate run --mode full --report-touched"],"deliverables":["Log of q done error output"],"scope":[],"risks":[],"contract_refs":[{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"12"}],"runbook":[]},"details":{"blockers":["temp repro cleanup"]}}
{"id":"BL-0178","title":"Gate artifacts missing stdout/stderr tail (PP1)","type":"bug","status":"dropped","priority":"P1","tags":["ato","quality","tooling"],"created_at":"2026-01-01T04:32:19.807Z","updated_at":"2026-01-03T21:34:31.835Z","target":{"selector":"range","value":"range:0.1.x"},"deps":[],"evidence":[],"owner":"agent","notes":"Removed per user request: ATO CLI testing item.","spec":{"problem":"Gate artifact logs for failed steps do not include stdout/stderr tails, making failures opaque.","outcome":"Failed gate artifacts include stdout/stderr tail output with error details.","acceptance_criteria":["Failed gate step artifacts include non-empty stdout/stderr tail or a clear note when output is empty","Gate run output links to artifact with error details"],"inputs":["cmd:node /home/ismail-el-korchi/Documents/Projects/ato/dist/cli/main.js gate run --mode full --report-touched > gate-full.txt 2>&1","file:gate-full.txt","file:.ato/runs/artifacts/global/gate/tests-1767245843575.log"],"deliverables":["Populate gate artifact logs with stdout/stderr tails for failed steps"],"scope":["ato gate artifact capture"],"risks":["None"],"contract_refs":[{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"12"}],"runbook":[]}}
{"id":"BL-0179","title":"Gate output missing heartbeat (PP4)","type":"bug","status":"dropped","priority":"P2","tags":["ato","quality","tooling"],"created_at":"2026-01-01T04:32:31.914Z","updated_at":"2026-01-03T21:34:32.533Z","target":{"selector":"range","value":"range:0.1.x"},"deps":[],"evidence":[],"owner":"agent","notes":"Removed per user request: ATO CLI testing item.","spec":{"problem":"Long-running gate steps only emit start/end markers; no heartbeat/progress output is printed, making long runs look stalled.","outcome":"Non-JSON gate output includes heartbeat/progress markers during long steps.","acceptance_criteria":["Gate output includes periodic heartbeat lines during long steps","Start/end markers remain"],"inputs":["cmd:ato gate run --mode full --report-touched","output:/tmp/ui-kit-pp/gate-full.txt"],"deliverables":["Add heartbeat/progress output to non-JSON gate runs"],"scope":["ato gate output"],"risks":["Low"],"contract_refs":[{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"12"}],"runbook":[]}}
{"id":"BL-0180","title":"Storybook a11y violations block gate","type":"bug","status":"done","priority":"P1","tags":["accessibility","blocker","quality","stories","ui-primitives"],"created_at":"2026-01-01T04:32:49.875Z","updated_at":"2026-01-01T07:04:43.722Z","target":{"selector":"range","value":"range:0.1.x"},"deps":[],"evidence":[],"owner":"agent","notes":"Evidence: .ato/runs/artifacts/global/gate/tests-1767160834997.log (uik-button menu trigger + code-block + combobox + menubar a11y violations).","spec":{"problem":"Storybook a11y gate fails (uik-code-block scrollable-region-focusable, uik-combobox listbox missing required children roles, uik-menubar aria-required-parent).","outcome":"Storybook a11y gate passes with zero violations for code-block, combobox, and menubar stories.","acceptance_criteria":["A11y gate passes for Storybook tests","Fix scrollable-region-focusable on uik-code-block story","Listbox/menubar ARIA structure passes axe"],"inputs":["cmd:ato gate run --mode full --report-touched","output:/home/ismail-el-korchi/Documents/Projects/ui-kit/.ato/runs/artifacts/global/gate/tests-1767160834997.log","output:/home/ismail-el-korchi/Documents/Projects/ui-kit/.ato/runs/artifacts/global/gate/tests-1767241535706.log","file:gate-full.txt","cmd:node /home/ismail-el-korchi/Documents/Projects/ato/dist/cli/main.js gate run --mode full --report-touched > gate-full.txt 2>&1"],"deliverables":["Update components/stories to satisfy axe (code-block scrollable region, combobox listbox children, menubar parent roles)"],"scope":["packages/ui-primitives/stories/**","packages/ui-primitives/src/**"],"risks":["Gate remains blocked until a11y violations are resolved"],"contract_refs":[{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"8"},{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"12"}],"runbook":[]},"completed_at":"2026-01-01T07:04:43.722Z","frozen":{"core_hash":"7c080bcda66a898627b8abc167db1afd938be5f743b38dc8afe1f3e6cf2dd3b3"}}
{"id":"BL-0181","title":"Closeout apply fails on unresolved contract refs","type":"bug","status":"dropped","priority":"P1","tags":["ato","closeout","tooling"],"created_at":"2026-01-01T04:40:35.916Z","updated_at":"2026-01-03T21:34:33.232Z","target":{"selector":"range","value":"range:0.1.x"},"deps":[],"evidence":[],"owner":"agent","notes":"Removed per user request: ATO CLI testing item.","spec":{"problem":"ato session closeout apply fails with unresolved contract ref errors when transferring ui-kit queue items to the ATO hub.","outcome":"Closeout apply succeeds or provides auto-mapping for contract refs between source and destination.","acceptance_criteria":["ato session closeout apply --target /home/ismail-el-korchi/Documents/Projects/ato succeeds without contract ref validation errors"],"inputs":["cmd:ato session closeout apply --target /home/ismail-el-korchi/Documents/Projects/ato --json","output:/tmp/ui-kit-pp/closeout-apply.json"],"deliverables":["Fix closeout apply contract ref validation across repos"],"scope":["ato session closeout transfer"],"risks":["Closeout cannot transfer items to hub until resolved"],"contract_refs":[{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"12"}],"runbook":[]}}
{"id":"BL-0182","title":"ATO CLI --target overloaded causes cross-store writes; need --dest + opt-in cross-store","type":"tooling","status":"dropped","priority":"P2","tags":[],"created_at":"2026-01-03T01:32:04.821Z","updated_at":"2026-01-03T21:34:33.949Z","target":{"selector":"range","value":"range:0.1.x"},"deps":[],"evidence":[],"owner":"agent","notes":"Removed per user request: ATO CLI testing item.","spec":{"problem":"Closeout and contract-refs fix interpret --target as destination and source, causing cross-store writes into /home/ismail-el-korchi/Documents/Projects/ato/.ato/queue/items.jsonl; those hub writes were not committed and were deleted manually. This creates unsafe defaults and confusing permission failures.","outcome":"CLI uses explicit --dest (or similar) for destination operations and requires opt-in to write across stores; default behavior never writes outside the source repo without explicit consent.","acceptance_criteria":["Closeout/apply from ui-kit does not write to hub unless --dest + --allow-cross-store is provided","contract-refs fix uses --dest and supports report-only without touching hub store","Help/examples updated to reflect new semantics"],"inputs":["/tmp/ui-kit-closeout-apply-success.json","/tmp/ui-kit-closeout-apply-after-fix-denied.json"],"deliverables":["CLI flag change (+ migration note)","Updated docs/help examples","Regression test covering cross-store write prevention"],"scope":[],"risks":[],"contract_refs":["6.4"],"runbook":[]}}
{"id":"BL-0183","title":"Fix docs components rendering","type":"bug","status":"done","priority":"P2","tags":[],"created_at":"2026-01-03T06:14:30.096Z","updated_at":"2026-01-03T06:19:16.264Z","target":{"selector":"range","value":"range:0.1.x"},"deps":[],"evidence":[],"owner":"agent","notes":"Summary: strip blank lines in component card HTML so markdown parsing does not convert cards into code blocks; regenerated docs content. Evidence: cmd:/home/ismail-el-korchi/.nvm/versions/node/v25.2.1/bin/ato gate run --mode fast; file:/home/ismail-el-korchi/Documents/Projects/ui-kit/.ato/runs/artifacts/global/gate/stylelint-1767421031524.log; file:packages/docs/tools/generate-docs-content.mjs; file:packages/docs/src/generated/docs-content.json","spec":{"problem":"Docs components pages render most cards inside a code block, collapsing layout.","outcome":"Components pages render each component card as HTML, not as a single code block.","acceptance_criteria":["Primitives and shell docs pages show all component cards without code-block leakage."],"inputs":["packages/docs/tools/generate-docs-content.mjs","packages/ui-primitives/README.md","packages/ui-shell/README.md","cmd:/home/ismail-el-korchi/.nvm/versions/node/v25.2.1/bin/ato gate run --mode fast","cmd:node -e \"const data=require('./packages/docs/src/generated/docs-content.json');const page=data.docsPages.find(p=>p.id==='primitives');const section=page.sections.find(s=>s.title==='Components and contracts');if(section.body.includes('docs-code-block')){throw new Error('docs-code-block present');}console.log('ok');\"","file:/home/ismail-el-korchi/Documents/Projects/ui-kit/.ato/runs/artifacts/global/gate/stylelint-1767421031524.log"],"deliverables":["Updated docs generator output; refreshed docs-content.json and docs-search-index.json"],"scope":[],"risks":[],"contract_refs":[{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"10.2"}],"runbook":[]},"completed_at":"2026-01-03T06:19:16.264Z","frozen":{"core_hash":"508ba5b3bdf6528022a474da47e475cdad4f929f66caf9b133e4463169c15106"}}
{"id":"BL-0184","title":"Fix docs component list HTML escaping","type":"bug","status":"done","priority":"P2","tags":[],"created_at":"2026-01-03T06:31:22.402Z","updated_at":"2026-01-03T06:33:15.875Z","target":{"selector":"range","value":"range:0.1.x"},"deps":[],"evidence":[],"owner":"agent","notes":"Summary: escape inline HTML in component list items to prevent <textarea> from swallowing the remaining cards; regenerated docs content and rebuilt preview. Evidence: cmd:npm -w packages/docs run build; cmd:node -e \"const data=require(\"./packages/docs/src/generated/docs-content.json\");const page=data.docsPages.find(p=>p.id===\"primitives\");const section=page.sections.find(s=>s.title===\"Components and contracts\");const body=section.body;const needed=[\"component-tooltip\",\"component-tree-view\",\"component-visually-hidden\"];const ok=needed.every(id=>body.includes(id));if(!ok){throw new Error(\"missing component ids\");}console.log(\"ok\");\"; file:/home/ismail-el-korchi/Documents/Projects/ui-kit/.ato/runs/artifacts/global/gate/stylelint-1767421945609.log","spec":{"problem":"Component list items include raw HTML like <textarea>, which the browser parses as real elements and truncates the remaining cards.","outcome":"Inline markdown in component lists escapes raw HTML so all component cards render.","acceptance_criteria":["Primitives docs show tooltip/tree-view/visually-hidden cards after textarea with no HTML truncation."],"inputs":["packages/docs/tools/generate-docs-content.mjs","packages/ui-primitives/contracts/components.json","packages/docs/src/generated/docs-content.json","cmd:npm -w packages/docs run build","cmd:node -e \"const data=require('./packages/docs/src/generated/docs-content.json');const page=data.docsPages.find(p=>p.id==='primitives');const section=page.sections.find(s=>s.title==='Components and contracts');const body=section.body;const needed=['component-tooltip','component-tree-view','component-visually-hidden'];const ok=needed.every(id=>body.includes(id));if(!ok){throw new Error('missing component ids');}console.log('ok');\"","file:/home/ismail-el-korchi/Documents/Projects/ui-kit/.ato/runs/artifacts/global/gate/stylelint-1767421945609.log"],"deliverables":["Updated docs generator output; rebuilt docs preview assets"],"scope":[],"risks":[],"contract_refs":[{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"10.2"}],"runbook":[]},"completed_at":"2026-01-03T06:33:15.875Z","frozen":{"core_hash":"414f64c14bf9eb87b31f56c8ef2318baa987a56d17d10a0dbc45353340fe19bc"}}
{"id":"BL-0185","title":"Add components portfolio to docs","type":"doc","status":"done","priority":"P2","tags":[],"created_at":"2026-01-03T06:55:08.468Z","updated_at":"2026-01-03T07:13:05.907Z","target":{"selector":"range","value":"range:0.1.x"},"deps":[],"evidence":[],"owner":"agent","notes":"Added a components portfolio grid with preview wiring and docs styling for primitives/shell pages. Evidence: cmd:node packages/docs/tools/generate-docs-content.mjs, cmd:ato gate run --mode fast, output:/home/ismail-el-korchi/Documents/Projects/ui-kit/.ato/runs/artifacts/global/gate/stylelint-1767424283261.log","spec":{"problem":"Primitives docs list components as long contract tables instead of a visual portfolio.","outcome":"Docs include a components portfolio grid with live previews that link to contract details.","acceptance_criteria":["Primitives docs show a component portfolio grid with previews for all primitives; each card links to its contract anchor."],"inputs":["packages/docs/tools/generate-docs-content.mjs","packages/docs/src/app.ts","packages/docs/src/styles.css","cmd:node packages/docs/tools/generate-docs-content.mjs","cmd:ato gate run --mode fast","output:/home/ismail-el-korchi/Documents/Projects/ui-kit/.ato/runs/artifacts/global/gate/stylelint-1767424283261.log"],"deliverables":["Updated docs generator + styles + wiring for portfolio previews"],"scope":[],"risks":[],"contract_refs":[{"doc":".ato/contracts/PLATFORM_CONTRACT.md","section":"10.2"}],"runbook":[]},"completed_at":"2026-01-03T07:13:05.907Z","frozen":{"core_hash":"6890ff9fe6a3a86146252cd15f6998878364b7dbab48833e40916087534412d5"}}
{"id":"BL-0186","title":"Redesign docs IA + primitives page","type":"doc","status":"done","priority":"P1","tags":[],"created_at":"2026-01-03T18:55:16.843Z","updated_at":"2026-01-03T19:47:33.954Z","target":{"selector":"range","value":"range:0.1.x"},"deps":[],"evidence":[],"owner":"agent","notes":"Completed docs IA + primitives redesign; navigation grouped by Guides/Foundations/Components with portfolio and contracts sections. Evidence: output:packages/docs/src/app.ts output:packages/docs/src/styles.css output:packages/docs/tools/generate-docs-content.mjs cmd:npm run test cmd:ato gate run --mode fast cmd:npm -w packages/docs run preview -- --host 127.0.0.1 --port 4173. Preview/tests required listen sockets; reran with escalated sandbox permissions.","spec":{"problem":"Docs IA/navigation is fragmented and primitives page is not competitive.","outcome":"Docs IA is coherent (Foundations/Components/Contracts/Guides/Lab), primitives page is production-grade and matches UIK contracts.","acceptance_criteria":["Updated docs nav + content structure reflect new IA","Primitives page layout/design updated using tokens/primitives only","Fast gate + a11y checks run with evidence"],"inputs":["output:.ato/contracts/PLATFORM_CONTRACT.md","output:packages/docs/content/manifest.json","output:packages/docs/src/app.ts","output:packages/docs/src/content.ts","output:packages/docs/src/styles.css","output:packages/docs/tools/generate-docs-content.mjs","cmd:npm -w packages/docs run build","cmd:npm run lint","cmd:npm run typecheck","cmd:npm run lint:style","cmd:npm run test","cmd:ato gate run --mode fast","cmd:npm -w packages/docs run preview -- --host 127.0.0.1 --port 4173","output:/home/ismail-el-korchi/Documents/Projects/ui-kit/.ato/runs/artifacts/global/gate/format-1767469455506.log","output:/home/ismail-el-korchi/Documents/Projects/ui-kit/.ato/runs/artifacts/global/gate/typecheck-1767469456910.log","output:/home/ismail-el-korchi/Documents/Projects/ui-kit/.ato/runs/artifacts/global/gate/eslint-1767469470793.log","output:/home/ismail-el-korchi/Documents/Projects/ui-kit/.ato/runs/artifacts/global/gate/stylelint-1767469476159.log"],"deliverables":["Updated docs app/IA + primitives redesign"],"scope":[],"risks":[],"contract_refs":["platform-contract-uik-governing-contract"],"runbook":[]},"completed_at":"2026-01-03T19:47:33.954Z","frozen":{"core_hash":"d9234ea832f7209b06dff0fa17dd05d0f42e63d95ab51fd9865de4d36a551001"}}
{"id":"BL-0187","title":"Fix docs LCP + render-blocking CSS","type":"quality-debt","status":"done","priority":"P1","tags":[],"created_at":"2026-01-03T20:05:09.335Z","updated_at":"2026-01-03T20:19:58.331Z","target":{"selector":"range","value":"range:0.1.x"},"deps":[],"evidence":[],"owner":"agent","notes":"Contract review: sections 3, 5, 6, 8, 12, 13, 14 checked; docs-only changes (no ui-tokens/ui-primitives/ui-shell edits). Evidence: cmd:ato gate run --mode full --json; cmd:npm -w packages/docs run test; output:.ato/runs/artifacts/global/gate/docs-test-1767471344081.log","spec":{"problem":"Docs pages show LCP render delay and render-blocking CSS/critical path chains per Chrome perf report.","outcome":"Docs initial render paints hero earlier, CSS/JS critical path shortened, and render-blocking chain addressed without workarounds.","acceptance_criteria":["Render path no longer blocks on JS-inserted DOM; CSS loads early without JS chain","Performance fixes implemented without deprecated/back-compat code","Fast gate and relevant build/tests run with evidence"],"inputs":["PLATFORM_CONTRACT.md (output:.ato/contracts/PLATFORM_CONTRACT.md)","packages/docs app sources (output:packages/docs/src/app.ts, output:packages/docs/src/main.ts, output:packages/docs/index.html, output:packages/docs/src/docs.css)","Chrome perf findings (output:.ato/notes/BL-0187-perf-findings.txt)"],"deliverables":["Docs performance fixes in docs package"],"scope":[],"risks":[],"contract_refs":["platform-contract-uik-governing-contract"],"runbook":[]},"completed_at":"2026-01-03T20:19:58.331Z","frozen":{"core_hash":"e9d373a0297e6de791f0085cbf55988fdb4e8310e8f95cca430f31b3f4562949"}}
{"id":"BL-0188","title":"Fix docs LCP regression from eager registration","type":"bug","status":"done","priority":"P1","tags":[],"created_at":"2026-01-03T20:41:07.500Z","updated_at":"2026-01-03T20:53:45.771Z","target":{"selector":"range","value":"range:0.1.x"},"deps":[],"evidence":[],"owner":"agent","notes":"Root cause: eager register + root shell import on critical path; switched to per-component imports and lazy command center load. Evidence: cmd:npm -w packages/docs run test; cmd:ato gate run --mode fast --json; output:.ato/notes/BL-0188-performance.txt","spec":{"problem":"Docs LCP render delay worsened; DevTools trace shows long critical chain caused by ui-primitives/ui-shell register imports on initial load.","outcome":"Docs initial render loads only required components; LCP render delay reduced; no full-register import on critical path.","acceptance_criteria":["DevTools trace shows reduced critical chain without ui-primitives/register on initial load","Docs still render with required components defined per page","Required gate(s) executed with evidence"],"inputs":["PLATFORM_CONTRACT.md (output:.ato/contracts/PLATFORM_CONTRACT.md)","DevTools performance trace (output:.ato/notes/BL-0188-performance.txt)","Docs app source updates (output:packages/docs/src/app.ts)"],"deliverables":["Docs app updates to scope component registration"],"scope":[],"risks":[],"contract_refs":["platform-contract-uik-governing-contract"],"runbook":[]},"completed_at":"2026-01-03T20:53:45.771Z","frozen":{"core_hash":"63b0cb4eee20a7e0718fb37fb5e2e36924c9d7b50283a36def1bbf4513e6cb28"}}
{"id":"BL-0189","title":"Add Lighthouse gate + perf fixtures for docs","type":"tooling","status":"done","priority":"P2","tags":[],"created_at":"2026-01-03T23:34:20.698Z","updated_at":"2026-01-03T23:55:00.649Z","target":{"selector":"range","value":"range:0.1.x"},"deps":[],"evidence":[],"owner":"agent","notes":"Contract review: PLATFORM_CONTRACT.md section 12 (performance budgets) and section 8.4 (automated a11y checks).\nCompletion: Added a Lighthouse gate and perf fixture routes for docs. Evidence: output:packages/docs/tools/check-docs-lighthouse.mjs; output:packages/docs/content/lab/perf-shell.md; output:packages/docs/content/lab/perf-primitives.md; output:packages/docs/content/manifest.json; output:packages/docs/package.json.","spec":{"problem":"Docs lacks Lighthouse-based perf/a11y diagnostics; regressions in shell/primitives surfaces are not tracked with CWV metrics.","outcome":"Local Lighthouse gate runs on docs build/preview with enforceable thresholds and reports; docs exposes minimal perf fixture routes for representative primitive + shell surfaces.","acceptance_criteria":["Lighthouse gate runs locally against docs preview and emits JSON/HTML reports into .ato/runs/artifacts.","Gate enforces explicit thresholds for performance and a11y (plus CWV budgets like LCP/CLS/INP).","Docs provides perf fixture routes used by the Lighthouse run (covering a shell layout and a representative primitive)."],"inputs":["PLATFORM_CONTRACT.md (output:.ato/contracts/PLATFORM_CONTRACT.md)","Docs lighthouse script (output:packages/docs/tools/check-docs-lighthouse.mjs)","Perf fixture: shell (output:packages/docs/content/lab/perf-shell.md)","Perf fixture: primitives (output:packages/docs/content/lab/perf-primitives.md)","Docs manifest update (output:packages/docs/content/manifest.json)","Docs package scripts (output:packages/docs/package.json)"],"deliverables":["New docs lighthouse check script + npm entry.","Perf fixture routes under docs used by lighthouse."],"scope":["packages/docs/**"],"risks":["Lighthouse flakiness if preview cannot bind; must handle deterministic local preview."],"contract_refs":["12","8.4"],"runbook":[]},"completed_at":"2026-01-03T23:55:00.649Z","frozen":{"core_hash":"5de64ce628e6d737e8d6e911402d520e8779c314ea88b790af964bb18522a949"}}
{"id":"BL-0190","title":"Docs build warnings: remove duplicate dynamic imports + add command-center entrypoint","type":"contract","status":"done","priority":"P2","tags":[],"created_at":"2026-01-05T04:14:25.810Z","updated_at":"2026-01-05T21:45:03.628Z","target":{"selector":"range","value":"range:0.1.x"},"deps":[],"evidence":[],"owner":"agent","notes":"Summary: removed duplicate dynamic loaders for preloaded docs components and switched command-center to a dedicated ui-shell entrypoint; docs build shows no dynamic-vs-static import warnings. Evidence: cmd:npm -w packages/docs run build cmd:ato gate run --mode full --json output:/home/ismail-el-korchi/Documents/Projects/ui-kit/.ato/runs/artifacts/global/gate/format-1767588146693.log output:/home/ismail-el-korchi/Documents/Projects/ui-kit/.ato/runs/artifacts/global/gate/tests-1767588307968.log","spec":{"problem":"Docs build warns about modules imported statically and dynamically; docs also use ui-shell root entrypoint for command-center, which conflicts with the no-monolithic-entrypoint contract.","outcome":"Docs load only per-component entrypoints and a dedicated command-center entrypoint, eliminating duplicate dynamic imports and aligning with the distribution contract.","acceptance_criteria":["Vite build for packages/docs emits no dynamic-vs-static import warnings","packages/docs uses @ismail-elkorchi/ui-shell/command-center for createUikCommandCenter","ui-shell exports ./command-center entrypoint","componentLoaders exclude statically preloaded modules"],"inputs":["cmd:npm -w packages/docs run build","cmd:ato gate run --mode full --json","output:/home/ismail-el-korchi/Documents/Projects/ui-kit/.ato/runs/artifacts/global/gate/format-1767588146693.log","output:/home/ismail-el-korchi/Documents/Projects/ui-kit/.ato/runs/artifacts/global/gate/tests-1767588307968.log","file:packages/docs/src/app.ts","file:packages/ui-shell/package.json","file:packages/ui-shell/README.md"],"deliverables":["Updated docs app imports and component loader map","New ui-shell command-center export"],"scope":["packages/docs","packages/ui-shell"],"risks":["Adds new public export surface; ensure stable import mapping"],"contract_refs":["13.1.B","9.4"],"runbook":[]},"details":{"rationale":"Align docs imports with per-component entrypoints and avoid monolithic ui-shell entrypoint usage. Evidence: cmd:npm -w packages/docs run build output:/home/ismail-el-korchi/Documents/Projects/ui-kit/.ato/runs/artifacts/global/gate/format-1767588146693.log"},"completed_at":"2026-01-05T21:45:03.628Z","frozen":{"core_hash":"fddb719c193a2acf0b0bd5f29c101d8308191636f489636b67d6a7275287a83a"}}
{"id":"BL-0191","title":"Make format non-mutating","type":"tooling","status":"done","priority":"P2","tags":[],"created_at":"2026-01-05T04:29:41.143Z","updated_at":"2026-01-05T05:03:38.177Z","target":{"selector":"range","value":"range:0.1.x"},"deps":[],"evidence":[],"owner":"agent","notes":"Summary: npm run format now uses prettier --check and format writes are explicit via format:write; baseline-support.md is now formatted to keep the check green. Prevention: if format gate flags files, run ./node_modules/.bin/prettier --write <file> before rerunning the gate. Evidence: cmd:ato gate run --mode full --json output:/home/ismail-el-korchi/Documents/Projects/ui-kit/.ato/runs/artifacts/global/gate/format-1767588146693.log output:/home/ismail-el-korchi/Documents/Projects/ui-kit/.ato/runs/artifacts/global/gate/tests-1767588307968.log","spec":{"problem":"npm run format rewrites files during gates, creating noisy diffs and repeatedly touching docs content.","outcome":"npm run format is a check-only gate; formatting writes are explicit.","acceptance_criteria":["npm run format uses prettier --check and does not modify files","npm run format:write exists for intentional fixes","gate format step no longer writes files"],"inputs":["cmd:ato gate run --mode full --json","output:/home/ismail-el-korchi/Documents/Projects/ui-kit/.ato/runs/artifacts/global/gate/format-1767588146693.log","output:/home/ismail-el-korchi/Documents/Projects/ui-kit/.ato/runs/artifacts/global/gate/tests-1767588307968.log","file:packages/docs/content/baseline-support.md"],"deliverables":["Updated root format scripts"],"scope":["tooling"],"risks":["Format drift now fails gate instead of auto-fixing; requires explicit format:write"],"contract_refs":["12"],"runbook":[]},"details":{"rationale":"Make formatting non-mutating in gates and keep docs baseline matrix formatted. Evidence: output:/home/ismail-el-korchi/Documents/Projects/ui-kit/.ato/runs/artifacts/global/gate/format-1767588146693.log output:/home/ismail-el-korchi/Documents/Projects/ui-kit/.ato/runs/artifacts/global/gate/tests-1767588307968.log"},"completed_at":"2026-01-05T05:03:38.177Z","frozen":{"core_hash":"54695cc7be6c5ee9395e8514a447ba7686f3d68d4725e8a91a8ac74274002a17"}}
